<!DOCTYPE html>
<html lang="">

<!-- Mirrored from circleci.com/docs/ja/2.0/configuration-reference/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Jun 2020 07:52:44 GMT -->
<head>
	<script src="../../../../../cdn.optimizely.com/js/8188917468.js"></script>
	
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="description" content=".circleci/config.yml の設定リファレンス">
	
	<link rel="canonical" href="index.html">

	<link href="https://d3r49iyjzglexf.cloudfront.net/favicon-066b37ff00f0f968b903c13ae88b5573b62665aea8fbe91bb61c55dfa9446523.ico" rel="icon" type="image/png" />
  <link rel="stylesheet" href="../../../assets/css/fonts.css" />
  <link rel="stylesheet" href="../../../assets/css/site.css" />
	<link rel="stylesheet" href="../../../assets/css/spacing.css" />
	<link rel="stylesheet" href="../../../assets/css/buttons.css" />
	<link rel="stylesheet" href="../../../assets/css/navbar.css" />
    <link rel="stylesheet" href="../../../assets/css/syntax.css" />
	<link rel="stylesheet" href="../../../assets/css/jquery.navgoco.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../../../../maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
	<!-- End  -->
	<link rel="stylesheet" href="../../../assets/css/main.css" />
	<link rel='stylesheet' href="../../../assets/css/mobile.css" media="screen and (max-width: 800px)" />
	<link rel="stylesheet" href="../../../assets/css/footer.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../../../../cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />
	<link rel="stylesheet" href="../../../assets/css/asciidoc.css">
	<!--link rel="stylesheet" href="/docs/assets/css/asciidoc-pygments.css"-->
	<!--link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script-->
	<title>CircleCI を設定する - CircleCI</title>
	<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";

  analytics.load("AbgkrgN4cbRhAVEwlzMkHbwvrXnxHh35");

  var pageCategory = "docs";
  // slice off the slashes on either end
  var pageName     = "/ja/2.0/configuration-reference/".slice(1, -1) || "default";

  var properties = {
    "title"      : "CircleCI を設定する",
    "short-title": "CircleCI を設定する",
    "categories" : ["configuring-jobs"],
    "description": ".circleci/config.yml の設定リファレンス",
    "collection": "cci2_ja"
  };

  analytics.page(pageCategory, pageName, properties);
  }}();
</script>


	<!-- Instant Search CDN links /-->
	<link rel="stylesheet" type="text/css" href="../../../../../cdn.jsdelivr.net/npm/instantsearch.js%402.10.2/dist/instantsearch.min.css">
	<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.2"></script>
	<link rel="stylesheet" type="text/css" href="../../../../../cdn.jsdelivr.net/npm/instantsearch.js%402.10.2/dist/instantsearch-theme-algolia.min.css">
	<script src="../../../../../cdn.jsdelivr.net/npm/js-cookie%402.2.0/src/js.cookie.min.js"></script>
</head>

<body class="">

	<noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-W9HDVK" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'../../../../../www.googletagmanager.com/gtm5445.html?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-W9HDVK');</script>



<!-- instant hit template container /-->
<div style="display:none;">
	<div id="hits-template">
		<h2>Search Results for "<span id="search-term-display"></span>"</h2>
		<div id="instant-hits"></div>
	</div>
</div>
<div class="outer">
	<nav class="nav-toggle two">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <a href="#main" class="nav-skip-button">
          Skip to content
        </a>

        <div class="widescreen">
          <a href="../../../../ja/index.html" class="logo"><img src="../../../assets/img/logos/logo-wordmark.svg" class="logo" alt="CircleCI Home"></a>


          <ul class="left-links main-nav">
            <li class="nav-item">
<a href="../../../../ja/product/index.html">Product</a>
              <div class="submenu">
                <ul class="subnav">
                  <li class="subnav-item"><a href="../../../../ja/product/index.html">Overview</a></li>
                  <li class="subnav-item"><a href="../../../../ja/product/index.html#how-it-works">How It Works</a></li>
                  <li class="subnav-item"><a href="../../../../ja/product/index.html#features">Features</a></li>
                  <li class="subnav-item"><a href="../../../../ja/build-environments/index.html">Build Environments</a></li>
                  <li class="subnav-item"><a href="../../../../ja/product/index.html#hosting-options">Hosting Options</a></li>
                  <li class="subnav-item"><a href="../../../../ja/integrations/index.html">Integrations</a></li>
                </ul>
              </div>
            </li>

            <li class="nav-item"><a href="../../../../ja/pricing/index.html">Pricing</a></li>
            <li class="nav-item"><a href="../../../../ja/enterprise/index.html">Enterprise</a></li>
            <li class="nav-item">
              <a href="#">
                Developers
              </a>
              <div class="submenu">
                <ul class="subnav">
                  <li class="subnav-item"><a href="../hello-world/index.html">Hello World</a></li>
                  <li class="subnav-item"><a href="../../index.html">Documentation</a></li>
                  <li class="subnav-item"><a href="https://discuss.circleci.com/" target="_blank" rel="noopener noreferrer">Community Forum</a></li>
                  <li class="subnav-item"><a href="../../../../orbs/index.html">Orbs</a></li>
                  <li class="subnav-item"><a href="../../../api/v2/index.html#circleci-api">API</a></li>
                  <li class="subnav-item"><a href="../../../../ja/open-source/index.html">Open Source</a></li>
                </ul>
              </div>
            </li>
            <li class="default-item nav-item">
<a href="../../../../ja/about/index.html">Company</a>
              <div class="submenu">
                <ul class="subnav">
                  <li class="subnav-item"><a href="../../../../ja/about/index.html">About Us</a></li>
                  <li class="subnav-item"><a href="../../../../ja/customers/index.html">Case Studies</a></li>
                  <li class="subnav-item"><a href="../../../../ja/blog/index.html">Blog</a></li>
                  <li class="subnav-item"><a href="../../../../ja/careers/index.html">Careers</a></li>
                  <li class="subnav-item"><a href="../../../../ja/contact/index.html">Contact Us</a></li>
                  <li class="subnav-item"><a href="../../../../ja/partners/index.html">Partner With Us</a></li>
                </ul>
              </div>
            </li>
          </ul>

          <ul class="right-links main-nav">
            <li class="default-item nav-item">
              <a href="../../../../ja/contact/index.html" data-analytics="top-nav-contact-us">
                Contact Us
              </a>
            </li>
            <li class="default-item nav-item">
              <a href="#">
                Support
              </a>
              <div class="submenu">
                <ul class="subnav">
                  <li class="subnav-item"><a href="https://academy.circleci.com/?access_code=public-2020" target="_blank" rel="noopener noreferrer">Training</a></li>
                  <li class="subnav-item"><a href="https://support.circleci.com/hc/en-us" target="_blank" rel="noopener noreferrer">Get Support</a></li>
                  <li class="subnav-item"><a href="https://status.circleci.com/" target="_blank" rel="noopener noreferrer">System Status</a></li>
                  <li class="subnav-item"><a href="https://ideas.circleci.com/" target="_blank" rel="noopener noreferrer">Feature Requests</a></li>
                  <li class="subnav-item"><a href="../../../../ja/support/premium-support/index.html">Premium Support</a></li>
                </ul>
              </div>
            </li>
            <li class="divider-left nav-item visitor-item"><a href="../../../../ja/vcs-authorize/index.html" data-hj-masked>Log In</a></li>
            <li class="nav-item visitor-item"><a class="btn-primary small" href="../../../../ja/signup/index.html" data-analytics-action="signup-clicked" data-analytics-location="nav" data-optimizely="signup_button_clicked">Sign Up</a></li>
            <li class="dashboard-link desktop-nav divider-left"><a href="https://circleci.com/dashboard">Go to app</a></li>
          </ul>

        </div>

        <div class="narrowscreen">

          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mobile-navigation" aria-expanded="false" aria-controls="#mobile-navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <a href="../../../../index.html"><img class="logo" src="../../../assets/img/logos/logo-wordmark.svg" alt="CircleCI Home"></a>


          <span class="login">
            <a href="../../../../ja/vcs-authorize/index.html" data-hj-masked class="mobile-nav signup visitor-item" data-analytics-location="nav">Log In</a>
            <a href="https://circleci.com/dashboard" class="dashboard-link mobile-nav">Go to app</a>
          </span>

          <ul class="dropdown-menu2" id="mobile-navigation">
            <li><a href="../../../../ja/signup/index.html" data-analytics-action="signup-clicked" data-optimizely="signup_button_clicked" class="btn-primary">Sign Up for Free</a></li>
            <li class="arrow collapsed border-bottom">
              <span class="heading">
                <i class="fa fa-angle-right" aria-hidden="true"></i>
                Product
              </span>
              <ul class="subnav">
                <li class="subnav-item"><a href="../../../../ja/product/index.html">Overview</a></li>
                <li class="subnav-item"><a href="../../../../ja/product/index.html#how-it-works">How It Works</a></li>
                <li class="subnav-item"><a href="../../../../ja/product/index.html#features">Features</a></li>
                <li class="subnav-item"><a href="../../../../ja/build-environments/index.html">Build Environments</a></li>
                <li class="subnav-item"><a href="../../../../ja/product/index.html#hosting-options">Hosting Options</a></li>
                <li class="subnav-item"><a href="../../../../ja/integrations/index.html">Integrations</a></li>
              </ul>
            </li>
            <li class="border-bottom"><a href="../../../../ja/pricing/index.html">Pricing</a></li>
            <li class="border-bottom"><a href="../../../../ja/enterprise/index.html">Enterprise</a></li>
            <li class="arrow collapsed border-bottom">
              <span class="heading">
                <i class="fa fa-angle-right" aria-hidden="true"></i>
                Developers
              </span>
              <ul class="subnav">
                <li class="subnav-item"><a href="../hello-world/index.html">Getting Started</a></li>
                <li class="subnav-item"><a href="../../index.html">Documentation</a></li>
                <li class="subnav-item"><a href="https://discuss.circleci.com/" target="_blank" rel="noopener noreferrer">Community Forum</a></li>
                <li class="subnav-item"><a href="../../../../orbs/index.html">Orbs</a></li>
                <li class="subnav-item"><a href="../../../api/v2/index.html#circleci-api">API</a></li>
                <li class="subnav-item"><a href="../../../../ja/open-source/index.html">Open Source</a></li>
              </ul>
            </li>
            <li class="arrow collapsed border-bottom">
              <span class="heading">
                <i class="fa fa-angle-right" aria-hidden="true"></i>
                Company
              </span>
              <ul class="subnav">
                <li class="subnav-item"><a href="../../../../ja/about/index.html">About Us</a></li>
                <li class="subnav-item"><a href="../../../../ja/customers/index.html">Case Studies</a></li>
                <li class="subnav-item"><a href="../../../../ja/blog/index.html">Blog</a></li>
                <li class="subnav-item"><a href="../../../../ja/careers/index.html">Careers</a></li>
                <li class="subnav-item"><a href="../../../../ja/contact/index.html">Contact Us</a></li>
                <li class="subnav-item"><a href="../../../../ja/partners/index.html">Partner With Us</a></li>
              </ul>
            </li>
            <li class="arrow collapsed border-bottom">
              <i class="fa fa-angle-right" aria-hidden="true"></i>
              Support
              <ul class="subnav">
                <li class="subnav-item"><a href="https://academy.circleci.com/?access_code=public-2020" target="_blank" rel="noopener noreferrer">Training</a></li>
                <li class="subnav-item"><a href="https://support.circleci.com/hc/en-us" target="_blank" rel="noopener noreferrer">Get Support</a></li>
                <li class="subnav-item"><a href="https://status.circleci.com/" target="_blank" rel="noopener noreferrer">System Status</a></li>
                <li class="subnav-item"><a href="https://ideas.circleci.com/" target="_blank" rel="noopener noreferrer">Feature Requests</a></li>
                <li class="subnav-item"><a href="../../../../ja/support/premium-support/index.html">Premium Support</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

	<div class="main-searchbar">
  <form>
    <div id="search-box">
      <!-- SearchBox widget will appear here -->
    </div>
  </form>
</div>
	<!-- MOBILE SUBNAV /-->
<div class="sidebar-mobile-wrapper">
  <!-- DISPLAY ITEM /-->
  <div class="current-item">
    
    
    
      <div class="mobile-sidebar-item " data-id="welcome">
        
          <img class="icon" src="../../../assets/docs/welcome-f7457826e96dddba0bfad601a1ed3736a5d867782abc501dd6a0eb69a1da7443.svg" integrity="sha256-90V4Jult3boL+tYBoe03NqXYZ3gqvFAd1qDraaHadEM=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>ようこそ</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
      <div class="mobile-sidebar-item  hidden " data-id="getting-started">
        
          <img class="icon" src="../../../assets/docs/start-26069d6eae162cde390e2333e1817966e90ab1cb2f2688620384328a98160057.svg" integrity="sha256-Jgadbq4WLN45DiMz4YF5ZukKscsvJohiA4QyipgWAFc=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>はじめよう</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
      <div class="mobile-sidebar-item  hidden " data-id="configuration">
        
          <img class="icon" src="../../../assets/docs/config-16429d8b407e1b8b926594a981f06fb62cae6415313a94bf0c174d3227e38548.svg" integrity="sha256-FkKdi0B+G4uSZZSpgfBvtiyuZBUxOpS/DBdNMifjhUg=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>設定</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
      <div class="mobile-sidebar-item  hidden " data-id="projects">
        
          <img class="icon" src="../../../assets/docs/project-c4d267d466adbd1ad6eb3b0da8954c433a075ff2a773cc93eb4f789b20da6444.svg" integrity="sha256-xNJn1GatvRrW6zsNqJVMQzoHX/Knc8yT6094myDaZEQ=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>プロジェクト</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
      <div class="mobile-sidebar-item  hidden " data-id="jobs">
        
          <img class="icon" src="../../../assets/docs/builds-6c2268e22c2dc3588ebbd7f471e8545a8d22cc79c03737df0ee02c3074bf0e60.svg" integrity="sha256-bCJo4iwtw1iOu9f0cehUWo0izHnANzffDuAsMHS/DmA=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>ジョブ</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
      <div class="mobile-sidebar-item  hidden " data-id="deployment">
        
          <img class="icon" src="../../../assets/docs/deploy-49456c50980896bf09bb80c1eb4e1ee9234fc0bc7193d8c17154a905424aeb0b.svg" integrity="sha256-SUVsUJgIlr8Ju4DB604e6SNPwLxxk9jBcVSpBUJK6ws=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>デプロイメント</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
      <div class="mobile-sidebar-item  hidden " data-id="reference">
        
          <img class="icon" src="../../../assets/docs/reference-caddd7b03de64e941b60cfba247b91f4d2e040f234876ed242c7764878c60412.svg" integrity="sha256-yt3XsD3mTpQbYM+6JHuR9NLgQPI0h27SQsd2SHjGBBI=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>リファレンス</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
      <div class="mobile-sidebar-item  hidden " data-id="server-administration">
        
          <img class="icon" src="../../../assets/docs/admin-7d94f9ffd9f2c7ca50406002a5d607f40fd5da0e6164d533b26424e6ff962606.svg" integrity="sha256-fZT5/9nyx8pQQGACpdYH9A/V2g5hZNUzsmQk5v+WJgY=" crossorigin="anonymous">
        

        

        <span class="nav-span"><strong>アドミニストレーション</strong></span>

        <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
      </div>
    
  </div>

  <!-- DROPDOWN /-->
  <div class="sidebar-mobile-dropdown">
    <nav class="mobile-sidebar hidden">
      

      
        <ul>
          <li class="main-nav-item closed" data-section="welcome">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/welcome-f7457826e96dddba0bfad601a1ed3736a5d867782abc501dd6a0eb69a1da7443.svg" integrity="sha256-90V4Jult3boL+tYBoe03NqXYZ3gqvFAd1qDraaHadEM=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">ようこそ</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                
                  
                <li class="nav-item"><a class="" href="../index.html#section=welcome" data-proofer-ignore>イントロダクション</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../about-circleci/index.html#section=welcome" data-proofer-ignore>CI/CD概要</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../demo-apps/index.html#section=welcome" data-proofer-ignore>サポートされている言語</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
        <ul>
          <li class="main-nav-item closed" data-section="getting-started">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/start-26069d6eae162cde390e2333e1817966e90ab1cb2f2688620384328a98160057.svg" integrity="sha256-Jgadbq4WLN45DiMz4YF5ZukKscsvJohiA4QyipgWAFc=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">はじめよう</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                
                  
                <li class="nav-item"><a class="" href="../getting-started/index.html#section=getting-started" data-proofer-ignore>イントロダクション</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../first-steps/index.html#section=getting-started" data-proofer-ignore>CircleCIを始める</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../hello-world/index.html#section=getting-started" data-proofer-ignore>Hello World</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../faq/index.html#section=getting-started" data-proofer-ignore>FAQ</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../concepts/index.html#section=getting-started" data-proofer-ignore>コンセプト</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../project-build/index.html#section=getting-started" data-proofer-ignore>プロジェクトとビルド</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../jobs-steps/index.html#section=getting-started" data-proofer-ignore>Orbs, ジョブ、ステップ、ワークフロー</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../migrating-from-jenkins/index.html#section=getting-started" data-proofer-ignore>Jenkinsとの違い</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../security/index.html#section=getting-started" data-proofer-ignore>セキュリティ</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../migration-intro/index.html#section=getting-started" data-proofer-ignore>マイグレーション</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../migration/index.html#section=getting-started" data-proofer-ignore>2.0への移行のヒント</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../migrating-from-1-2/index.html#section=getting-started" data-proofer-ignore>Linuxプロジェクトの移行</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../ios-migrating-from-1-2/index.html#section=getting-started" data-proofer-ignore>iOSプロジェクトの移行</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../config-translation/index.html#section=getting-started" data-proofer-ignore>config-translatorを使う</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
        <ul>
          <li class="main-nav-item closed" data-section="configuration">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/config-16429d8b407e1b8b926594a981f06fb62cae6415313a94bf0c174d3227e38548.svg" integrity="sha256-FkKdi0B+G4uSZZSpgfBvtiyuZBUxOpS/DBdNMifjhUg=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">設定</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                
                  
                <li class="nav-item"><a class="" href="../config-intro/index.html#section=configuration" data-proofer-ignore>イントロダクション</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="index.html#section=configuration" data-proofer-ignore>設定リファレンス</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../writing-yaml/index.html#section=configuration" data-proofer-ignore>YAMLを書く</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../local-cli/index.html#section=configuration" data-proofer-ignore>CircleCI CLIを使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../examples/index.html#section=configuration" data-proofer-ignore>ローカルでコンフィグのテスト</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../orb-intro/index.html#section=configuration" data-proofer-ignore>Orbs</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../using-orbs/index.html#section=configuration" data-proofer-ignore>Orbsを使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../reusing-config/index.html#section=configuration" data-proofer-ignore>コンフィグの再利用</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../orbs-faq/index.html#section=configuration" data-proofer-ignore>Orbs FAQ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../creating-orbs/index.html#section=configuration" data-proofer-ignore>Orbsを作る</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../examples-intro/index.html#section=configuration" data-proofer-ignore>サンプル</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../sample-config/index.html#section=configuration" data-proofer-ignore>config.ymlの設定</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../tutorials/index.html#section=configuration" data-proofer-ignore>チュートリアル</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../postgres-config/index.html#section=configuration" data-proofer-ignore>データベースの設定例</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../example-configs/index.html#section=configuration" data-proofer-ignore>パブリックなサンプルリポジトリ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../testing-ios/index.html#section=configuration" data-proofer-ignore>iOSアプリをテストする</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../executor-intro/index.html#section=configuration" data-proofer-ignore>Executorとイメージ</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../executor-types/index.html#section=configuration" data-proofer-ignore>Executorを選ぶ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../circleci-images/index.html#section=configuration" data-proofer-ignore>CircleCI Dockerイメージ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../custom-images/index.html#section=configuration" data-proofer-ignore>カスタムイメージを使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../private-images/index.html#section=configuration" data-proofer-ignore>プライベートイメージを使う</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../adv-config/index.html#section=configuration" data-proofer-ignore>高度な設定</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../using-shell-scripts/index.html#section=configuration" data-proofer-ignore>シェルスクリプトを使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../browser-testing/index.html#section=configuration" data-proofer-ignore>ブラウザテストのセットアップ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../databases/index.html#section=configuration" data-proofer-ignore>データベースを設定する</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../building-docker-images/index.html#section=configuration" data-proofer-ignore>Dockerコマンドを実行</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../docker-compose/index.html#section=configuration" data-proofer-ignore>Docker Composeを使う</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
        <ul>
          <li class="main-nav-item closed" data-section="projects">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/project-c4d267d466adbd1ad6eb3b0da8954c433a075ff2a773cc93eb4f789b20da6444.svg" integrity="sha256-xNJn1GatvRrW6zsNqJVMQzoHX/Knc8yT6094myDaZEQ=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">プロジェクト</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                
                  
                <li class="nav-item"><a class="" href="../settings/index.html#section=projects" data-proofer-ignore>セッティング</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../gh-bb-integration/index.html#section=projects" data-proofer-ignore>GitHubとBitbucket</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../enable-checks/index.html#section=projects" data-proofer-ignore>GitHub Checksを有効化する</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../oss/index.html#section=projects" data-proofer-ignore>オープンソースプロジェクトをビルド</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../notifications/index.html#section=projects" data-proofer-ignore>通知を使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../managing-api-tokens/index.html#section=projects" data-proofer-ignore>APIトークンの管理</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../env-vars/index.html#section=projects" data-proofer-ignore>環境変数を使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../contexts/index.html#section=projects" data-proofer-ignore>Contextsを使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../build-processing/index.html#section=projects" data-proofer-ignore>Build Processingの有効化</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../ios-codesigning/index.html#section=projects" data-proofer-ignore>iOSコードサインの設定</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../optimizations/index.html#section=projects" data-proofer-ignore>最適化</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../caching/index.html#section=projects" data-proofer-ignore>依存関係のキャッシュ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../parallelism-faster-jobs/index.html#section=projects" data-proofer-ignore>テストの並列実行</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../docker-layer-caching/index.html#section=projects" data-proofer-ignore>Docker Layer Cachingを使う</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
        <ul>
          <li class="main-nav-item closed" data-section="jobs">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/builds-6c2268e22c2dc3588ebbd7f471e8545a8d22cc79c03737df0ee02c3074bf0e60.svg" integrity="sha256-bCJo4iwtw1iOu9f0cehUWo0izHnANzffDuAsMHS/DmA=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">ジョブ</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                
                  
                <li class="nav-item"><a class="" href="../status/index.html#section=jobs" data-proofer-ignore>ステータス</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../containers/index.html#section=jobs" data-proofer-ignore>コンテナを使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../status-badges/index.html#section=jobs" data-proofer-ignore>ステータスバッジを追加する</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../artifacts/index.html#section=jobs" data-proofer-ignore>ビルドアーティファクトの保存</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../ssh-access-jobs/index.html#section=jobs" data-proofer-ignore>SSHデバッグ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../java-oom/index.html#section=jobs" data-proofer-ignore>Javaのメモリエラーのデバッグ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../collect-test-data/index.html#section=jobs" data-proofer-ignore>テストメタデータの収集</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../insights/index.html#section=jobs" data-proofer-ignore>Insightsを使う</a></li>
                    
                  </ul>
                
              
                
                  
                <li class="nav-item"><a class="" href="../triggers/index.html#section=jobs" data-proofer-ignore>トリガー</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../skip-build/index.html#section=jobs" data-proofer-ignore>ビルドのスキップとキャンセル</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../api-job-trigger/index.html#section=jobs" data-proofer-ignore>APIを使ってジョブをトリガーする</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../workflows/index.html#section=jobs" data-proofer-ignore>ワークフローでジョブをスケジュールする</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
        <ul>
          <li class="main-nav-item closed" data-section="deployment">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/deploy-49456c50980896bf09bb80c1eb4e1ee9234fc0bc7193d8c17154a905424aeb0b.svg" integrity="sha256-SUVsUJgIlr8Ju4DB604e6SNPwLxxk9jBcVSpBUJK6ws=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">デプロイメント</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                
                  
                <li class="nav-item"><a class="" href="../deployment-integrations/index.html#section=deployment" data-proofer-ignore>デプロイメントの設定</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../ecs-ecr/index.html#section=deployment" data-proofer-ignore>AWS ECR/ECSにデプロイする</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../yarn/index.html#section=deployment" data-proofer-ignore>YarnをCircleCIで使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../build-publish-snap-packages/index.html#section=deployment" data-proofer-ignore>Snapのパッケージを公開する</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../artifactory/index.html#section=deployment" data-proofer-ignore>Artifactoryを使う</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../packagecloud/index.html#section=deployment" data-proofer-ignore>Packagecloudに公開する</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
        <ul>
          <li class="main-nav-item closed" data-section="reference">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/reference-caddd7b03de64e941b60cfba247b91f4d2e040f234876ed242c7764878c60412.svg" integrity="sha256-yt3XsD3mTpQbYM+6JHuR9NLgQPI0h27SQsd2SHjGBBI=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">リファレンス</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="index.html#section=reference" data-proofer-ignore>設定リファレンス</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../../../api/index.html#section=reference" data-proofer-ignore>APIリファレンス</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../circleci-images/index.html#section=reference" data-proofer-ignore>CircleCI公式イメージ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../glossary/index.html#section=reference" data-proofer-ignore>用語集</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../help-and-support/index.html#section=reference" data-proofer-ignore>ヘルプとサポート</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
        <ul>
          <li class="main-nav-item closed" data-section="server-administration">
            <div class="list-wrap">
              
                <img class="icon" src="../../../assets/docs/admin-7d94f9ffd9f2c7ca50406002a5d607f40fd5da0e6164d533b26424e6ff962606.svg" integrity="sha256-fZT5/9nyx8pQQGACpdYH9A/V2g5hZNUzsmQk5v+WJgY=" crossorigin="anonymous">
              

              

              
                <span class="nav-span">アドミニストレーション</span>
              

              
                <img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
              
            </div>

            
            <ul class="subnav">
              
                
                  
                <li class="nav-item"><a class="" href="../overview/index.html#section=server-administration" data-proofer-ignore>概要</a></li>
                

                
                  <ul>
                    
                      
                      <li class="subnav-item"><a class="" href="../single-box/index.html#section=server-administration" data-proofer-ignore>トライアル</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../admin-faq/index.html#section=server-administration" data-proofer-ignore>FAQ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../upgrading/index.html#section=server-administration" data-proofer-ignore>アップグレード</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../security/index.html#section=server-administration" data-proofer-ignore>セキュリティ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../certificates/index.html#section=server-administration" data-proofer-ignore>証明書</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../proxy/index.html#section=server-administration" data-proofer-ignore>プロキシー</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../aws/index.html#section=server-administration" data-proofer-ignore>インストーレーション</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../authentication/index.html#section=server-administration" data-proofer-ignore>認証</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../monitoring/index.html#section=server-administration" data-proofer-ignore>モニタリング</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../jvm-heap-size-configuration/index.html#section=server-administration" data-proofer-ignore>JVMヒープサイズの調整</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../nomad/index.html#section=server-administration" data-proofer-ignore>Nomad</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../backup/index.html#section=server-administration" data-proofer-ignore>バックアップ</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../troubleshooting/index.html#section=server-administration" data-proofer-ignore>トラブルシューティング</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../gpu/index.html#section=server-administration" data-proofer-ignore>GPUビルダー</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../vm-service/index.html#section=server-administration" data-proofer-ignore>VMサービスの設定</a></li>
                    
                      
                      <li class="subnav-item"><a class="" href="../open-source/index.html#section=server-administration" data-proofer-ignore>Acknowledgments</a></li>
                    
                  </ul>
                
              
            </ul>
            
          </li>
        </ul>
      
    </nav>
  </div>
</div>

  <div class="hits-target"></div>
	<div class="main-body">
		<!-- FULL SCREEN /-->
<div class="sidebar-wrapper">
		<nav class="sidebar fixed">
				
				
				

    <div class="sidebar-item-group">
						
						<ul>
								<li class="main-nav-item closed" data-section="welcome">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/welcome-f7457826e96dddba0bfad601a1ed3736a5d867782abc501dd6a0eb69a1da7443.svg" integrity="sha256-90V4Jult3boL+tYBoe03NqXYZ3gqvFAd1qDraaHadEM=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">ようこそ</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												
            
												<li class="nav-item"><a class="" href="../index.html#section=welcome" data-proofer-ignore>イントロダクション</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../about-circleci/index.html#section=welcome" data-proofer-ignore>CI/CD概要</a></li>
														
              
														<li class="subnav-item"><a class="" href="../demo-apps/index.html#section=welcome" data-proofer-ignore>サポートされている言語</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
						<ul>
								<li class="main-nav-item closed" data-section="getting-started">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/start-26069d6eae162cde390e2333e1817966e90ab1cb2f2688620384328a98160057.svg" integrity="sha256-Jgadbq4WLN45DiMz4YF5ZukKscsvJohiA4QyipgWAFc=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">はじめよう</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												
            
												<li class="nav-item"><a class="" href="../getting-started/index.html#section=getting-started" data-proofer-ignore>イントロダクション</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../first-steps/index.html#section=getting-started" data-proofer-ignore>CircleCIを始める</a></li>
														
              
														<li class="subnav-item"><a class="" href="../hello-world/index.html#section=getting-started" data-proofer-ignore>Hello World</a></li>
														
              
														<li class="subnav-item"><a class="" href="../faq/index.html#section=getting-started" data-proofer-ignore>FAQ</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../concepts/index.html#section=getting-started" data-proofer-ignore>コンセプト</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../project-build/index.html#section=getting-started" data-proofer-ignore>プロジェクトとビルド</a></li>
														
              
														<li class="subnav-item"><a class="" href="../jobs-steps/index.html#section=getting-started" data-proofer-ignore>Orbs, ジョブ、ステップ、ワークフロー</a></li>
														
              
														<li class="subnav-item"><a class="" href="../migrating-from-jenkins/index.html#section=getting-started" data-proofer-ignore>Jenkinsとの違い</a></li>
														
              
														<li class="subnav-item"><a class="" href="../security/index.html#section=getting-started" data-proofer-ignore>セキュリティ</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../migration-intro/index.html#section=getting-started" data-proofer-ignore>マイグレーション</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../migration/index.html#section=getting-started" data-proofer-ignore>2.0への移行のヒント</a></li>
														
              
														<li class="subnav-item"><a class="" href="../migrating-from-1-2/index.html#section=getting-started" data-proofer-ignore>Linuxプロジェクトの移行</a></li>
														
              
														<li class="subnav-item"><a class="" href="../ios-migrating-from-1-2/index.html#section=getting-started" data-proofer-ignore>iOSプロジェクトの移行</a></li>
														
              
														<li class="subnav-item"><a class="" href="../config-translation/index.html#section=getting-started" data-proofer-ignore>config-translatorを使う</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
						<ul>
								<li class="main-nav-item closed" data-section="configuration">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/config-16429d8b407e1b8b926594a981f06fb62cae6415313a94bf0c174d3227e38548.svg" integrity="sha256-FkKdi0B+G4uSZZSpgfBvtiyuZBUxOpS/DBdNMifjhUg=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">設定</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												
            
												<li class="nav-item"><a class="" href="../config-intro/index.html#section=configuration" data-proofer-ignore>イントロダクション</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class=" active " href="index.html#section=configuration" data-proofer-ignore>設定リファレンス</a></li>
														
              
														<li class="subnav-item"><a class="" href="../writing-yaml/index.html#section=configuration" data-proofer-ignore>YAMLを書く</a></li>
														
              
														<li class="subnav-item"><a class="" href="../local-cli/index.html#section=configuration" data-proofer-ignore>CircleCI CLIを使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../examples/index.html#section=configuration" data-proofer-ignore>ローカルでコンフィグのテスト</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../orb-intro/index.html#section=configuration" data-proofer-ignore>Orbs</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../using-orbs/index.html#section=configuration" data-proofer-ignore>Orbsを使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../reusing-config/index.html#section=configuration" data-proofer-ignore>コンフィグの再利用</a></li>
														
              
														<li class="subnav-item"><a class="" href="../orbs-faq/index.html#section=configuration" data-proofer-ignore>Orbs FAQ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../creating-orbs/index.html#section=configuration" data-proofer-ignore>Orbsを作る</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../examples-intro/index.html#section=configuration" data-proofer-ignore>サンプル</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../sample-config/index.html#section=configuration" data-proofer-ignore>config.ymlの設定</a></li>
														
              
														<li class="subnav-item"><a class="" href="../tutorials/index.html#section=configuration" data-proofer-ignore>チュートリアル</a></li>
														
              
														<li class="subnav-item"><a class="" href="../postgres-config/index.html#section=configuration" data-proofer-ignore>データベースの設定例</a></li>
														
              
														<li class="subnav-item"><a class="" href="../example-configs/index.html#section=configuration" data-proofer-ignore>パブリックなサンプルリポジトリ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../testing-ios/index.html#section=configuration" data-proofer-ignore>iOSアプリをテストする</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../executor-intro/index.html#section=configuration" data-proofer-ignore>Executorとイメージ</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../executor-types/index.html#section=configuration" data-proofer-ignore>Executorを選ぶ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../circleci-images/index.html#section=configuration" data-proofer-ignore>CircleCI Dockerイメージ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../custom-images/index.html#section=configuration" data-proofer-ignore>カスタムイメージを使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../private-images/index.html#section=configuration" data-proofer-ignore>プライベートイメージを使う</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../adv-config/index.html#section=configuration" data-proofer-ignore>高度な設定</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../using-shell-scripts/index.html#section=configuration" data-proofer-ignore>シェルスクリプトを使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../browser-testing/index.html#section=configuration" data-proofer-ignore>ブラウザテストのセットアップ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../databases/index.html#section=configuration" data-proofer-ignore>データベースを設定する</a></li>
														
              
														<li class="subnav-item"><a class="" href="../building-docker-images/index.html#section=configuration" data-proofer-ignore>Dockerコマンドを実行</a></li>
														
              
														<li class="subnav-item"><a class="" href="../docker-compose/index.html#section=configuration" data-proofer-ignore>Docker Composeを使う</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
						<ul>
								<li class="main-nav-item closed" data-section="projects">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/project-c4d267d466adbd1ad6eb3b0da8954c433a075ff2a773cc93eb4f789b20da6444.svg" integrity="sha256-xNJn1GatvRrW6zsNqJVMQzoHX/Knc8yT6094myDaZEQ=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">プロジェクト</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												
            
												<li class="nav-item"><a class="" href="../settings/index.html#section=projects" data-proofer-ignore>セッティング</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../gh-bb-integration/index.html#section=projects" data-proofer-ignore>GitHubとBitbucket</a></li>
														
              
														<li class="subnav-item"><a class="" href="../enable-checks/index.html#section=projects" data-proofer-ignore>GitHub Checksを有効化する</a></li>
														
              
														<li class="subnav-item"><a class="" href="../oss/index.html#section=projects" data-proofer-ignore>オープンソースプロジェクトをビルド</a></li>
														
              
														<li class="subnav-item"><a class="" href="../notifications/index.html#section=projects" data-proofer-ignore>通知を使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../managing-api-tokens/index.html#section=projects" data-proofer-ignore>APIトークンの管理</a></li>
														
              
														<li class="subnav-item"><a class="" href="../env-vars/index.html#section=projects" data-proofer-ignore>環境変数を使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../contexts/index.html#section=projects" data-proofer-ignore>Contextsを使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../build-processing/index.html#section=projects" data-proofer-ignore>Build Processingの有効化</a></li>
														
              
														<li class="subnav-item"><a class="" href="../ios-codesigning/index.html#section=projects" data-proofer-ignore>iOSコードサインの設定</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../optimizations/index.html#section=projects" data-proofer-ignore>最適化</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../caching/index.html#section=projects" data-proofer-ignore>依存関係のキャッシュ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../parallelism-faster-jobs/index.html#section=projects" data-proofer-ignore>テストの並列実行</a></li>
														
              
														<li class="subnav-item"><a class="" href="../docker-layer-caching/index.html#section=projects" data-proofer-ignore>Docker Layer Cachingを使う</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
						<ul>
								<li class="main-nav-item closed" data-section="jobs">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/builds-6c2268e22c2dc3588ebbd7f471e8545a8d22cc79c03737df0ee02c3074bf0e60.svg" integrity="sha256-bCJo4iwtw1iOu9f0cehUWo0izHnANzffDuAsMHS/DmA=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">ジョブ</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												
            
												<li class="nav-item"><a class="" href="../status/index.html#section=jobs" data-proofer-ignore>ステータス</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../containers/index.html#section=jobs" data-proofer-ignore>コンテナを使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../status-badges/index.html#section=jobs" data-proofer-ignore>ステータスバッジを追加する</a></li>
														
              
														<li class="subnav-item"><a class="" href="../artifacts/index.html#section=jobs" data-proofer-ignore>ビルドアーティファクトの保存</a></li>
														
              
														<li class="subnav-item"><a class="" href="../ssh-access-jobs/index.html#section=jobs" data-proofer-ignore>SSHデバッグ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../java-oom/index.html#section=jobs" data-proofer-ignore>Javaのメモリエラーのデバッグ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../collect-test-data/index.html#section=jobs" data-proofer-ignore>テストメタデータの収集</a></li>
														
              
														<li class="subnav-item"><a class="" href="../insights/index.html#section=jobs" data-proofer-ignore>Insightsを使う</a></li>
														
												</ul>
												
												
												
            
												<li class="nav-item"><a class="" href="../triggers/index.html#section=jobs" data-proofer-ignore>トリガー</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../skip-build/index.html#section=jobs" data-proofer-ignore>ビルドのスキップとキャンセル</a></li>
														
              
														<li class="subnav-item"><a class="" href="../api-job-trigger/index.html#section=jobs" data-proofer-ignore>APIを使ってジョブをトリガーする</a></li>
														
              
														<li class="subnav-item"><a class="" href="../workflows/index.html#section=jobs" data-proofer-ignore>ワークフローでジョブをスケジュールする</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
						<ul>
								<li class="main-nav-item closed" data-section="deployment">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/deploy-49456c50980896bf09bb80c1eb4e1ee9234fc0bc7193d8c17154a905424aeb0b.svg" integrity="sha256-SUVsUJgIlr8Ju4DB604e6SNPwLxxk9jBcVSpBUJK6ws=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">デプロイメント</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												
            
												<li class="nav-item"><a class="" href="../deployment-integrations/index.html#section=deployment" data-proofer-ignore>デプロイメントの設定</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../ecs-ecr/index.html#section=deployment" data-proofer-ignore>AWS ECR/ECSにデプロイする</a></li>
														
              
														<li class="subnav-item"><a class="" href="../yarn/index.html#section=deployment" data-proofer-ignore>YarnをCircleCIで使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../build-publish-snap-packages/index.html#section=deployment" data-proofer-ignore>Snapのパッケージを公開する</a></li>
														
              
														<li class="subnav-item"><a class="" href="../artifactory/index.html#section=deployment" data-proofer-ignore>Artifactoryを使う</a></li>
														
              
														<li class="subnav-item"><a class="" href="../packagecloud/index.html#section=deployment" data-proofer-ignore>Packagecloudに公開する</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
						<ul>
								<li class="main-nav-item closed" data-section="reference">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/reference-caddd7b03de64e941b60cfba247b91f4d2e040f234876ed242c7764878c60412.svg" integrity="sha256-yt3XsD3mTpQbYM+6JHuR9NLgQPI0h27SQsd2SHjGBBI=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">リファレンス</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												

												
												<ul>
														
              
														<li class="subnav-item"><a class=" active " href="index.html#section=reference" data-proofer-ignore>設定リファレンス</a></li>
														
              
														<li class="subnav-item"><a class="" href="../../../api/index.html#section=reference" data-proofer-ignore>APIリファレンス</a></li>
														
              
														<li class="subnav-item"><a class="" href="../circleci-images/index.html#section=reference" data-proofer-ignore>CircleCI公式イメージ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../glossary/index.html#section=reference" data-proofer-ignore>用語集</a></li>
														
              
														<li class="subnav-item"><a class="" href="../help-and-support/index.html#section=reference" data-proofer-ignore>ヘルプとサポート</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
						<ul>
								<li class="main-nav-item closed" data-section="server-administration">
										<div class="list-wrap">
												
												<img class="icon" src="../../../assets/docs/admin-7d94f9ffd9f2c7ca50406002a5d607f40fd5da0e6164d533b26424e6ff962606.svg" integrity="sha256-fZT5/9nyx8pQQGACpdYH9A/V2g5hZNUzsmQk5v+WJgY=" crossorigin="anonymous">
												

            

												
												<span class="nav-span">アドミニストレーション</span>
												

												
												<img class="arrow" src="../../../assets/docs/arrow-right-c48b1d1202a629fc0c39f8a044c029175a91c43fc4ba376e271c9dfa31e8fa6d.svg" integrity="sha256-xIsdEgKmKfwMOfigRMApF1qRxD/EujduJxyd+jHo+m0=" crossorigin="anonymous">
												
										</div>

										
										<ul class="subnav">
												
												
            
												<li class="nav-item"><a class="" href="../overview/index.html#section=server-administration" data-proofer-ignore>概要</a></li>
												

												
												<ul>
														
              
														<li class="subnav-item"><a class="" href="../single-box/index.html#section=server-administration" data-proofer-ignore>トライアル</a></li>
														
              
														<li class="subnav-item"><a class="" href="../admin-faq/index.html#section=server-administration" data-proofer-ignore>FAQ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../upgrading/index.html#section=server-administration" data-proofer-ignore>アップグレード</a></li>
														
              
														<li class="subnav-item"><a class="" href="../security/index.html#section=server-administration" data-proofer-ignore>セキュリティ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../certificates/index.html#section=server-administration" data-proofer-ignore>証明書</a></li>
														
              
														<li class="subnav-item"><a class="" href="../proxy/index.html#section=server-administration" data-proofer-ignore>プロキシー</a></li>
														
              
														<li class="subnav-item"><a class="" href="../aws/index.html#section=server-administration" data-proofer-ignore>インストーレーション</a></li>
														
              
														<li class="subnav-item"><a class="" href="../authentication/index.html#section=server-administration" data-proofer-ignore>認証</a></li>
														
              
														<li class="subnav-item"><a class="" href="../monitoring/index.html#section=server-administration" data-proofer-ignore>モニタリング</a></li>
														
              
														<li class="subnav-item"><a class="" href="../jvm-heap-size-configuration/index.html#section=server-administration" data-proofer-ignore>JVMヒープサイズの調整</a></li>
														
              
														<li class="subnav-item"><a class="" href="../nomad/index.html#section=server-administration" data-proofer-ignore>Nomad</a></li>
														
              
														<li class="subnav-item"><a class="" href="../backup/index.html#section=server-administration" data-proofer-ignore>バックアップ</a></li>
														
              
														<li class="subnav-item"><a class="" href="../troubleshooting/index.html#section=server-administration" data-proofer-ignore>トラブルシューティング</a></li>
														
              
														<li class="subnav-item"><a class="" href="../gpu/index.html#section=server-administration" data-proofer-ignore>GPUビルダー</a></li>
														
              
														<li class="subnav-item"><a class="" href="../vm-service/index.html#section=server-administration" data-proofer-ignore>VMサービスの設定</a></li>
														
              
														<li class="subnav-item"><a class="" href="../open-source/index.html#section=server-administration" data-proofer-ignore>Acknowledgments</a></li>
														
												</ul>
												
												
										</ul>
										
								</li>
						</ul>
						
    </div>
    <div class="lang-picker">
      <select id="sidebarLangSelect">
        <option value="en">English</option>
        <option value="ja">日本語</option>
      </select>
    </div>
		</nav>

  <script>
    // Add the current language to the window for auto setting the dropdown to current language.
    window.currentLang = "ja"
  </script>
</div>

		<div class="article-container docs" id="main">
			
			
			
			<article>
				<h1 id="circleci-を設定する">CircleCI を設定する</h1>
        
				<p>このページでは <code class="highlighter-rouge">config.yml</code> ファイル内で使える CircleCI 2.0 のコンフィグ用のキーについて解説しています。CircleCI と連携したリポジトリのブランチに <code class="highlighter-rouge">.circleci/config.yml</code> ファイルが含まれていれば、それは CircleCI 2.x の環境で利用することを意味します。</p>

<p><code class="highlighter-rouge">config.yml</code> ファイルの全容はこのページ内の<a href="#%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB%E3%82%B3%E3%83%BC%E3%83%89">サンプルコード</a>にありますので、参考にしてください。</p>

<p><strong>注 :</strong> CircleCI 1.0 から利用していたユーザーは、新たに <code class="highlighter-rouge">config.yml</code> ファイルを使うことで、以前とは異なるブランチで 2.x 環境におけるビルドを試すことができます。従来の <code class="highlighter-rouge">circle.yml</code> の設定内容は残るため、<code class="highlighter-rouge">.circleci/config.yml</code> のないブランチである CircleCI 1.0 環境の実行にも支障はありません。</p>

<hr>

<h2 class="no_toc" id="目次">目次</h2>

<ul id="markdown-toc">
  <li><a href="#version" id="markdown-toc-version"><strong><code class="highlighter-rouge">version</code></strong></a></li>
  <li><a href="#orbsversion21-%E3%81%8C%E5%BF%85%E9%A0%88" id="markdown-toc-orbsversion21-が必須"><strong><code class="highlighter-rouge">orbs</code></strong>（version：2.1 が必須）</a></li>
  <li><a href="#commandsversion21-%E3%81%8C%E5%BF%85%E9%A0%88" id="markdown-toc-commandsversion21-が必須"><strong><code class="highlighter-rouge">commands</code></strong>（version：2.1 が必須）</a></li>
  <li><a href="#executorsversion21-%E3%81%8C%E5%BF%85%E9%A0%88" id="markdown-toc-executorsversion21-が必須"><strong><code class="highlighter-rouge">executors</code></strong>（version：2.1 が必須）</a></li>
  <li>
<a href="#jobs" id="markdown-toc-jobs"><strong><code class="highlighter-rouge">jobs</code></strong></a>    <ul>
      <li>
<a href="#job_name" id="markdown-toc-job_name"><strong>&lt;<code class="highlighter-rouge">job_name</code>&gt;</strong></a>        <ul>
          <li><a href="#environment" id="markdown-toc-environment"><code class="highlighter-rouge">environment</code></a></li>
          <li><a href="#parallelism" id="markdown-toc-parallelism"><code class="highlighter-rouge">parallelism</code></a></li>
          <li><a href="#docker--machine--macosexecutor" id="markdown-toc-docker--machine--macosexecutor"><strong><code class="highlighter-rouge">docker</code></strong> / <strong><code class="highlighter-rouge">machine</code></strong> / <strong><code class="highlighter-rouge">macos</code></strong>（<em>Executor</em>）</a></li>
          <li><a href="#branches" id="markdown-toc-branches"><strong><code class="highlighter-rouge">branches</code></strong></a></li>
          <li><a href="#resource_class" id="markdown-toc-resource_class"><strong><code class="highlighter-rouge">resource_class</code></strong></a></li>
          <li>
<a href="#steps" id="markdown-toc-steps"><strong><code class="highlighter-rouge">steps</code></strong></a>            <ul>
              <li>
<a href="#run" id="markdown-toc-run"><strong><code class="highlighter-rouge">run</code></strong></a>                <ul>
                  <li><a href="#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3" id="markdown-toc-デフォルトのシェルオプション"><em>デフォルトのシェルオプション</em></a></li>
                  <li><a href="#background-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89" id="markdown-toc-background-コマンド"><em>background コマンド</em></a></li>
                  <li><a href="#%E7%B0%A1%E7%95%A5%E5%8C%96%E3%81%97%E3%81%9F%E6%A7%8B%E6%96%87" id="markdown-toc-簡略化した構文"><em>簡略化した構文</em></a></li>
                  <li><a href="#when-%E5%B1%9E%E6%80%A7" id="markdown-toc-when-属性"><code class="highlighter-rouge">when</code> 属性</a></li>
                  <li><a href="#%E4%BE%8B" id="markdown-toc-例">例</a></li>
                </ul>
              </li>
              <li>
<a href="#when-%E3%82%B9%E3%83%86%E3%83%83%E3%83%97version21-%E3%81%8C%E5%BF%85%E9%A0%88" id="markdown-toc-when-ステップversion21-が必須"><strong><code class="highlighter-rouge">when</code> ステップ</strong>（version：2.1 が必須）</a>                <ul>
                  <li><a href="#%E4%BE%8B-1" id="markdown-toc-例-1"><em>例</em></a></li>
                </ul>
              </li>
              <li><a href="#checkout" id="markdown-toc-checkout"><strong><code class="highlighter-rouge">checkout</code></strong></a></li>
              <li><a href="#setup_remote_docker" id="markdown-toc-setup_remote_docker"><strong><code class="highlighter-rouge">setup_remote_docker</code></strong></a></li>
              <li>
<a href="#save_cache" id="markdown-toc-save_cache"><strong><code class="highlighter-rouge">save_cache</code></strong></a>                <ul>
                  <li><a href="#%E4%BE%8B-2" id="markdown-toc-例-2"><em>例</em></a></li>
                </ul>
              </li>
              <li>
<a href="#restore_cache" id="markdown-toc-restore_cache"><strong><code class="highlighter-rouge">restore_cache</code></strong></a>                <ul>
                  <li><a href="#%E4%BE%8B-3" id="markdown-toc-例-3">例</a></li>
                </ul>
              </li>
              <li>
<a href="#deploy" id="markdown-toc-deploy"><strong><code class="highlighter-rouge">deploy</code></strong></a>                <ul>
                  <li><a href="#%E4%BE%8B-4" id="markdown-toc-例-4">例</a></li>
                </ul>
              </li>
              <li>
<a href="#store_artifacts" id="markdown-toc-store_artifacts"><strong><code class="highlighter-rouge">store_artifacts</code></strong></a>                <ul>
                  <li><a href="#%E4%BE%8B-5" id="markdown-toc-例-5">例</a></li>
                </ul>
              </li>
              <li>
<a href="#store_test_results" id="markdown-toc-store_test_results"><strong><code class="highlighter-rouge">store_test_results</code></strong></a>                <ul>
                  <li><a href="#%E4%BE%8B-6" id="markdown-toc-例-6"><em>例</em></a></li>
                </ul>
              </li>
              <li><a href="#persist_to_workspace" id="markdown-toc-persist_to_workspace"><strong><code class="highlighter-rouge">persist_to_workspace</code></strong></a></li>
              <li>
<a href="#root-%E3%82%AD%E3%83%BC%E3%81%AE%E4%BD%BF%E7%94%A8%E4%BE%8B" id="markdown-toc-root-キーの使用例"><em>root キーの使用例</em></a>                <ul>
                  <li><a href="#paths-%E3%82%AD%E3%83%BC%E3%81%AE%E4%BD%BF%E7%94%A8%E4%BE%8B" id="markdown-toc-paths-キーの使用例"><em>paths キーの使用例</em></a></li>
                </ul>
              </li>
              <li>
<a href="#attach_workspace" id="markdown-toc-attach_workspace"><strong><code class="highlighter-rouge">attach_workspace</code></strong></a>                <ul>
                  <li><a href="#%E4%BE%8B-7" id="markdown-toc-例-7"><em>例</em></a></li>
                </ul>
              </li>
              <li><a href="#add_ssh_keys" id="markdown-toc-add_ssh_keys"><strong><code class="highlighter-rouge">add_ssh_keys</code></strong></a></li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
<a href="#workflows" id="markdown-toc-workflows"><strong><code class="highlighter-rouge">workflows</code></strong></a>    <ul>
      <li><a href="#version-1" id="markdown-toc-version-1"><strong><code class="highlighter-rouge">version</code></strong></a></li>
      <li>
<a href="#workflow_name" id="markdown-toc-workflow_name"><strong>&lt;<code class="highlighter-rouge">workflow_name</code>&gt;</strong></a>        <ul>
          <li>
<a href="#triggers" id="markdown-toc-triggers"><strong><code class="highlighter-rouge">triggers</code></strong></a>            <ul>
              <li>
<a href="#schedule" id="markdown-toc-schedule"><strong><code class="highlighter-rouge">schedule</code></strong></a>                <ul>
                  <li><a href="#cron" id="markdown-toc-cron"><strong><code class="highlighter-rouge">cron</code></strong></a></li>
                  <li><a href="#filters" id="markdown-toc-filters"><strong><code class="highlighter-rouge">filters</code></strong></a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
<a href="#jobs-1" id="markdown-toc-jobs-1"><strong><code class="highlighter-rouge">jobs</code></strong></a>            <ul>
              <li>
<a href="#job_name-1" id="markdown-toc-job_name-1"><strong>&lt;<code class="highlighter-rouge">job_name</code>&gt;</strong></a>                <ul>
                  <li><a href="#requires" id="markdown-toc-requires"><strong><code class="highlighter-rouge">requires</code></strong></a></li>
                  <li><a href="#context" id="markdown-toc-context"><strong><code class="highlighter-rouge">context</code></strong></a></li>
                  <li><a href="#type" id="markdown-toc-type"><strong><code class="highlighter-rouge">type</code></strong></a></li>
                  <li><a href="#filters-1" id="markdown-toc-filters-1"><strong><code class="highlighter-rouge">filters</code></strong></a></li>
                  <li><a href="#%E4%BE%8B-8" id="markdown-toc-例-8"><em>例</em></a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<hr>

<h2 id="version"><strong><code class="highlighter-rouge">version</code></strong></h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>version</td>
      <td>○</td>
      <td>String</td>
      <td>
<code class="highlighter-rouge">2</code>、<code class="highlighter-rouge">2.0</code>、<code class="highlighter-rouge">2.1</code> のうちのどれかを指定します。<code class="highlighter-rouge">.circleci/config.yml</code> ファイルの単純化やコードの再利用、パラメーター付きジョブを実現する 2.1 の新しいキーの解説は「<a href="../reusing-config/index.html">コンフィグを再利用する</a>」を参照してください。</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">version</code> フィールドは、将来的に非推奨になった場合、もしくは大きな変更があった場合に警告するかどうかの判断に用いられます。</p>

<h2 id="orbsversion21-が必須">
<strong><code class="highlighter-rouge">orbs</code></strong>（version：2.1 が必須）</h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>orbs</td>
      <td>-</td>
      <td>Map</td>
      <td>ユーザー指定の名前によるマップです。Orb の参照名（文字列）または Orb の定義名（マップ）を指定します。Orb の定義はバージョン 2.1 のコンフィグにおけるサブセットです。詳細は「<a href="../creating-orbs/index.html">Orb を作成する</a>」を参照してください。</td>
    </tr>
    <tr>
      <td>executors</td>
      <td>-</td>
      <td>Map</td>
      <td>Executor の定義文字列のマップです。後述の <a href="index.html#executorsversion21-%E3%81%8C%E5%BF%85%E9%A0%88">executors</a> セクションも参照してください。</td>
    </tr>
    <tr>
      <td>commands</td>
      <td>-</td>
      <td>Map</td>
      <td>command を定義するコマンド名のマップです。下記 <a href="index.html#commandsversion21-%E3%81%8C%E5%BF%85%E9%A0%88">commands</a> のセクションを参照してください。</td>
    </tr>
  </tbody>
</table>

<p>以下の例は認証済みの名前空間 <code class="highlighter-rouge">circleci</code> 配下にある <code class="highlighter-rouge">hello-build</code> という Orb のものです。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: 2.1
orbs:
    hello: circleci/hello-build@0.0.5
workflows:
    "Hello Workflow":
        jobs:
          - hello/hello-build
</code></pre></div></div>
<p><code class="highlighter-rouge">circleci/hello-build@0.0.5</code> がそもそもの Orb の参照先ですが、この例では <code class="highlighter-rouge">hello</code> がその Orb の参照名となります。</p>

<h2 id="commandsversion21-が必須">
<strong><code class="highlighter-rouge">commands</code></strong>（version：2.1 が必須）</h2>

<p>commands は、ジョブ内で実行するステップシーケンスをマップとして定義します。これを活用することで、複数のジョブ間で <a href="../reusing-config/index.html">コマンド定義の再利用</a>が可能になります。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>steps</td>
      <td>○</td>
      <td>Sequence</td>
      <td>コマンド呼び出し元のジョブ内で実行するステップシーケンスです。</td>
    </tr>
    <tr>
      <td>parameters</td>
      <td>-</td>
      <td>Map</td>
      <td>パラメーターキーのマップです。詳細は「<a href="../reusing-config/index.html">コンフィグを再利用する</a>」内の「<a href="../reusing-config/index.html#%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%83%BC%E3%81%AE%E6%A7%8B%E6%96%87">パラメーター構文</a>」を参照してください。</td>
    </tr>
    <tr>
      <td>description</td>
      <td>-</td>
      <td>String</td>
      <td>コマンドの内容を説明する文章です。</td>
    </tr>
  </tbody>
</table>

<p>例：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">commands</span><span class="pi">:</span>
  <span class="na">sayhello</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">デモ用のごく簡単なコマンドです"</span>
    <span class="na">parameters</span><span class="pi">:</span>
      <span class="na">to</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Hello</span><span class="nv"> </span><span class="s">World"</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo &lt;&lt; parameters.to &gt;&gt;</span>
</code></pre></div></div>

<h2 id="executorsversion21-が必須">
<strong><code class="highlighter-rouge">executors</code></strong>（version：2.1 が必須）</h2>

<p>Executors は、ジョブステップの実行環境を定義するものです。executor を 1 つ定義するだけで複数のジョブで再利用できます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>docker</td>
      <td>○<sup>(1)</sup>
</td>
      <td>List</td>
      <td>docker executor を使用します。指定可能なオプションは<a href="#docker">こちら</a>。</td>
    </tr>
    <tr>
      <td>resource_class</td>
      <td>-</td>
      <td>String</td>
      <td>ジョブの各コンテナに割り当てる CPU の数とメモリ容量を指定します （<code class="highlighter-rouge">docker</code> Executor でのみ有効）。<strong>注 :</strong> この機能を利用するには有償アカウントが必要です。有償プランをお使いの方は<a href="https://support.circleci.com/hc/en-us/requests/new" target="_blank" rel="noopener noreferrer">サポートチケットを作成して</a>利用できるようリクエストしてください。</td>
    </tr>
    <tr>
      <td>machine</td>
      <td>○<sup>(1)</sup>
</td>
      <td>Map</td>
      <td>machine Executor を使用します。指定可能なオプションは<a href="#machine">こちら</a>。</td>
    </tr>
    <tr>
      <td>macos</td>
      <td>○<sup>(1)</sup>
</td>
      <td>Map</td>
      <td>macOS Executor を使用します。指定可能なオプションは<a href="#macos">こちら</a>。</td>
    </tr>
    <tr>
      <td>shell</td>
      <td>-</td>
      <td>String</td>
      <td>ステップ内のコマンド実行に用いるシェルです。ステップごとに使用する <code class="highlighter-rouge">shell</code> を変えることもできます（デフォルト：<a href="#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3">デフォルトのシェルオプション</a>を参照してください）。</td>
    </tr>
    <tr>
      <td>working_directory</td>
      <td>-</td>
      <td>String</td>
      <td>steps を実行する際のディレクトリを指定します。</td>
    </tr>
    <tr>
      <td>environment</td>
      <td>-</td>
      <td>Map</td>
      <td>環境変数の名前と値のマップです。</td>
    </tr>
  </tbody>
</table>

<p>例：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="m">2.1</span>
<span class="na">executors</span><span class="pi">:</span>
  <span class="na">my-executor</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">circleci/ruby:2.5.1-node-browsers</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">my-job</span><span class="pi">:</span>
    <span class="na">executor</span><span class="pi">:</span> <span class="s">my-executor</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo Executor の“外”で定義しました</span>
</code></pre></div></div>

<p>パラメーター付き Executor の例は「<a href="../reusing-config/index.html">コンフィグを再利用する</a>」の「<a href="../reusing-config/index.html#using-parameters-in-executors">Executor でパラメーターを使う</a>」をご覧ください。</p>

<h2 id="jobs"><strong><code class="highlighter-rouge">jobs</code></strong></h2>

<p>実行処理は 1 つ以上の名前の付いたジョブで構成され、それらのジョブの指定は <code class="highlighter-rouge">jobs</code> マップで行います。「<a href="../sample-config/index.html">config.yml のサンプル</a>」では <code class="highlighter-rouge">job</code> マップの 2 通りの例を紹介しています。マップにおけるキーがジョブの名前となり、値はジョブの中身を記述するマップとします。</p>

<p><a href="../workflows/index.html">Workflows</a> を利用する際は、<code class="highlighter-rouge">.circleci/config.yml</code> ファイル内でユニークなジョブ名を設定してください。</p>

<p>Workflows を <strong>使わない</strong> 場合は、<code class="highlighter-rouge">jobs</code> マップ内に <code class="highlighter-rouge">build</code> という名前のジョブを用意します。<code class="highlighter-rouge">build</code> ジョブは GitHub など VCS によるプッシュをトリガーとして実行する際のデフォルトのエントリーポイントとなります。あるいは、CircleCI API を利用して別のジョブを実行することも可能です。</p>

<p><strong>注 :</strong>
ジョブの実行可能時間は最大 5 時間となります。ジョブがタイムアウトするようなら、ジョブを並列処理させることも検討してください。</p>

<h3 id="job_name"><strong>&lt;<code class="highlighter-rouge">job_name</code>&gt;</strong></h3>

<p>1 つ 1 つのジョブはそれぞれ名前となるキーと、値となるマップからなります。ジョブの名前は現在ある <code class="highlighter-rouge">jobs</code> リスト内でユニークでなければなりません。値となるマップでは下記の属性を使用できます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>docker</td>
      <td>○<sup>(1)</sup>
</td>
      <td>List</td>
      <td>docker Executor を使います。指定可能なオプションは<a href="#docker">こちら</a>。</td>
    </tr>
    <tr>
      <td>machine</td>
      <td>○<sup>(1)</sup>
</td>
      <td>Map</td>
      <td>machine Executor を使います。指定可能なオプションは<a href="#machine">こちら</a>。</td>
    </tr>
    <tr>
      <td>macos</td>
      <td>○<sup>(1)</sup>
</td>
      <td>Map</td>
      <td>macOS Executor を使います。指定可能なオプションは<a href="#macos">こちら</a>。</td>
    </tr>
    <tr>
      <td>shell</td>
      <td>-</td>
      <td>String</td>
      <td>すべてのステップ内のコマンド実行に用いるシェルです。ステップごとに使用する <code class="highlighter-rouge">shell</code> を変えることも可能です（デフォルト：<a href="#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3">デフォルトのシェルオプション</a>を参照してください）。</td>
    </tr>
    <tr>
      <td>steps</td>
      <td>○</td>
      <td>List</td>
      <td>
<a href="#steps">実行内容</a>のリストを設定します。</td>
    </tr>
    <tr>
      <td>working_directory</td>
      <td>-</td>
      <td>String</td>
      <td>steps を実行する際のディレクトリを指定します。デフォルトは <code class="highlighter-rouge">~/project</code> となります（この <code class="highlighter-rouge">project</code> は文字列リテラルで、特定のプロジェクト名ではありません）。ジョブ内の実行プロセスは、このディレクトリを参照するために環境変数 <code class="highlighter-rouge">$CIRCLE_WORKING_DIRECTORY</code> を使えます。<strong>注 :</strong> YAML ファイルに記述したパスは展開 <em>されません</em>。仮に <code class="highlighter-rouge">store_test_results.path</code> が <code class="highlighter-rouge">$CIRCLE_WORKING_DIRECTORY/tests</code> と設定されていたとしても、CircleCI はそのまま <code class="highlighter-rouge">$CIRCLE_WORKING_DIRECTORY</code> という <code class="highlighter-rouge">$</code> 記号付きの文字列のディレクトリ内に、サブディレクトリ <code class="highlighter-rouge">test</code> を格納しようとします。</td>
    </tr>
    <tr>
      <td>parallelism</td>
      <td>–</td>
      <td>Integer</td>
      <td>このジョブの並列処理の数を指定します（デフォルト：1）。</td>
    </tr>
    <tr>
      <td>environment</td>
      <td>-</td>
      <td>Map</td>
      <td>環境変数の名前と値のマップを設定します。</td>
    </tr>
    <tr>
      <td>branches</td>
      <td>-</td>
      <td>Map</td>
      <td>Workflows でもバージョン 2.1 のコンフィグでも <strong>ない</strong> 単一のジョブにおいて、ホワイトリスト・ブラックリスト方式で特定のブランチの実行ルールを決めるためのマップを設定します（デフォルト：すべてホワイトリストとして扱います）。 Workflows やバージョン 2.1 のコンフィグにおけるジョブやブランチに関する設定については <a href="#workflows">Workflows</a> を参照してください。</td>
    </tr>
    <tr>
      <td>resource_class</td>
      <td>-</td>
      <td>String</td>
      <td>ジョブの各コンテナに割り当てる CPU の数とメモリ容量を指定します。（<code class="highlighter-rouge">docker</code> Executor でのみ有効）。<strong>注 :</strong> この機能を利用するには有償アカウントが必要です。 有償プランをお使いの方は<a href="https://support.circleci.com/hc/en-us/requests/new" target="_blank" rel="noopener noreferrer">サポートチケットを作成して</a>利用できるようリクエストしてください。</td>
    </tr>
  </tbody>
</table>

<p><sup>(1)</sup> 指定できるのはこれらのうちいずれか 1 つです。2 つ以上指定した場合はエラーとなります。</p>

<h4 id="environment"><code class="highlighter-rouge">environment</code></h4>
<p>環境変数の名前と値のマップです。CircleCI の設定画面でセットした環境変数を上書きするのに使えます。</p>

<h4 id="parallelism"><code class="highlighter-rouge">parallelism</code></h4>

<p><code class="highlighter-rouge">parallelism</code> の値を 2 以上に設定すると、Executor が設定した数だけ起動し、そのジョブのステップを並列実行します。ただし、並列処理するように設定していても 1 つの Executor でしか実行されない場合もあります（<a href="#deploy"><code class="highlighter-rouge">deploy</code> ステップ</a> がその一例です）。詳しくは<a href="../parallelism-faster-jobs/index.html">パラレルジョブ</a>を参照してください。</p>

<p><code class="highlighter-rouge">working_directory</code> で指定したディレクトリが存在しないときは自動で作成されます。</p>

<p>例：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">buildpack-deps:trusty</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">FOO</span><span class="pi">:</span> <span class="s">bar</span>
    <span class="na">parallelism</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">resource_class</span><span class="pi">:</span> <span class="s">large</span>
    <span class="na">working_directory</span><span class="pi">:</span> <span class="s">~/my-app</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="na">only</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">master</span>
        <span class="pi">-</span> <span class="s">/rc-.*/</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">make test</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">make</span>
</code></pre></div></div>

<h4 id="docker--machine--macosexecutor">
<strong><code class="highlighter-rouge">docker</code></strong> / <strong><code class="highlighter-rouge">machine</code></strong> / <strong><code class="highlighter-rouge">macos</code></strong>（<em>Executor</em>）</h4>

<p>「Executor」は、端的に言えば「ステップを処理する場所」です。CircleCI 2.0 では Executor として一度に必要な分の Docker コンテナを起動するか、仮想マシンを利用することで、最適な環境を構築できます。詳しくは「<a href="../executor-types/index.html">Executor タイプを選択する</a>」を参照してください。</p>

<h4 class="no_toc" id="docker"><code class="highlighter-rouge">docker</code></h4>

<p><code class="highlighter-rouge">docker</code> キーは下記の要素を用いて設定します。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>image</td>
      <td>○</td>
      <td>String</td>
      <td>使用するカスタム Docker イメージの名前を指定します。</td>
    </tr>
    <tr>
      <td>name</td>
      <td>-</td>
      <td>String</td>
      <td>他から参照する際のコンテナの名前を指定します。デフォルトではコンテナサービスには <code class="highlighter-rouge">localhost</code> 経由でアクセスできます。</td>
    </tr>
    <tr>
      <td>entrypoint</td>
      <td>-</td>
      <td>String / List</td>
      <td>コンテナ起動時に実行するコマンドを指定します。</td>
    </tr>
    <tr>
      <td>command</td>
      <td>-</td>
      <td>String / List</td>
      <td>コンテナ起動時にルートプロセスとなる PID 1（または entrypoint の引数）にするコマンドを指定します。</td>
    </tr>
    <tr>
      <td>user</td>
      <td>-</td>
      <td>String</td>
      <td>Docker コンテナにおいてコマンドを実行するユーザー名を指定します。</td>
    </tr>
    <tr>
      <td>environment</td>
      <td>-</td>
      <td>Map</td>
      <td>環境変数の名前と値のマップを設定します。</td>
    </tr>
    <tr>
      <td>auth</td>
      <td>-</td>
      <td>Map</td>
      <td>標準の <code class="highlighter-rouge">docker login</code> 証明書によるレジストリの認証情報を記述します。</td>
    </tr>
    <tr>
      <td>aws_auth</td>
      <td>-</td>
      <td>Map</td>
      <td>AWS EC2 Container Registry（ECR）の認証情報を記述します。</td>
    </tr>
  </tbody>
</table>

<p>一番最初に記述した <code class="highlighter-rouge">image</code> は、すべてのステップを実行するプライマリコンテナとなります。</p>

<p><code class="highlighter-rouge">entrypoint</code> は Dockerfile のデフォルトのエントリーポイントを上書きします。</p>

<p><code class="highlighter-rouge">command</code> は、（Dockerfile で指定していれば）イメージのエントリーポイントに対する引数として使われます。もしくは、（このスコープや Dockerfile 内にエントリーポイントがない場合は）実行形式として扱われます。</p>

<p><a href="../glossary/index.html#primary-container">プライマリコンテナ</a>（最初に宣言されたもの）において <code class="highlighter-rouge">command</code> の指定がない場合は、<code class="highlighter-rouge">command</code> とイメージエントリーポイントは無視されます。これは、エントリーポイントの実行可能ファイルがリソースを過大に消費したり、予期せず終了したりするのを防ぐためです。現在のところは、<code class="highlighter-rouge">steps</code> は常にプライマリコンテナ内でのみ実行されます。</p>

<p><code class="highlighter-rouge">name</code> では、セカンダリサービスコンテナにアクセスする際の名前を定義します。デフォルトはどのサービスも <code class="highlighter-rouge">localhost</code> 上で直接見える状態になっています。これは、例えば同じサービスのバージョン違いを複数立ち上げるときなど、localhost とは別のホスト名を使いたい場合に役立ちます。</p>

<p><code class="highlighter-rouge">environment</code> の設定は、初期化用の <code class="highlighter-rouge">command</code> も含め、この Executor におけるすべてのコマンド実行で有効です。<code class="highlighter-rouge">environment</code> による設定はジョブのマップにおいて何よりも優先されます。</p>

<p>タグやハッシュ値でイメージのバージョンを指定することもできます。公式の Docker レジストリ（デフォルトは Docker Hub）のパブリックイメージはどんなものでも自由に使えます。詳しくは「<a href="../executor-types/index.html">Executor タイプ</a>」を参照してください。</p>

<p>例：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">obs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">buildpack-deps:trusty</span> <span class="c1"># プライマリコンテナ</span>
        <span class="na">environment</span><span class="pi">:</span>
          <span class="na">ENV</span><span class="pi">:</span> <span class="s">CI</span>

      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">mongo:2.6.8</span>
        <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">--smallfiles</span><span class="pi">]</span>

      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">postgres:9.4.1</span>
        <span class="na">environment</span><span class="pi">:</span>
          <span class="na">POSTGRES_USER</span><span class="pi">:</span> <span class="s">root</span>

      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">redis@sha256:54057dd7e125ca41afe526a877e8bd35ec2cdd33b9217e022ed37bdcf7d09673</span>
</code></pre></div></div>

<p>プライベートな Docker イメージを利用するときは、<code class="highlighter-rouge">auth</code> を使ってユーザー名とパスワードを指定できます。パスワード保護を目的に、下記のようにプロジェクトの設定値としてセットしておくこともできます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">acme-private/private-image:321</span>
        <span class="na">auth</span><span class="pi">:</span>
          <span class="na">username</span><span class="pi">:</span> <span class="s">mydockerhub-user</span>  <span class="c1"># 文字列リテラル値を指定するか</span>
          <span class="na">password</span><span class="pi">:</span> <span class="s">$DOCKERHUB_PASSWORD</span>  <span class="c1"># プロジェクト設定の環境変数を指定する</span>
</code></pre></div></div>

<p><a href="https://aws.amazon.com/ecr/" target="_blank" rel="noopener noreferrer">AWS ECR</a> にホストしているイメージを使うには AWS 認証情報での認証が必要です。デフォルトでは CircleCI のプロジェクト設定画面にある「AWS Permissions」に追加した AWS 認証情報、またはプロジェクト環境変数 <code class="highlighter-rouge">AWS_ACCESS_KEY_ID</code> と <code class="highlighter-rouge">AWS_SECRET_ACCESS_KEY</code> を使います。下記のように <code class="highlighter-rouge">aws_auth</code> フィールドを用いて認証情報をセットすることも可能です。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jobs:
  build:
    docker:
      - image: account-id.dkr.ecr.us-east-1.amazonaws.com/org/repo:0.1
        aws_auth:
          aws_access_key_id: AKIAQWERVA  # 文字列リテラル値を指定するか
          aws_secret_access_key: $ECR_AWS_SECRET_ACCESS_KEY  # プロジェクト設定の環境変数を指定する
</code></pre></div></div>

<p>バージョン 2.1 のコンフィグでは、ジョブにおいて<a href="../reusing-config/index.html">宣言済みコマンド</a>の再利用が可能です。下記の例では <code class="highlighter-rouge">sayhello</code> コマンドを呼び出しています。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jobs:
  myjob:
    docker:
      - image: "circleci/node:9.6.1"
    steps:
      - sayhello:
          to: "Lev"
</code></pre></div></div>

<h4 class="no_toc" id="machine"><strong><code class="highlighter-rouge">machine</code></strong></h4>

<p><a href="../executor-types/index.html">machine Executor</a> は <code class="highlighter-rouge">machine</code> キーとともに下記の要素を用いて設定します。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>enabled</td>
      <td>-</td>
      <td>Boolean</td>
      <td>
<code class="highlighter-rouge">machine</code> Executor 使用時は必ず true とします。他に値の指定がないときは必須です。</td>
    </tr>
    <tr>
      <td>image</td>
      <td>–</td>
      <td>String</td>
      <td>使用するイメージを指定します（デフォルト：<code class="highlighter-rouge">circleci/classic:latest</code>）。<strong>注 :</strong> プライベート環境の CircleCI はこのキーをサポートして <strong>いません</strong>。プライベート環境における <code class="highlighter-rouge">machine</code> Executor のイメージカスタマイズに関する詳細は、「<a href="../vm-service/index.html">VM サービス</a>」を参照してください。</td>
    </tr>
    <tr>
      <td>docker_layer_caching</td>
      <td>-</td>
      <td>Boolean</td>
      <td>
<a href="../docker-layer-caching/index.html">Docker レイヤーキャッシュ</a>を有効にするには <code class="highlighter-rouge">true</code> とします。<strong>注 :</strong> Docker レイヤーキャッシュの利用には追加の料金がかかります。この機能を有効にするには、サポートチケットを使って CircleCI のセールスチームに問い合わせてください。</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">machine</code> キーに <code class="highlighter-rouge">true</code> をセットする際には、より簡単な記述方法が使えます。</p>

<p>例：</p>

<pre><code class="language-YAML">jobs:
  build:
    machine:
      enabled: true

# もしくは単に以下のようにします

jobs:
  build:
    machine: true
</code></pre>

<p>CircleCI は <code class="highlighter-rouge">image</code> フィールドにおいて複数の machine イメージの指定をサポートしています。</p>

<ul>
  <li>
<code class="highlighter-rouge">circleci/classic:latest</code>（デフォルト）：Docker v<code class="highlighter-rouge">17.09.0-ce</code> と docker-compose v<code class="highlighter-rouge">1.14.0</code>、それと CircleCI 1.0 のビルドイメージに含まれる共通言語ツールを含んだ Ubuntu v<code class="highlighter-rouge">14.04</code> のイメージです。<code class="highlighter-rouge">latest</code> イメージに更新があるときは 1 週間前までに<a href="https://discuss.circleci.com/t/how-to-subscribe-to-announcements-and-notifications-from-circleci-email-rss-json/5616" target="_blank" rel="noopener noreferrer">アナウンス</a>されます。</li>
  <li>
<code class="highlighter-rouge">circleci/classic:edge</code> – Docker v<code class="highlighter-rouge">17.10.0-ce</code> と docker-compose v<code class="highlighter-rouge">1.16.1</code>、それと CircleCI 1.0 のビルドイメージに含まれる共通言語ツールを含んだ Ubuntu v<code class="highlighter-rouge">14.04</code> のイメージです。</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201703-01</code> – docker 17.03.0-ce, docker-compose 1.9.0</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201707-01</code> – docker 17.06.0-ce, docker-compose 1.14.0</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201708-01</code> – docker 17.06.1-ce, docker-compose 1.14.0</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201709-01</code> – docker 17.07.0-ce, docker-compose 1.14.0</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201710-01</code> – docker 17.09.0-ce, docker-compose 1.14.0</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201710-02</code> – docker 17.10.0-ce, docker-compose 1.16.1</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201711-01</code> – docker 17.11.0-ce, docker-compose 1.17.1</li>
  <li>
<code class="highlighter-rouge">circleci/classic:201808-01</code> – docker 18.06.0-ce, docker-compose 1.22.0</li>
  <li>
<code class="highlighter-rouge">ubuntu-1604:201903-01</code> – Ubuntu 16.04, docker 18.09.3, docker-compose 1.23.1</li>
</ul>

<p><strong>例 :</strong> Docker v<code class="highlighter-rouge">17.06.1-ce</code> と docker-compose v<code class="highlighter-rouge">1.14.0</code> を含む Ubuntu v<code class="highlighter-rouge">14.04</code> のイメージを使う場合</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="m">2</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">machine</span><span class="pi">:</span>
      <span class="na">image</span><span class="pi">:</span> <span class="s">circleci/classic:201708-01</span>
</code></pre></div></div>

<p>machine Executor は、ジョブや Workflows で Docker イメージをビルドする際に効果的な <a href="../docker-layer-caching/index.html">Docker レイヤーキャッシュ</a>をサポートしています。</p>

<p><strong>例 :</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="m">2</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">machine</span><span class="pi">:</span>
      <span class="na">docker_layer_caching</span><span class="pi">:</span> <span class="no">true</span>    <span class="c1"># デフォルト：false</span>
</code></pre></div></div>

<h4 class="no_toc" id="macos"><strong><code class="highlighter-rouge">macos</code></strong></h4>

<p>CircleCI は <a href="https://developer.apple.com/macos/" target="_blank" rel="noopener noreferrer">macOS</a> 上でのジョブ実行をサポートしています。macOS アプリケーションや <a href="https://developer.apple.com/ios/" target="_blank" rel="noopener noreferrer">iOS</a> アプリ、<a href="https://developer.apple.com/tvos/" target="_blank" rel="noopener noreferrer">tvOS</a> アプリ、さらには <a href="https://developer.apple.com/watchos/" target="_blank" rel="noopener noreferrer">watchOS</a> アプリのビルド、テスト、デプロイが可能です。macOS 仮想マシン上でジョブを実行するには、ジョブ設定の最上位に <code class="highlighter-rouge">macos</code> キーを追加し、使いたい Xcode のバージョンを指定します。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>xcode</td>
      <td>○</td>
      <td>String</td>
      <td>仮想マシンにインストールしている Xcode のバージョンを指定します。利用可能なバージョンについては「iOS アプリをテストする」の「<a href="../testing-ios/index.html#%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B-xcode-%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3">サポートしている Xcode のバージョン</a>」を参照してください。</td>
    </tr>
  </tbody>
</table>

<p><strong>例 :</strong> macOS 仮想マシンを Xcode v<code class="highlighter-rouge">9.0</code> で使う場合</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">macos</span><span class="pi">:</span>
      <span class="na">xcode</span><span class="pi">:</span> <span class="s2">"</span><span class="s">9.0"</span>
</code></pre></div></div>

<h4 id="branches"><strong><code class="highlighter-rouge">branches</code></strong></h4>

<p>Workflows を利用 <strong>せず</strong>、バージョン 2.0（2.1 ではなく）のコンフィグを使っているケースでは、ブランチの実行をホワイトリスト・ブラックリスト方式で定義できます。<a href="../workflows/index.html#workflows-%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%82%B3%E3%83%B3%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9">Workflows</a> を使っている場合はジョブレベルの branches は無視されるため、利用する <code class="highlighter-rouge">config.yml</code> ファイルの Workflows セクション内で設定します。バージョン 2.1 のコンフィグでは、Workflows を追加することでフィルタリングが可能です。詳しくは後述の <a href="#workflows">workflows</a> を参照してください。ジョブレベルの <code class="highlighter-rouge">branches</code> キーは下記の要素を用いて設定します。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>only</td>
      <td>-</td>
      <td>List</td>
      <td>実行するブランチのみを列挙します。</td>
    </tr>
    <tr>
      <td>ignore</td>
      <td>-</td>
      <td>List</td>
      <td>実行しないブランチを列挙します。</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">only</code> や <code class="highlighter-rouge">ignore</code> に記述する内容は、完全一致のフルネームおよび正規表現で表すことができます。正規表現では文字列 <strong>全体</strong> にマッチさせる形にしなければなりません。例えば下記のようにします。</p>

<pre><code class="language-YAML">jobs:
  build:
    branches:
      only:
        - master
        - /rc-.*/
</code></pre>

<p>このケースでは「master」ブランチと正規表現 “rc-.*” にマッチするブランチのみが実行されます。</p>

<pre><code class="language-YAML">jobs:
  build:
    branches:
      ignore:
        - develop
        - /feature-.*/
</code></pre>

<p>上記の例では “develop” と正規表現 “feature-.*” にマッチしたもの以外のすべてのブランチが実行されます。</p>

<p><code class="highlighter-rouge">ignore</code> と <code class="highlighter-rouge">only</code> の両方が同時に指定されていた場合は、<code class="highlighter-rouge">ignore</code> に関するフィルターのみが考慮されます。</p>

<p>コンフィグのルール設定によって実行されなかったジョブは、実行がスキップされたとして CircleCI の画面上に履歴表示されます。</p>

<h4 id="resource_class"><strong><code class="highlighter-rouge">resource_class</code></strong></h4>

<p><strong>注 :</strong> この機能を有効にするには、<a href="https://support.circleci.com/hc/en-us/requests/new" target="_blank" rel="noopener noreferrer">サポートチケットを使って</a> CircleCI のセールスチームに問い合わせてください。</p>

<p>お使いの有償プランにこの機能が追加されると、ジョブごとに CPUの数 とメモリ容量を設定できるようになります。利用可能なマシンリソースは下記の表の通りです。<code class="highlighter-rouge">resource_class</code> を指定しない場合、もしくは指定した class が正しくないときは、デフォルトの <code class="highlighter-rouge">resource_class: medium</code> が指定されたものとみなされます。<code class="highlighter-rouge">resource_class</code> キーは現在のところ <code class="highlighter-rouge">docker</code> Executor との組み合わせのみサポートしています。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>クラス</th>
      <th>仮想CPU数</th>
      <th>メモリ容量</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>small</td>
      <td>1</td>
      <td>2GB</td>
    </tr>
    <tr>
      <td>medium（デフォルト）</td>
      <td>2</td>
      <td>4GB</td>
    </tr>
    <tr>
      <td>medium+</td>
      <td>3</td>
      <td>6GB</td>
    </tr>
    <tr>
      <td>large</td>
      <td>4</td>
      <td>8GB</td>
    </tr>
    <tr>
      <td>xlarge</td>
      <td>8</td>
      <td>16GB</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">/proc</code> ディレクトリをチェックして CPU 数を取得する Java や Erlang などの言語においては、CircleCI 2.0 の resource_class 機能の使用時にパフォーマンスが低下する問題があることから、これを回避するため追加の設定が必要になる場合があります。 この問題は使用する CPU コアを 32 個要求したときに発生するもので、1 コアをリクエストしたときよりも実行速度が低下します。 該当する言語を使用しているユーザーは、問題が起こらないよう CPU コア数を決まった範囲に固定するなどして対処してください。</p>

<h4 id="steps"><strong><code class="highlighter-rouge">steps</code></strong></h4>

<p>ジョブにおける <code class="highlighter-rouge">steps</code> の設定は、キーと値のペアを 1 つずつ列挙する形で行います。キーはステップのタイプを表し、値は設定内容を記述するマップか文字列（ステップのタイプによって異なる）のどちらかになります。 下記はマップを記述する場合の例です。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">working_directory</span><span class="pi">:</span> <span class="s">~/canary-python</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">FOO</span><span class="pi">:</span> <span class="s">bar</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Running tests</span>
          <span class="na">command</span><span class="pi">:</span> <span class="s">make test</span>
</code></pre></div></div>

<p>ここでは <code class="highlighter-rouge">run</code> がステップのタイプとなります。 <code class="highlighter-rouge">name</code> 属性は CircleCI 上での表示に使われるものです。<code class="highlighter-rouge">command</code> 属性は <code class="highlighter-rouge">run</code> ステップに特有の、実行するコマンドを定義するものです。</p>

<p>場合によっては steps をより簡便に記述できます。例えば <code class="highlighter-rouge">run</code> ステップを下記のように記述することが可能です。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jobs:
  build:
    steps:
      - run: make test
</code></pre></div></div>

<p>簡略化した表記方法では、実行する <code class="highlighter-rouge">command</code> を文字列値のようにして、<code class="highlighter-rouge">run</code> ステップをダイレクトに指定できるようになります。このとき、省略された他の属性に対してはデフォルトの値が自動で設定されます（例えば <code class="highlighter-rouge">name</code> 属性には <code class="highlighter-rouge">command</code> と同じ値が設定されます）。</p>

<p>もう 1 つ、キーと値のペアの代わりにステップ名を文字列として使うシンプルな方法もあります。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jobs:
  build:
    steps:
      - checkout
</code></pre></div></div>

<p>この例の <code class="highlighter-rouge">checkout</code> ステップは、プロジェクトのソースコードをジョブの <a href="#jobs"><code class="highlighter-rouge">working_directory</code></a> にチェックアウトします。</p>

<p>通常、ステップは下記にある通りに記述します。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>&lt;step_type&gt;</td>
      <td>○</td>
      <td>Map / String</td>
      <td>ステップの設定マップ、またはステップで定義された内容を表す文字列を設定します。</td>
    </tr>
  </tbody>
</table>

<p>ステップのなかで利用可能な要素の詳細は下記の通りです。</p>

<h5 id="run"><strong><code class="highlighter-rouge">run</code></strong></h5>

<p>あらゆるコマンドラインプログラムを呼び出すのに使います。設定値を表すマップを記述するか、簡略化した表記方法では、<code class="highlighter-rouge">command</code> や <code class="highlighter-rouge">name</code> として扱われる文字列を記述します。run コマンドはデフォルトでは非ログインシェルで実行されます。そのため、いわゆる dotfiles をコマンド内で明示的に指定するといった工夫が必要になります。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>command</td>
      <td>○</td>
      <td>String</td>
      <td>シェルを通じて実行するコマンドを指定します。</td>
    </tr>
    <tr>
      <td>name</td>
      <td>-</td>
      <td>String</td>
      <td>CircleCI 上で表示するステップのタイトル名を指定します（デフォルト：<code class="highlighter-rouge">command</code> 文字列全体)。</td>
    </tr>
    <tr>
      <td>shell</td>
      <td>-</td>
      <td>String</td>
      <td>コマンド実行に用いるシェルを指定します（デフォルト：<a href="#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%AE%E3%82%B7%E3%82%A7%E3%83%AB%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3">デフォルトのシェルオプション</a>）。</td>
    </tr>
    <tr>
      <td>environment</td>
      <td>-</td>
      <td>Map</td>
      <td>コマンドへのローカルスコープとなる追加の環境変数を設定します。</td>
    </tr>
    <tr>
      <td>background</td>
      <td>-</td>
      <td>Boolean</td>
      <td>このステップをバックグラウンドで実行するかどうかを設定します（デフォルト：false）。</td>
    </tr>
    <tr>
      <td>working_directory</td>
      <td>-</td>
      <td>String</td>
      <td>このステップを実行するディレクトリを指定します（デフォルト：当該ジョブの<a href="#jobs"><code class="highlighter-rouge">working_directory</code></a>）。</td>
    </tr>
    <tr>
      <td>no_output_timeout</td>
      <td>-</td>
      <td>String</td>
      <td>出力のないコマンドの実行持続可能時間を指定します。「20m」「1.25h」「5s」のように、時間単位付きの十進数で指定します（デフォルト：10分間）。</td>
    </tr>
    <tr>
      <td>when</td>
      <td>-</td>
      <td>String</td>
      <td>
<a href="#when-%E5%B1%9E%E6%80%A7">ステップの実行を有効・無効にする条件を指定します</a>。次の値のうちいずれかを指定してください。<code class="highlighter-rouge">always</code>/<code class="highlighter-rouge">on_success</code>/<code class="highlighter-rouge">on_fail</code>（デフォルト：<code class="highlighter-rouge">on_success</code>）</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">run</code> を宣言するたびに新たなシェルが立ち上がることになります。複数行の <code class="highlighter-rouge">command</code> を指定し、それらを同一のシェル内で実行することも可能です。</p>

<pre><code class="language-YAML">- run:
    command: |
      echo Running test
      mkdir -p /tmp/test-results
      make test
</code></pre>

<h6 id="デフォルトのシェルオプション"><em>デフォルトのシェルオプション</em></h6>

<p>ビルドコンテナに <code class="highlighter-rouge">/bin/bash</code> がある場合、シェルオプションのデフォルト値は <code class="highlighter-rouge">/bin/bash -eo pipefail</code> となります。それ以外のパターンでは <code class="highlighter-rouge">/bin/sh -eo pipefail</code> がデフォルト値となります。 デフォルトは非ログインシェルです（<code class="highlighter-rouge">--login</code> や <code class="highlighter-rouge">-l</code> はデフォルトでは付加されません）。そのため、デフォルトのシェルは <code class="highlighter-rouge">~/.bash_profile</code> や <code class="highlighter-rouge">~/.bash_login</code>、<code class="highlighter-rouge">~/.profile</code> といったファイルを読み込み <strong>ません</strong>。<code class="highlighter-rouge">-eo pipefail</code> というオプションの意味については下記の通りです。</p>

<p><code class="highlighter-rouge">-e</code></p>

<blockquote>
  <p>（単一のコマンドからなる）パイプやカッコ「()」で囲まれたサブシェルコマンドが実行されたら、あるいは中カッコ「{}」で囲まれたコマンドリストの一部がゼロ以外の終了ステータスを返したら、即座に終了します。</p>
</blockquote>

<p>つまり、先述の例で <code class="highlighter-rouge">mkdir</code> によるディレクトリ作成が失敗し、ゼロ以外の終了ステータスを返したときは、コマンドの実行は中断され、ステップ全体としては失敗として扱われることになります。それとは反対の挙動にしたいときは、<code class="highlighter-rouge">command</code> に <code class="highlighter-rouge">set +e</code> を追加するか、<code class="highlighter-rouge">run</code> のコンフィグマップでデフォルトの <code class="highlighter-rouge">shell</code> を上書きします。例えば下記のようにします。</p>
<pre><code class="language-YAML">- run:
    command: |
      echo Running test
      set +e
      mkdir -p /tmp/test-results
      make test

- run:
    shell: /bin/sh
    command: |
      echo Running test
      mkdir -p /tmp/test-results
      make test
</code></pre>

<p><code class="highlighter-rouge">-o pipefail</code></p>

<blockquote>
  <p>pipefail を有効にした場合は、パイプの返り値は最後に実行されたコマンド（通常は最も右に記述したもの）のゼロ以外の終了ステータス値となります。全てのコマンドが成功したときはゼロが返ります。シェルは値を返す前に、パイプにある全てのコマンドが終了するまで待機します。</p>
</blockquote>

<p>例えば下記のようにします。</p>
<pre><code class="language-YAML">- run: make test | tee test-output.log
</code></pre>

<p>ここで仮に <code class="highlighter-rouge">make test</code> が失敗したとすると、<code class="highlighter-rouge">-o pipefail</code> オプションによりステップ全体が失敗したことになります。<code class="highlighter-rouge">-o pipefail</code> がなければ、このステップは常に成功することになります。パイプ全体の結果としては、必ずゼロを返す最後のコマンド（<code class="highlighter-rouge">tee test-output.log</code>）の返り値で決まるためです。</p>

<p><code class="highlighter-rouge">make test</code> が失敗したとしても、パイプの残りの部分が実行されることに注意してください。</p>

<p>このような動作を避けたい場合は、コマンドで <code class="highlighter-rouge">set +o pipefail</code> を指定するか、<code class="highlighter-rouge">shell</code> 全体を（最初の例のように）書き換えてください。</p>

<p>通常はデフォルトのオプション（<code class="highlighter-rouge">-eo pipefail</code>）を使うことを推奨しています。こうすることで、途中のコマンドでエラーがあっても気付くことができ、ジョブが失敗したときのデバッグも容易になります。CircleCI 上では <code class="highlighter-rouge">run</code> ステップごとに使用したシェルとアクティブなオプションを表示する便利な機能もあります。</p>

<p>詳細は「<a href="../using-shell-scripts/index.html">シェルスクリプトを使う</a>」を参照してください。</p>

<h6 id="background-コマンド"><em>background コマンド</em></h6>

<p><code class="highlighter-rouge">background</code> 属性はコマンドをバックグラウンドで実行するように設定するものです。<code class="highlighter-rouge">background</code> 属性を <code class="highlighter-rouge">true</code> にセットすることで、ジョブ実行においてコマンドの終了を待つことなく、即座に次のステップへと処理を移します。下記の例は Selenium のテスト時によく必要となる、バックグラウンドで X virtual framebuffer を実行するためのコンフィグです。</p>

<pre><code class="language-YAML">- run:
    name: Running X virtual framebuffer
    command: Xvfb :99 -screen 0 1280x1024x24
    background: true

- run: make test
</code></pre>

<h6 id="簡略化した構文"><em>簡略化した構文</em></h6>

<p><code class="highlighter-rouge">run</code> ステップでは大変便利な簡略化構文を利用できます。</p>

<pre><code class="language-YAML">- run: make test

# 簡略化したうえで複数行のコマンドを実行
- run: |
    mkdir -p /tmp/test-results
    make test
</code></pre>
<p>この例では、<code class="highlighter-rouge">command</code> と <code class="highlighter-rouge">name</code> には <code class="highlighter-rouge">run</code> の文字列値が割り当てられたのと同等となり、<code class="highlighter-rouge">run</code> におけるコンフィグマップの残りにはデフォルト値が設定されます。</p>

<h6 id="when-属性">
<code class="highlighter-rouge">when</code> 属性</h6>

<p>デフォルトでは、CircleCI は <code class="highlighter-rouge">config.yml</code> で定義された順序通り、ステップが失敗するまで（ゼロ以外の終了コードを返すまで）ジョブステップを 1 つずつ実行します。コマンドが失敗すると、それ以降のジョブステップは実行されません。</p>

<p><code class="highlighter-rouge">when</code> 属性を追加することで、このデフォルトのジョブステップの挙動を変えることができます。ジョブのステータスに応じてステップを続行するか、スキップするかを選択することも可能になります。</p>

<p>デフォルト値である <code class="highlighter-rouge">on_success</code> は、それまでのステップが全て成功している（終了コード 0 を返した）ときのみ処理を続けます。</p>

<p><code class="highlighter-rouge">always</code> はそれまでのステップの終了ステータスにかかわらず処理を続けます。前のステップが成功したか否かに関係なく処理を続けたいタスクがあるときに役立つ設定です。例えば、ログやコードカバレッジのデータをどこかのサーバーにアップロードするようなジョブ
ステップに利用できます。</p>

<p><code class="highlighter-rouge">on_fail</code> は直前のステップが失敗した（ゼロ以外の終了コードを返した）ときにのみ処理を続行するものです。デバッグを支援するなんらかの診断データを保存したいとき、あるいはメールやチャットなどで失敗に関する通知をしたいときなどに <code class="highlighter-rouge">on_fail</code> が使えます。</p>

<h6 id="例">例</h6>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">steps</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">Testing application</span>
      <span class="na">command</span><span class="pi">:</span> <span class="s">make test</span>
      <span class="na">shell</span><span class="pi">:</span> <span class="s">/bin/bash</span>
      <span class="na">working_directory</span><span class="pi">:</span> <span class="s">~/my-app</span>
      <span class="na">no_output_timeout</span><span class="pi">:</span> <span class="s">30m</span>
      <span class="na">environment</span><span class="pi">:</span>
        <span class="na">FOO</span><span class="pi">:</span> <span class="s">bar</span>

  <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="s">echo 127.0.0.1 devhost | sudo tee -a /etc/hosts</span>

  <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
      <span class="s">sudo -u root createuser -h localhost --superuser ubuntu &amp;&amp;</span>
      <span class="s">sudo createdb -h localhost test_db</span>

  <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">Upload Failed Tests</span>
      <span class="na">command</span><span class="pi">:</span> <span class="s">curl --data fail_tests.log http://example.com/error_logs</span>
      <span class="na">when</span><span class="pi">:</span> <span class="s">on_fail</span>
</code></pre></div></div>

<h5 id="when-ステップversion21-が必須">
<strong><code class="highlighter-rouge">when</code> ステップ</strong>（version：2.1 が必須）</h5>

<p><code class="highlighter-rouge">when</code> キーや <code class="highlighter-rouge">unless</code> キーを使うことで条件付きのステップを作ることができます。<code class="highlighter-rouge">when</code> キー配下ではサブキーとして <code class="highlighter-rouge">condition</code> と <code class="highlighter-rouge">steps</code> が使えます。<code class="highlighter-rouge">when</code> ステップの用途として考えられるのは、事前に Workflows を実行して確認した（コンパイルの時点で決定される）条件に基づいて実行するために、コマンドとジョブの設定をカスタマイズする、といったものです。詳細は「コンフィグを再利用する」の<a href="../reusing-config/index.html#%E6%9D%A1%E4%BB%B6%E4%BB%98%E3%81%8D%E3%82%B9%E3%83%86%E3%83%83%E3%83%97%E3%81%AE%E5%AE%9A%E7%BE%A9">「条件付きステップ」</a>を参照してください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>condition</td>
      <td>○</td>
      <td>String</td>
      <td>パラメーター値を指定します。</td>
    </tr>
    <tr>
      <td>steps</td>
      <td>○</td>
      <td>Sequence</td>
      <td>condition が true の時に実行するステップの内容を設定します。</td>
    </tr>
  </tbody>
</table>

<h6 id="例-1"><em>例</em></h6>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: 2.1

jobs: # 条件付きステップは「commands:」でも定義できる
  job_with_optional_custom_checkout:
    parameters:
      custom_checkout:
        type: string
        default: ""
    machine: true
    steps:
      - when:
          condition: &lt;&lt;parameters.custom_checkout&gt;&gt;
          steps:
            - run: echo "独自のチェックアウト処理"
      - unless:
          condition: &lt;&lt;parameters.custom_checkout&gt;&gt;
          steps:
            - checkout
workflows:
  build-test-deploy:
    jobs:
      - job_with_optional_custom_checkout:
          custom_checkout: "空文字列でなければ正常に終了"
      - job_with_optional_custom_checkout
</code></pre></div></div>

<h5 id="checkout"><strong><code class="highlighter-rouge">checkout</code></strong></h5>

<p>設定済み <code class="highlighter-rouge">path</code>（デフォルトは <code class="highlighter-rouge">working_directory</code>）にあるソースコードのチェックアウトに用いる特殊なステップです。コードのチェックアウトを簡単にすることを目的にしたヘルパー関数である、というのが特殊としている理由です。HTTPS 経由で git を実行する場合はこのステップは使えません。ssh 経由でチェックアウトするのと同じ設定を行う必要があります。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>path</td>
      <td>-</td>
      <td>String</td>
      <td>チェックアウトディレクトリを指定します（デフォルト：ジョブの <a href="#jobs"><code class="highlighter-rouge">working_directory</code></a>）。</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">path</code> が存在し、かつソースコードが git リポジトリの場合：</p>
<ul>
  <li>ステップはリポジトリ全体をクローンせず、オリジナルをプルします。</li>
  <li>同様の条件で git リポジトリ以外の場合は、このステップは失敗します。</li>
</ul>

<p>単純に <code class="highlighter-rouge">checkout</code> する場合は、ステップタイプは属性なしで文字列を記述するだけです。</p>

<pre><code class="language-YAML">- checkout
</code></pre>

<p><strong>注 :</strong> CircleCI はサブモジュールのチェックアウトは行いません。そのプロジェクトにサブモジュールが必要なときは、下記の例のように適切なコマンドを実行する <code class="highlighter-rouge">run</code> ステップを追加してください。</p>

<pre><code class="language-YAML">- checkout
- run: git submodule sync
- run: git submodule update --init
</code></pre>

<p><strong>注 :</strong> <code class="highlighter-rouge">checkout</code> ステップは git がガベージコレクションをスキップするように設定します。<a href="#restore_cache">restore_cache</a> キーで <code class="highlighter-rouge">.git</code> ディレクトリをキャッシュしていて、そのディレクトリ配下のデータ量を最小限にするのにガベージコレクションも実行したい場合は、先に <a href="#run">run</a> ステップで <code class="highlighter-rouge">git gc</code> コマンドを実行しておく方法があります。</p>

<h5 id="setup_remote_docker"><strong><code class="highlighter-rouge">setup_remote_docker</code></strong></h5>

<p>Docker コマンド実行用のリモート Docker 環境を作成します。詳細は「<a href="../building-docker-images/index.html">Docker コマンドを実行する</a>」を参照してください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>docker_layer_caching</td>
      <td>-</td>
      <td>boolean</td>
      <td>リモート Docker 環境で <a href="../docker-layer-caching/index.html">Docker レイヤーキャッシュ</a> を有効にするには、この値を <code class="highlighter-rouge">true</code> にセットします（デフォルト：<code class="highlighter-rouge">false</code>）。</td>
    </tr>
  </tbody>
</table>

<p><strong><em>補足</em></strong></p>
<ul>
  <li>Docker レイヤーキャッシュを利用するには有償アカウントが必要です。有償プランをお使いの方は<a href="https://support.circleci.com/hc/en-us/requests/new" target="_blank" rel="noopener noreferrer">サポートチケットを作成して</a>利用できるようリクエストしてください。リクエストの際には該当するプロジェクトへのリンクもお送りください。</li>
  <li>
<code class="highlighter-rouge">setup_remote_docker</code> は <code class="highlighter-rouge">machine</code> Executor との互換性がありません。<code class="highlighter-rouge">machine</code> Executor における Docker レイヤーキャッシングの方法について、詳細は「Docker レイヤーキャッシング」の「<a href="../docker-layer-caching/index.html#machine-executor">Machine Executor</a>」を参照してください。</li>
</ul>

<h5 id="save_cache"><strong><code class="highlighter-rouge">save_cache</code></strong></h5>

<p>CircleCI のオブジェクトストレージにある、依存関係やソースコードのようなファイル、ディレクトリのキャッシュを生成し、保存します。キャッシュはその後のジョブで<a href="#restore_cache">復元</a>することができます。詳しくは「<a href="../caching/index.html">依存関係のキャッシュ</a>」をご覧ください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>paths</td>
      <td>○</td>
      <td>List</td>
      <td>キャッシュに追加するディレクトリのリストを指定します。</td>
    </tr>
    <tr>
      <td>key</td>
      <td>○</td>
      <td>String</td>
      <td>キャッシュ識別用のユニーク ID を指定します。</td>
    </tr>
    <tr>
      <td>name</td>
      <td>-</td>
      <td>String</td>
      <td>CircleCI の画面上にタイトル表示するステップの名前を指定します（デフォルト：Saving Cache）。</td>
    </tr>
    <tr>
      <td>when</td>
      <td>-</td>
      <td>String</td>
      <td>ステップの実行を有効・無効にする<a href="#when-%E5%B1%9E%E6%80%A7">条件</a>を指定します。次の値のうちいずれかを指定してください。<code class="highlighter-rouge">always</code>/<code class="highlighter-rouge">on_success</code>/<code class="highlighter-rouge">on_fail</code>（デフォルト：<code class="highlighter-rouge">on_success</code>）</td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">key</code> で割り当てたキャッシュは、一度書き込むと書き換えられません。</p>

<p><strong>注 :</strong> <code class="highlighter-rouge">key</code> で指定されたキャッシュがすでに存在していると、書き換えられないまま次のジョブステップの処理に移ります。</p>

<p>キャッシュを新たに保存するときは、特殊なテンプレートを含む形で <code class="highlighter-rouge">key</code> の値を指定することも可能です。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>テンプレート</th>
      <th>解説</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">{{ .Branch }}</code></td>
      <td>現在ビルドを実行しているバージョン管理システムのブランチ名。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">{{ .BuildNum }}</code></td>
      <td>実行中のビルドにおける CircleCI のビルド番号。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">{{ .Revision }}</code></td>
      <td>現在ビルドを実行しているバージョン管理システムのリビジョン。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">{{ .CheckoutKey }}</code></td>
      <td>リポジトリのチェックアウトに使用する SSH 鍵。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">{{ .Environment.variableName }}</code></td>
      <td>
<code class="highlighter-rouge">variableName</code>で示される環境変数 (<a href="../env-vars/index.html#circleci-environment-variable-descriptions">定義済み環境変数</a> 、もしくは<a href="../contexts/index.html">コンテキスト</a>を指定できますが、ユーザー定義の環境変数は使えません)。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">{{ checksum "filename" }}</code></td>
      <td>filename のファイル内容の SHA256 ハッシュ値を base64 エンコードした値。このファイルはリポジトリでコミットしたものであり、かつ現在の作業ディレクトリからの絶対・相対パスで指定する必要があります。<code class="highlighter-rouge">package-lock.json</code> や <code class="highlighter-rouge">pom.xml</code>、<code class="highlighter-rouge">project.clj</code> のような依存関係を記したマニフェストファイルをここで指定すると便利です。 <code class="highlighter-rouge">restore_cache</code> と <code class="highlighter-rouge">save_cache</code> の間でこのファイルが変化しないのが重要なポイントです。ファイル内容が変化すると、<code class="highlighter-rouge">restore_cache</code> のタイミングで使われるファイルとは異なるキャッシュキーを元にしてキャッシュを保存するためです。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">{{ epoch }}</code></td>
      <td>UNIX 時間（1970 年 1 月 1 日午前 0 時 0 分 0 秒）から現在までの経過時間を表す秒数。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">{{ arch }}</code></td>
      <td>OS と CPU の種類。 OS や CPU アーキテクチャに合わせてコンパイル済みバイナリをキャッシュするような場合に用います。<code class="highlighter-rouge">darwin amd64</code> あるいは <code class="highlighter-rouge">linux i386/32-bit</code> のような文字列になります。</td>
    </tr>
  </tbody>
</table>

<p>ステップの処理では、以上のようなテンプレートの部分は実行時に値が置き換えられ、その置換後の文字列が<code class="highlighter-rouge">キー</code>の値として使われます。</p>

<p>テンプレートの使用例：</p>
<ul>
  <li>
<code class="highlighter-rouge">myapp-{{ checksum "package-lock.json" }}</code> <code class="highlighter-rouge">package-lock.json</code> ファイルの内容が変わるたびにキャッシュが毎回生成されます。このプロジェクトの別のブランチも同じキャッシュキーを生成します。</li>
  <li>
<code class="highlighter-rouge">myapp-{{ .Branch }}-{{ checksum "package-lock.json" }}</code> - ファイル内容が変わるたびにキャッシュが毎回生成されます。ただし、こちらはブランチごとに別のキャッシュを生成します。</li>
  <li>
<code class="highlighter-rouge">myapp-{{ epoch }}</code> - ジョブを実行するたびに新たにキャッシュを生成します。</li>
</ul>

<p>キャッシュの <code class="highlighter-rouge">key</code> にテンプレート値を埋め込む場合、キャッシュの保存に制限がかかることに注意してください。CircleCI のストレージにキャッシュをアップロードするのに通常より時間がかかります。そのため、実際に変更があったときにのみ新しいキャッシュを生成し、ジョブ実行のたびに新たなキャッシュを作らないように <code class="highlighter-rouge">key</code> を使うのがコツです。</p>

<div class="alert alert-info" role="alert">
<b>ヒント：</b>キャッシュがイミュータブルということもあるため、キャッシュキー名の先頭にバージョン名などを入れておくと管理がしやすいです。例えば <code class="highlighter-rouge">v1-...</code> のようにします。こうすることでプレフィックスのバージョンの数字を増やしていくだけで全キャッシュを 1 から再生成できることになります。
</div>

<h6 id="例-2"><em>例</em></h6>

<pre><code class="language-YAML">- save_cache:
    key: v1-myapp-{{ arch }}-{{ checksum "project.clj" }}
    paths:
      - /home/ubuntu/.m2
</code></pre>

<h5 id="restore_cache"><strong><code class="highlighter-rouge">restore_cache</code></strong></h5>

<p><code class="highlighter-rouge">key</code> に設定されている内容を元に、あらかじめ保存されていたキャッシュを復元します。先に <a href="#save_cache"><code class="highlighter-rouge">save_cache</code> ステップ</a>を利用して、この key に該当するキャッシュを保存しておかなければなりません。詳しくは「<a href="../caching/index.html">依存関係のキャッシュ</a>」をご覧ください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key</td>
      <td>○ <sup>(1)</sup>
</td>
      <td>String</td>
      <td>復元するキャッシュキーを（1 つだけ）指定します。</td>
    </tr>
    <tr>
      <td>keys</td>
      <td>○ <sup>(1)</sup>
</td>
      <td>List</td>
      <td>復元するキャッシュを探索するためのキャッシュキーのリストを指定します。ただし最初にマッチしたキーのみが復元されます。</td>
    </tr>
    <tr>
      <td>name</td>
      <td>-</td>
      <td>String</td>
      <td>CircleCI の画面上にタイトル表示するステップの名前を指定します（デフォルト：Restoring Cache）。</td>
    </tr>
  </tbody>
</table>

<p><sup>(1)</sup>いずれか 1 つの属性のみ指定します。<code class="highlighter-rouge">key</code> と <code class="highlighter-rouge">keys</code> の両方が指定されたときは、<code class="highlighter-rouge">key</code> の内容がまず始めに検証され、次に <code class="highlighter-rouge">keys</code> の内容が検証されます。</p>

<p>存在するキーを対象に、前方一致で検索が実行されることになります。</p>

<p><strong>注 :</strong> 一致するものが複数あった場合、マッチ度合いの高いものが他にあったとしても、一番最後に一致したものが使われます。</p>

<p>例えば下記のようにします。</p>

<pre><code class="language-YAML">steps:
  - save_cache:
      key: v1-myapp-cache
      paths:
        - ~/d1

  - save_cache:
      key: v1-myapp-cache-new
      paths:
        - ~/d2

  - run: rm -f ~/d1 ~/d2

  - restore_cache:
      key: v1-myapp-cache
</code></pre>

<p>この例では、<code class="highlighter-rouge">v1-myapp-cache-new</code> で示したキャッシュが復元されます。最初のキー（<code class="highlighter-rouge">v1-myapp-cache</code>）にもマッチはしていますが、後の方のキーが <code class="highlighter-rouge">v1-myapp-cache</code> というプレフィックスで検索したときに一番最後にマッチしたものになるからです。</p>

<p>key の詳しい書式については、<a href="#save_cache"><code class="highlighter-rouge">save_cache</code> ステップ</a>の <code class="highlighter-rouge">key</code> セクションをご覧ください。</p>

<p>CircleCI が <code class="highlighter-rouge">keys</code> のリストを処理するときは、最初にマッチした既存のキャッシュを復元します。もっと別の条件を加えて特定のキー（<code class="highlighter-rouge">package-lock.json</code> ファイルの実在するバージョンのキャッシュなど）に狙ってマッチさせたい、あるいはもっと幅広く（プロジェクト内の全キャッシュなどと）マッチさせたいと思うかもしれません。キーに該当するキャッシュが 1 つもない場合は、警告とともにステップはスキップされます。</p>

<p>元々のキャッシュの保存場所に復元されるため、restore_cache では path の指定は不要です。</p>

<h6 id="例-3">例</h6>

<pre><code class="language-YAML">- restore_cache:
    keys:
      - v1-myapp-{{ arch }}-{{ checksum "project.clj" }}
      # 「project.clj」の本来のバージョンのキャッシュが見つからなかったら、今あるなかで最新のキャッシュを使う
      - v1-myapp-

# ... アプリケーションのビルドやテストのステップをここに記述する

# キャッシュは「project.clj」のバージョンごとに一度だけ保存する
- save_cache:
    key: v1-myapp-{{ arch }}-{{ checksum "project.clj" }}
    paths:
      - /foo
</code></pre>

<h5 id="deploy"><strong><code class="highlighter-rouge">deploy</code></strong></h5>

<p>artifact のデプロイを行う特殊なステップです。</p>

<p><code class="highlighter-rouge">deploy</code> は <a href="#run"><code class="highlighter-rouge">run</code></a>  ステップと同様のコンフィグマップなどを用いて設定します。ジョブには 2 つ以上の <code class="highlighter-rouge">deploy</code> ステップを含む場合もあります。</p>

<p>通常 <code class="highlighter-rouge">deploy</code> ステップは 2 つの例外を除き <code class="highlighter-rouge">run</code> と似た形で動作します。</p>

<ul>
  <li>
<code class="highlighter-rouge">parallelism</code> を使ったジョブの場合、<code class="highlighter-rouge">deploy</code> ステップは他のすべてのノードが成功した場合にのみ、ノード番号 0 として実行されます。 ノード番号 0 以外はステップを実行しません。</li>
  <li>SSHを利用したジョブを実行した場合、 <code class="highlighter-rouge">deploy</code> ステップは実行されません。代わりに以下のアクションが表示されます。
    <blockquote>
      <p><strong>skipping deploy</strong>
Running in SSH mode.  Avoid deploying.</p>
    </blockquote>
  </li>
</ul>

<h6 id="例-4">例</h6>

<pre><code class="language-YAML">- deploy:
    command: |
      if [ "${CIRCLE_BRANCH}" == "master" ]; then
        ansible-playbook site.yml
      fi
</code></pre>

<h5 id="store_artifacts"><strong><code class="highlighter-rouge">store_artifacts</code></strong></h5>

<p>Web アプリケーションや API を通じて使う artifacts（ログ、バイナリなど）を保存するステップです。詳しくは「<a href="../artifacts/index.html">artifacts をアップロードする</a>」を参照してください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>path</td>
      <td>○</td>
      <td>String</td>
      <td>ジョブで作成した artifacts の保存先となるプライマリコンテナ内のディレクトリを指定します。</td>
    </tr>
    <tr>
      <td>destination</td>
      <td>-</td>
      <td>String</td>
      <td>artifacts の API において artifacts の保存先パスに付加するプレフィックスを指定します（デフォルト：<code class="highlighter-rouge">path</code> で指定したファイルディレクトリ）。</td>
    </tr>
  </tbody>
</table>

<p>ジョブでは複数の <code class="highlighter-rouge">store_artifacts</code> ステップを指定することもできます。ファイルが上書きされたりしないよう、ステップごとにユニークなプレフィックスを追加するようにしてください。</p>

<h6 id="例-5">例</h6>

<pre><code class="language-YAML">- store_artifacts:
    path: /code/test-results
    destination: prefix
</code></pre>

<h5 id="store_test_results"><strong><code class="highlighter-rouge">store_test_results</code></strong></h5>

<p>テスト結果をアップロードするのに利用する特殊なステップです。これによってテスト結果は Builds ページの [Test Summary] タブに表示され、テストのタイミング解析などに用いることができます。 <a href="#store_artifacts"><strong>store_artifacts</strong> ステップ</a>を使うことで、テスト結果をビルドの artifact ファイルとして出力することもできます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>path</td>
      <td>○</td>
      <td>String</td>
      <td>JUnit XML のサブディレクトリや Cucumber JSON のテストメタデータが含まれるディレクトリへのパス（<code class="highlighter-rouge">working_directory</code>に対する絶対もしくは相対パス）を指定します。</td>
    </tr>
  </tbody>
</table>

<p><strong>注 :</strong> <code class="highlighter-rouge">store_test_results</code> で指定したパスの <strong>サブディレクトリ</strong> にテスト結果を保存するようにしてください。CircleCI 上でテストリポートの推測がしやすくなるよう、ユーザー独自のテストスイートの名前に合わせてディレクトリを命名するが理想です。サブディレクトリに保存しないときは、CircleCI 上の [Test Summary] タブでテストリポートをチェックします。この場合は <code class="highlighter-rouge">Your build ran 71 tests in unknown</code> のような表示になります。適切な名前のサブディレクトリに保存した場合は、<code class="highlighter-rouge">Your build ran 71 tests in rspec</code> のようになります。</p>

<h6 id="例-6"><em>例</em></h6>

<p>ディレクトリ構造</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>test-results
├── jest
│   └── results.xml
├── mocha
│   └── results.xml
└── rspec
    └── results.xml
</code></pre></div></div>

<p><code class="highlighter-rouge">config.yml</code> の構文：</p>

<pre><code class="language-YAML">- store_test_results:
    path: test-results
</code></pre>

<h5 id="persist_to_workspace"><strong><code class="highlighter-rouge">persist_to_workspace</code></strong></h5>

<p>Workflows の実行時に、他のジョブが使っていた一時ファイルを保持しておくための特殊なステップです。</p>

<p><strong>注 :</strong> Workspace はファイル作成後 15 日間保存されます。15 日以上経過後もジョブで Workspace を使おうとすると、Workflows の一部の再実行や SSH 経由の個別ジョブの実行はいずれも失敗します。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>root</td>
      <td>○</td>
      <td>String</td>
      <td>
<code class="highlighter-rouge">working_directory</code>に対する絶対パスまたは相対パスを指定します。</td>
    </tr>
    <tr>
      <td>paths</td>
      <td>○</td>
      <td>List</td>
      <td>ファイルを特定するグロブ（ワイルドカードなど）、または共有 Workspace に付加するディレクトリパス（グロブ不可）を指定します。Workspace のルートディレクトリへの相対パスと見なされ、 Workspace のルートディレクトリそのものにすることはできません。</td>
    </tr>
  </tbody>
</table>

<p>root キーは Workspace のルートディレクトリとなるコンテナ内のディレクトリを指します。一方、paths の値は必ずルートへの相対ディレクトリとなります。</p>

<h5 id="root-キーの使用例"><em>root キーの使用例</em></h5>

<p>下記の構文は <code class="highlighter-rouge">/tmp/dir</code> 内にある paths で指定している内容を、Workspace の <code class="highlighter-rouge">/tmp/dir</code> ディレクトリ内に相対パスで保持します。</p>

<pre><code class="language-YAML">- persist_to_workspace:
    root: /tmp/dir
    paths:
      - foo/bar
      - baz
</code></pre>

<p>このステップが完了すると、Workspace には下記のディレクトリが追加されることになります。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/tmp/dir/foo/bar
/tmp/dir/baz
</code></pre></div></div>

<h6 id="paths-キーの使用例"><em>paths キーの使用例</em></h6>

<pre><code class="language-YAML">- persist_to_workspace:
    root: /tmp/workspace
    paths:
      - target/application.jar
      - build/*
</code></pre>

<p><code class="highlighter-rouge">paths</code> では、Go 言語の <code class="highlighter-rouge">Glob</code> 関数をベースにした、<a href="https://golang.org/pkg/path/filepath/#Match" target="_blank" rel="noopener noreferrer">filepath.Match</a> によるパターンマッチングに対応します。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>パターン
        { term }
term:
        '*'　区切り文字を含まない文字シーケンスの全てにマッチする
        '?'　区切り文字を含まないあらゆる文字 1 つにマッチする
        '['  [ '^' ] { character-range }
        ']'  文字クラス（空文字は不可）
        c　文字 c にマッチする（'*'　'?'　'\\'　'[' 以外）
        '\\'c　文字 c にマッチする
character-range:
        c　文字 c にマッチする（'\\'　'-'　']' 以外)
        '\\'c　文字 c にマッチする
        lo '-' hi　lo &lt;= c &lt;= hi の範囲にある文字 c にマッチする
</code></pre></div></div>

<p>Go 言語のドキュメントでは、<code class="highlighter-rouge">/usr/*/bin/ed</code> のように階層名でパターンを記述できるとしています（/ は区切り文字です）。<strong>注 :</strong> どのような指定方法でも Workspace のルートディレクトリへの相対パスとなります。</p>

<h5 id="attach_workspace"><strong><code class="highlighter-rouge">attach_workspace</code></strong></h5>

<p>Workflow で使用している Workspace を現在のコンテナにアタッチするのに利用する特殊なステップです。Workspace 内のコンテンツは完全な状態でダウンロードされ、Workspace がアタッチされているディレクトリにコピーされます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>at</td>
      <td>○</td>
      <td>String</td>
      <td>Workspace をアタッチするディレクトリを指定します。</td>
    </tr>
  </tbody>
</table>

<h6 id="例-7"><em>例</em></h6>

<pre><code class="language-YAML">- attach_workspace:
    at: /tmp/workspace
</code></pre>

<p>Workflows 1 つ 1 つは、それぞれに一時的な Workspace が関連付けられています。Workspace を使用して、ジョブの実行中にビルドした固有のデータを同じ Workflow 内の他のジョブに渡すことができます。
ジョブ内では <code class="highlighter-rouge">persist_to_workspace</code> ステップで Workspace にファイルを追加でき、さらに <code class="highlighter-rouge">attach_workspace</code> ステップを呼び出すと、Workspace 内のファイルをアタッチしたファイルシステムにダウンロードできます。
Workspace で可能なのはファイルの追加のみです。ジョブから Workspace にファイルは追加できても、Workspace からファイルを削除することは不可能になっています。
ファイルを受け取る側のジョブは、ファイルを渡す側のジョブによって Workspace に追加されたファイルしか参照できないことになります。 Workspace をアタッチするとき、アップストリームにある各ジョブの「レイヤー」は、Workflows グラフで表示される順序通りにアップストリームのジョブから適用されます。しかし、2 つのジョブを同時に実行すると、そのレイヤーの適用順序は確定できません。同時に実行した複数のジョブが同じファイル名でデータを保持し Workspace にアタッチするようなケースでは、エラーが発生しますのでご注意ください。</p>

<p>Workflow を再度実行すると、元の Workflow のものと同じ Workspace を引き継ぎます。失敗したジョブを再度実行したときも、そのジョブは元の Workflow で実行したジョブと同じ Workspace の内容を使えることになります。</p>

<p>Artifacts、Workspaces、キャッシュはそれぞれ下記のような違いがあることを頭に入れておいてください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>タイプ</th>
      <th>保存期間</th>
      <th>用途</th>
      <th>使用例・参照先</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Artifacts</td>
      <td>1 ヶ月単位</td>
      <td>artifacts の長期間に渡る保管</td>
      <td>
<strong>Builds ページ</strong> の [Artifacts] タブで参照する。<code class="highlighter-rouge">tmp/circle-artifacts.&lt;hash&gt;/container</code> などの配下に格納される。</td>
    </tr>
    <tr>
      <td>Workspaces</td>
      <td>Workflow に従う</td>
      <td>
<code class="highlighter-rouge">attach_workspace:</code> ステップを使うダウンストリームのコンテナに対して Workspace をアタッチするのに用いる。</td>
      <td>
<code class="highlighter-rouge">attach_workspace</code> を実行すると、Workspace の内容全体をコピー・再構築する。</td>
    </tr>
    <tr>
      <td>Caches</td>
      <td>1 ヶ月単位</td>
      <td>npm や Gem パッケージなど、ジョブ実行の高速化に役立つ変化の少ないデータの保存に用いる。</td>
      <td>
<code class="highlighter-rouge">save_cache</code> ステップでは、<code class="highlighter-rouge">paths</code> でディレクトリのリストを追加する。また、<code class="highlighter-rouge">key</code> でキャッシュを一意に識別する名前を（ブランチ、ビルド番号、リビジョンなどを用いて）指定する。 <code class="highlighter-rouge">restore_cache</code> と 適切な <code class="highlighter-rouge">key</code> を使ってキャッシュを復元する。</td>
    </tr>
  </tbody>
</table>

<p>Workspaces や キャッシュ、artifacts に関する詳細は、「<a href="../../../../blog/persisting-data-in-workflows-when-to-use-caching-artifacts-and-workspaces/index.html">Persisting Data in Workflows: When to Use Caching, Artifacts, and Workspaces</a>」を参照してください。</p>

<h5 id="add_ssh_keys"><strong><code class="highlighter-rouge">add_ssh_keys</code></strong></h5>

<p>プロジェクト設定でコンテナに対して SSH 鍵を登録する特殊なステップです。下記のキーを使って SSH に関する設定を行えます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>fingerprints</td>
      <td>-</td>
      <td>List</td>
      <td>登録された鍵に対応する SSH fingerprint のリスト（デフォルト：登録された鍵全て）</td>
    </tr>
  </tbody>
</table>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">steps</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">add_ssh_keys</span><span class="pi">:</span>
      <span class="na">fingerprints</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">b7:35:a6:4e:9b:0d:6d:d4:78:1e:9a:97:2a:66:6b:be"</span>
</code></pre></div></div>

<p><strong>注 :</strong>
CircleCI は登録された全ての SSH 鍵に対して <code class="highlighter-rouge">ssh-agent</code> を通じて署名を行います。ただし、コンテナに対して鍵を実際に登録するには、コンフィグファイル内で <code class="highlighter-rouge">add_ssh_keys</code> を <strong>必ず</strong> 設定する必要があります。</p>

<h2 id="workflows"><strong><code class="highlighter-rouge">workflows</code></strong></h2>
<p>あらゆるジョブの自動化に用います。Workflow 1 つ 1 つはそれぞれ名前となるキーと、値となるマップからなります。Workflow の名前は <code class="highlighter-rouge">config.yml</code> ファイル内でユニークでなければなりません。Workflows の設定でトップレベルに置くべきキーは、<code class="highlighter-rouge">version</code> と <code class="highlighter-rouge">jobs</code> になります。</p>

<h3 id="version-1"><strong><code class="highlighter-rouge">version</code></strong></h3>
<p>Workflows の <code class="highlighter-rouge">version</code> フィールドは、機能の廃止やベータ版で重大な変更があったときに警告する際の判断材料として使われます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>version</td>
      <td>○</td>
      <td>String</td>
      <td>現在のところは必ず <code class="highlighter-rouge">2</code> とします。</td>
    </tr>
  </tbody>
</table>

<h3 id="workflow_name"><strong>&lt;<code class="highlighter-rouge">workflow_name</code>&gt;</strong></h3>

<p>Workflow に付けるユニークな名前です。</p>

<h4 id="triggers"><strong><code class="highlighter-rouge">triggers</code></strong></h4>
<p>Workflow を実行するトリガーを指定します。デフォルトではブランチにプッシュすると Workflow の実行をトリガーするようになっています。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>triggers</td>
      <td>-</td>
      <td>Array</td>
      <td>現在のところは必ず <code class="highlighter-rouge">schedule</code> とします。</td>
    </tr>
  </tbody>
</table>

<h5 id="schedule"><strong><code class="highlighter-rouge">schedule</code></strong></h5>
<p>Workflow では、一定時刻に実行を指示する <code class="highlighter-rouge">schedule</code> を記述することもできます。利用者の少ない毎日夜 12 時にビルドする、といったことが可能です。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>workflows:
   version: 2
   nightly:
     triggers:
       - schedule:
           cron: "0 0 * * *"
           filters:
             branches:
               only:
                 - master
                 - beta
     jobs:
       - test
</code></pre></div></div>
<h6 id="cron"><strong><code class="highlighter-rouge">cron</code></strong></h6>
<p><code class="highlighter-rouge">cron</code> キーは POSIX 準拠の <code class="highlighter-rouge">crontab</code> の構文で定義します。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>cron</td>
      <td>○</td>
      <td>String</td>
      <td>
<a href="http://pubs.opengroup.org/onlinepubs/7908799/xcu/crontab.html" target="_blank" rel="noopener noreferrer">crontab man page</a>を参照してください。</td>
    </tr>
  </tbody>
</table>

<h6 id="filters"><strong><code class="highlighter-rouge">filters</code></strong></h6>
<p>filters では <code class="highlighter-rouge">branches</code> キーが使えます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>filters</td>
      <td>○</td>
      <td>Map</td>
      <td>実行するブランチを定義付けするマップを設定します。</td>
    </tr>
  </tbody>
</table>

<h6 class="no_toc" id="ブランチ"><strong><code class="highlighter-rouge">ブランチ</code></strong></h6>

<p><code class="highlighter-rouge">branches</code> キーは、<code class="highlighter-rouge">trigger</code> を定義した <code class="highlighter-rouge">config.yml</code> ファイルを含むブランチにおいて、スケジュール実行すべきブランチかどうかを決定するのに使えます。つまり、<code class="highlighter-rouge">master</code> ブランチにプッシュすると、<code class="highlighter-rouge">master</code> ブランチの <a href="../workflows/index.html#workflows-%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%82%B3%E3%83%B3%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%A8%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9">Workflows</a> のみをスケジュール実行します。</p>

<p>branches では、ブランチ名を指す文字列をマップさせるための <code class="highlighter-rouge">only</code> キーと <code class="highlighter-rouge">ignore</code> キーが使えます。 文字列を <code class="highlighter-rouge">/</code> で囲み、正規表現を使ってブランチ名をマッチさせたり、文字列のリストを作ってマップさせることも可能です。正規表現では文字列 <strong>全体</strong> にマッチさせる形にしなければなりません。</p>

<ul>
  <li>
<code class="highlighter-rouge">only</code> の値にマッチするブランチはすべてジョブを実行します。</li>
  <li>
<code class="highlighter-rouge">ignore</code> の値にマッチするブランチはすべてジョブを実行しません。</li>
  <li>
<code class="highlighter-rouge">only</code> と <code class="highlighter-rouge">ignore</code> のどちらも指定していない場合、全てのブランチでジョブを実行します。</li>
  <li>
<code class="highlighter-rouge">only</code> と <code class="highlighter-rouge">ignore</code> の両方を指定した場合は、<code class="highlighter-rouge">only</code> を処理してから <code class="highlighter-rouge">ignore</code> の処理に移ります。</li>
</ul>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>branches</td>
      <td>○</td>
      <td>Map</td>
      <td>実行する特定のブランチを定義するマップを設定します。</td>
    </tr>
    <tr>
      <td>only</td>
      <td>○</td>
      <td>String / Strings のリスト</td>
      <td>単独のブランチ名、もしくはブランチ名のリストを指定します。</td>
    </tr>
    <tr>
      <td>ignore</td>
      <td>-</td>
      <td>String / Strings のリスト</td>
      <td>単独のブランチ名、もしくはブランチ名のリストを指定します。</td>
    </tr>
  </tbody>
</table>

<h4 id="jobs-1"><strong><code class="highlighter-rouge">jobs</code></strong></h4>
<p>jobs では <code class="highlighter-rouge">requires</code>、<code class="highlighter-rouge">filters</code>、<code class="highlighter-rouge">context</code> キーを使えます。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>jobs</td>
      <td>○</td>
      <td>List</td>
      <td>依存関係の指定を含む実行するジョブのリストを指定します。</td>
    </tr>
  </tbody>
</table>

<h5 id="job_name-1"><strong>&lt;<code class="highlighter-rouge">job_name</code>&gt;</strong></h5>

<p><code class="highlighter-rouge">config.yml</code> ファイルで定義するジョブの名前です。</p>

<h6 id="requires"><strong><code class="highlighter-rouge">requires</code></strong></h6>
<p>デフォルトでは、複数のジョブは並行処理されます。そのため、ジョブ名を使って必要な依存関係の処理を明確にしておく必要があります。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>requires</td>
      <td>-</td>
      <td>List</td>
      <td>そのジョブの開始までに完了させるべきジョブのリストを指定します。</td>
    </tr>
    <tr>
      <td>name</td>
      <td>-</td>
      <td>String</td>
      <td>ジョブの別名を設定します。何度もジョブを実行する際に都合の良い名前を指定することが可能です。同じジョブを複数回呼び出したいとき、あるジョブで同じ内容のジョブが必要なときなどに有効です。（バージョン 2.1 が必須）。</td>
    </tr>
  </tbody>
</table>

<h6 id="context"><strong><code class="highlighter-rouge">context</code></strong></h6>
<p>ジョブは、組織において設定したグローバル環境変数を使えるようにすることも可能です。設定画面で context を追加する方法については「<a href="../contexts/index.html">コンテキスト</a>」を参照してください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>context</td>
      <td>-</td>
      <td>String</td>
      <td>コンテキスト名を指定します。デフォルトのコンテキスト名は <code class="highlighter-rouge">org-global</code> となります。複数のコンテキストを利用できるようにするには、コンテキストごとに名前をユニークにしてください。</td>
    </tr>
  </tbody>
</table>

<h6 id="type"><strong><code class="highlighter-rouge">type</code></strong></h6>
<p><code class="highlighter-rouge">approval</code> の <code class="highlighter-rouge">type</code> を指定することで、その後のジョブを続行する前に手動の承認操作を求めることができるようになります。下記の例にある通り、Workflow が <code class="highlighter-rouge">type: approval</code> キーを処理するまで、ジョブは依存関係通りの順番で実行されます。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      - hold:
          type: approval
          requires:
            - test1
            - test2
      - deploy:
          requires:
            - hold
</code></pre></div></div>
<p><strong>注 :</strong> <code class="highlighter-rouge">hold</code> というジョブ名は、メインのコンフィグに入れないようにしてください。</p>

<h6 id="filters-1"><strong><code class="highlighter-rouge">filters</code></strong></h6>
<p>filters では <code class="highlighter-rouge">branches</code> か <code class="highlighter-rouge">tags</code> キーのいずれかを使えます。 <strong>注 :</strong> Workflows のなかではジョブレベルの branches キーは無視されることに注意してください。最初にジョブレベルで branches キーを使っていて、その後 <code class="highlighter-rouge">config.yml</code> を Workflows を使う内容に移行する場合、ジョブレベルにあった branches は削除して、Workflows セクションのなかで宣言するようにしてください。</p>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>filters</td>
      <td>-</td>
      <td>Map</td>
      <td>実行するブランチを定義付けするマップを設定します。</td>
    </tr>
  </tbody>
</table>

<h6 class="no_toc" id="branches-1"><strong><code class="highlighter-rouge">branches</code></strong></h6>
<p>branches では、ブランチ名を指す文字列をマップさせるための <code class="highlighter-rouge">only</code> キーと <code class="highlighter-rouge">ignore</code> キーが使えます。文字列を <code class="highlighter-rouge">/</code> で囲み、正規表現を使ってブランチ名をマッチさせたり、文字列のリストを作ってマップさせることも可能です。正規表現では文字列 <strong>全体</strong> にマッチさせる形にしなければなりません。</p>

<ul>
  <li>
<code class="highlighter-rouge">only</code> の値にマッチするブランチはすべてジョブを実行します。</li>
  <li>
<code class="highlighter-rouge">ignore</code> の値にマッチするブランチはすべてジョブを実行しません。</li>
  <li>
<code class="highlighter-rouge">only</code> と <code class="highlighter-rouge">ignore</code> のどちらも指定していない場合、全てのブランチでジョブを実行します。</li>
  <li>
<code class="highlighter-rouge">only</code> と <code class="highlighter-rouge">ignore</code> の両方を指定した場合は、<code class="highlighter-rouge">only</code> を処理してから <code class="highlighter-rouge">ignore</code> の処理に移ります。</li>
</ul>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>branches</td>
      <td>-</td>
      <td>Map</td>
      <td>実行する特定のブランチを定義するマップを設定します。</td>
    </tr>
    <tr>
      <td>only</td>
      <td>-</td>
      <td>String / Strings のリスト</td>
      <td>単独のブランチ名、もしくはブランチ名のリストを指定します。</td>
    </tr>
    <tr>
      <td>ignore</td>
      <td>-</td>
      <td>String / Strings のリスト</td>
      <td>単独のブランチ名、もしくはブランチ名のリスト指定します。</td>
    </tr>
  </tbody>
</table>

<h6 class="no_toc" id="tags"><strong><code class="highlighter-rouge">tags</code></strong></h6>

<p>CircleCI は明示的にタグフィルターを指定しない限り、タグに対して Workflows は実行しません。また、（直接にしろ間接的にしろ）他のジョブの実行が必要なジョブの場合、そのジョブにはタグフィルターの指定が必須となります。</p>

<p>tags では <code class="highlighter-rouge">only</code> キーと <code class="highlighter-rouge">ignore</code> キーが使えます。文字列を <code class="highlighter-rouge">/</code> で囲み、正規表現を使ってタグをマッチさせたり、文字列のリストを作ってマップさせることも可能です。正規表現では文字列 <strong>全体</strong> にマッチさせる形にしなければなりません。CircleCI では軽量版と注釈付き版のどちらのタグにも対応しています。</p>

<ul>
  <li>
<code class="highlighter-rouge">only</code> の値にマッチするタグはすべてジョブを実行します。</li>
  <li>
<code class="highlighter-rouge">ignore</code> の値にマッチするタグはすべてジョブを実行しません。</li>
  <li>
<code class="highlighter-rouge">only</code> と <code class="highlighter-rouge">ignore</code> のどちらも指定していない場合、全てのジョブはスキップされます。</li>
  <li>
<code class="highlighter-rouge">only</code> と <code class="highlighter-rouge">ignore</code> の両方を指定した場合は、<code class="highlighter-rouge">only</code> を処理してから <code class="highlighter-rouge">ignore</code> の処理に移ります。</li>
</ul>

<table class="table table-striped">
  <thead>
    <tr>
      <th>キー</th>
      <th>必須</th>
      <th>型</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>tags</td>
      <td>-</td>
      <td>Map</td>
      <td>実行するタグを定義するマップを設定します。</td>
    </tr>
    <tr>
      <td>only</td>
      <td>-</td>
      <td>String / Strings のリスト</td>
      <td>単独のタグ文字列、もしくはタグ文字列のリストを指定します。</td>
    </tr>
    <tr>
      <td>ignore</td>
      <td>-</td>
      <td>String / Strings のリスト</td>
      <td>単独のタグ文字列、もしくはタグ文字列のリスト指定します。</td>
    </tr>
  </tbody>
</table>

<p>詳細は Workflows ページの「<a href="../workflows/index.html#git-%E3%82%BF%E3%82%B0%E3%81%AB%E5%AF%BE%E5%BF%9C%E5%8F%AF%E8%83%BD%E3%81%AA-workflows-%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B">Git タグを用いて Workflows を実行する</a>」を参照してください。</p>

<h6 id="例-8"><em>例</em></h6>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>workflows:
  version: 2

  build_test_deploy:
    jobs:
      - flow
      - downstream:
          requires:
            - flow
          filters:
            branches:
              only: master
</code></pre></div></div>

<p>Workflows の詳細な例と概念については「<a href="../workflows/index.html">ジョブの実行を Workflow で制御する</a>」を参照してください。</p>

<h2 class="no_toc" id="サンプルコード">サンプルコード</h2>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="m">2</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu:14.04</span>

      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">mongo:2.6.8</span>
        <span class="na">command</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">mongod</span><span class="pi">,</span> <span class="nv">--smallfiles</span><span class="pi">]</span>

      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">postgres:9.4.1</span>
        <span class="c1"># コンテナによっては環境変数の設定が必要</span>
        <span class="na">environment</span><span class="pi">:</span>
          <span class="na">POSTGRES_USER</span><span class="pi">:</span> <span class="s">root</span>

      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">redis@sha256:54057dd7e125ca41afe526a877e8bd35ec2cdd33b9217e022ed37bdcf7d09673</span>

      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">rabbitmq:3.5.4</span>

    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">TEST_REPORTS</span><span class="pi">:</span> <span class="s">/tmp/test-reports</span>

    <span class="na">working_directory</span><span class="pi">:</span> <span class="s">~/my-project</span>

    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">checkout</span>

      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">command</span><span class="pi">:</span> <span class="s">echo 127.0.0.1 devhost | sudo tee -a /etc/hosts</span>

      <span class="c1"># Postgres ユーザーとデータベースを作成</span>
      <span class="c1"># 整形に使う YAML のヒアドキュメントの「|」に注意</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">sudo -u root createuser -h localhost --superuser ubuntu &amp;&amp;</span>
          <span class="s">sudo createdb -h localhost test_db</span>

      <span class="pi">-</span> <span class="na">restore_cache</span><span class="pi">:</span>
          <span class="na">keys</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">v1-my-project-{{ checksum "project.clj" }}</span>
            <span class="pi">-</span> <span class="s">v1-my-project-</span>

      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">environment</span><span class="pi">:</span>
            <span class="na">SSH_TARGET</span><span class="pi">:</span> <span class="s2">"</span><span class="s">localhost"</span>
            <span class="na">TEST_ENV</span><span class="pi">:</span> <span class="s2">"</span><span class="s">linux"</span>
          <span class="na">command</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="s">set -xu</span>
            <span class="s">mkdir -p ${TEST_REPORTS}</span>
            <span class="s">run-tests.sh</span>
            <span class="s">cp out/tests/*.xml ${TEST_REPORTS}</span>

      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">set -xu</span>
          <span class="s">mkdir -p /tmp/artifacts</span>
          <span class="s">create_jars.sh ${CIRCLE_BUILD_NUM}</span>
          <span class="s">cp *.jar /tmp/artifacts</span>

      <span class="pi">-</span> <span class="na">save_cache</span><span class="pi">:</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">v1-my-project-{{ checksum "project.clj" }}</span>
          <span class="na">paths</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">~/.m2</span>

      <span class="c1"># artifacts を保存</span>
      <span class="pi">-</span> <span class="na">store_artifacts</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">/tmp/artifacts</span>
          <span class="na">destination</span><span class="pi">:</span> <span class="s">build</span>

      <span class="c1"># テスト結果をアップロード</span>
      <span class="pi">-</span> <span class="na">store_test_results</span><span class="pi">:</span>
          <span class="na">path</span><span class="pi">:</span> <span class="s">/tmp/test-reports</span>

  <span class="na">deploy-stage</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu:14.04</span>
    <span class="na">working_directory</span><span class="pi">:</span> <span class="s">/tmp/my-project</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy if tests pass and branch is Staging</span>
          <span class="na">command</span><span class="pi">:</span> <span class="s">ansible-playbook site.yml -i staging</span>

  <span class="na">deploy-prod</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">ubuntu:14.04</span>
    <span class="na">working_directory</span><span class="pi">:</span> <span class="s">/tmp/my-project</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy if tests pass and branch is Master</span>
          <span class="na">command</span><span class="pi">:</span> <span class="s">ansible-playbook site.yml -i production</span>

<span class="na">workflows</span><span class="pi">:</span>
  <span class="na">version</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">build-deploy</span><span class="pi">:</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">build</span><span class="pi">:</span>
          <span class="na">filters</span><span class="pi">:</span>
            <span class="na">branches</span><span class="pi">:</span>
              <span class="na">ignore</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">develop</span>
                <span class="pi">-</span> <span class="s">/feature-.*/</span>
      <span class="pi">-</span> <span class="na">deploy-stage</span><span class="pi">:</span>
          <span class="na">requires</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">build</span>
          <span class="na">filters</span><span class="pi">:</span>
            <span class="na">branches</span><span class="pi">:</span>
              <span class="na">only</span><span class="pi">:</span> <span class="s">staging</span>
      <span class="pi">-</span> <span class="na">deploy-prod</span><span class="pi">:</span>
          <span class="na">requires</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">build</span>
          <span class="na">filters</span><span class="pi">:</span>
            <span class="na">branches</span><span class="pi">:</span>
              <span class="na">only</span><span class="pi">:</span> <span class="s">master</span>
</code></pre></div></div>

<h2 class="no_toc" id="関連情報">関連情報</h2>

<p><a href="../config-intro/index.html">イントロダクション</a></p>

				
					<footer>
	<br>
<hr>
<h3>Help make this document better</h3>
<p>This guide, as well as the rest of our docs, are open-source and available on <a href="https://github.com/circleci/circleci-docs" target="_blank" rel="noopener noreferrer">GitHub</a>. We welcome your contributions.
</p>
<ul>
	<li>
<a href="https://github.com/circleci/circleci-docs/blob/master/jekyll/_cci2_ja/configuration-reference.md" target="_blank" rel="noopener noreferrer">Suggest an edit to this page</a> (please read the <a href="https://github.com/circleci/circleci-docs/blob/master/docs/CONTRIBUTING.md#contributing-to-circleci-docs" target="_blank" rel="noopener noreferrer">contributing guide</a> first).</li>
	<li>
        To report a problem in the documentation, or to submit feedback and comments, please
        <a href="https://github.com/circleci/circleci-docs/issues/new/choose" target="_blank" rel="noopener noreferrer">open an issue on GitHub.</a>
    </li>
</ul>
<hr>

	<div class="license-notice">
	<a rel="noopener noreferrer" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width:0" src="../../../../../licensebuttons.net/l/by-nc-sa/4.0/80x15.png"></a><br><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">CircleCI Documentation</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="../../../index.html" property="cc:attributionName" rel="cc:attributionURL">CircleCI</a> is licensed under a <a rel="noopener noreferrer" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.
</div>

</footer>

				
			</article>
		</div>
<!-- .article-container -->
	</div>
<!-- .main-body -->
	<footer class="footer" data-analytics="clicked-footer" data-analytics-parent>
  <div class="container">
    <div class="row">
      <nav>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Product</h6>
          <ul class="list-unstyled">
            <li><a href="../../../../product/index.html" data-analytics-child='{ "menu": "product" }'>Overview</a></li>
            <li><a href="../../../../pricing/index.html" data-analytics-child='{ "menu": "pricing" }'>Pricing</a></li>
            <li><a href="../../../../integrations/index.html" data-analytics-child='{ "menu": "integrations" }'>Integrations</a></li>
            <li><a href="../../../../open-source/index.html" data-analytics-child='{ "menu": "open-source" }'>Open Source</a></li>
            <li><a href="../../../../enterprise/index.html" data-analytics-child='{ "menu": "enterprise" }'>Enterprise</a></li>
            <li><a href="../../../../changelog/index.html" data-analytics-child='{ "menu": "changelog" }'>Changelog</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Support</h6>
          <ul class="list-unstyled">
            <li><a href="https://academy.circleci.com/?access_code=public-2020" data-analytics-child='{ "menu": "training" }' target="_blank" rel="noopener noreferrer">Training</a></li>
            <li><a href="https://support.circleci.com/hc/en-us" data-analytics-child='{ "menu": "get-support" }' target="_blank" rel="noopener noreferrer">Get Support</a></li>
            <li><a href="https://discuss.circleci.com/" data-analytics-child='{ "menu": "community-forum" }' target="_blank" rel="noopener noreferrer">Community Forum</a></li>
            <li><a href="https://status.circleci.com/" data-analytics-child='{ "menu": "system-status" }' target="_blank" rel="noopener noreferrer">System Status</a></li>
            <li><a href="https://ideas.circleci.com/" data-analytics-child='{ "menu": "feature-requests" }' target="_blank" rel="noopener noreferrer">Feature Requests</a></li>
            <li><a href="../../../../support/premium-support/index.html" data-analytics-child='{ "menu": "premium-support" }'>Premium Support</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Resources</h6>
          <ul class="list-unstyled">
            <li><a href="../../../../blog/index.html" data-analytics-child='{ "menu": "blog" }'>Blog</a></li>
            <li><a href="../../../../customers/index.html" data-analytics-child='{ "menu": "case-studies" }'>Case Studies</a></li>
            <li><a href="../../../../resources/index.html#white-papers" data-analytics-child='{ "menu": "white-papers" }'>White Papers</a></li>
            <li><a href="../../../../resources/events/index.html" data-analytics-child='{ "menu": "events" }'>Events</a></li>
            <li><a href="../../../../resources/index.html#webinars" data-analytics-child='{ "menu": "webinars" }'>Webinars</a></li>
            <li><a href="../../../../resources/index.html#videos" data-analytics-child='{ "menu": "videos" }'>Videos</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Company</h6>
          <ul class="list-unstyled">
            <li><a href="../../../../about/index.html" data-analytics-child='{ "menu": "about-us" }'>About Us</a></li>
            <li><a href="../../../../careers/index.html" data-analytics-child='{ "menu": "careers" }'>Careers <span class="text-blue">(We're hiring!)</span></a></li>
            <li><a href="../../../../about/team/index.html" data-analytics-child='{ "menu": "team" }'>Team</a></li>
            <li><a href="../../../../contact/index.html" data-analytics-child='{ "menu": "contact-us" }'>Contact Us</a></li>
            <li><a href="../../../../partners/index.html" data-analytics-child='{ "menu": "partner-with-us" }'>Partner With Us</a></li>
            <li><a href="../../../../newsroom/index.html" data-analytics-child='{ "menu": "newsroom" }'>Newsroom</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Getting Started</h6>
          <ul>
            <li><a href="../../../../continuous-integration/index.html" data-analytics-child='{ "menu": "what-is-ci" }'>What is CI?</a></li>
            <li><a href="../../../2.0/index.html" data-analytics-child='{ "menu": "how-to-get-started" }'>How to get started on CircleCI</a></li>
          </ul>
        </div>
      </nav>
    </div>
    <div class="row margin-top-medium">
      <div class="col-md-2 col-xs-4">
        <img src="../../../assets/img/logos/logo-wordmark.svg" class="logo-small margin-top-small" alt="circleci">
      </div>
      <div class="col-md-4 col-md-offset-6 col-xs-offset-0 col-xs-8">
        <div class="text-center-small-float-right">
          <div class="social-container row">
  <div class="social-btns col-xs-12">
    <a href="../../../../blog/feed.xml" class="social-btn-rss" title="RSS">
      <i class="fa fa-rss" aria-hidden="true"></i><span class="sr-only">RSS</span>
    </a>
    <a href="https://www.facebook.com/circleci" target="_blank" class="social-btn-facebook" title="Facebook" rel="noopener noreferrer">
      <i class="fa fa-facebook-official" aria-hidden="true"></i><span class="sr-only">Facebook</span>
    </a>
    <a href="https://twitter.com/circleci" target="_blank" class="social-btn-twitter" title="Twitter" rel="noopener noreferrer">
      <i class="fa fa-twitter" aria-hidden="true"></i><span class="sr-only">Twitter</span>
    </a>
    <a href="https://github.com/circleci" target="_blank" class="social-btn-github" title="GitHub" rel="noopener noreferrer">
      <i class="fa fa-github" aria-hidden="true"></i><span class="sr-only">GitHub</span>
    </a>
    <a href="https://www.linkedin.com/company/circleci" target="_blank" class="social-btn-linkedin" title="LinkedIn" rel="noopener noreferrer">
      <i class="fa fa-linkedin" aria-hidden="true"></i><span class="sr-only">LinkedIn</span>
    </a>
  </div>
</div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="margin-top-small text-center-small-float-left">
          <nav>
            <ul class="horizontal blue">
              <li><a href="../../../../terms-of-service/index.html" data-analytics-child='{ "menu": "terms-of-service" }'>Terms of Service</a></li>
              <li><a href="../../../../privacy/index.html" data-analytics-child='{ "menu": "privacy-policy" }'>Privacy Policy</a></li>
              <li><a href="../../../../legal/cookie-policy/index.html" data-analytics-child='{ "menu": "cookie-policy" }'>Cookie Policy</a></li>
              <li><a href="../../../../security/index.html" data-analytics-child='{ "menu": "security" }'>Security</a></li>
              <li class="language-select">
                <div id="dropUp" class="dropup show">
                  <a class="dropdown-toggle" role="button" id="footerLangSelect" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="../../../assets/img/docs/ic-globe.svg" alt="globe" width="20"><span id="footerLangCurrentSelect"> English (US)</span><i class="fa fa-angle-up"></i></a>
                  <div id="footerLangOptions" class="dropdown-menu hidden" aria-labelledby="footerLangSelect">
                    <a class="dropdown-item active" href="../../../../index.html">English (US)</a>
                    <a class="dropdown-item" href="https://circleci.jp/" data-analytics-child='{ "menu": "japan" }' target="_blank" rel="noopener noreferrer">日本語</a>
                  </div>
                </div>
              </li>
            </ul>
          </nav>
        </div>
        <div class="margin-top-small text-center-small-float-right">
          <span>Copyright © 2020 Circle Internet Services, Inc., All Rights Reserved.</span>
        </div>
      </div>
    </div>
  </div>
</footer>

	<script type="text/javascript">
  window.circleJsConfig = {
    algolia: {
      appId:     "U0RXNGRK45",
      apiKey:    "dd49f5b81d238d474b49645a4daed322",
      indexName: "documentation"
    },
    page: {
      lang: "ja"
    }
  }
</script>

	<script src="../../../assets/vendor.min-46c6ef6945f9a0cdfc67de4e703b0455bdce1dd542a20929856bc7780cec5eea.js" type="text/javascript" integrity="sha256-RsbvaUX5oM38Z95OcDsEVb3OHdVCogkphWvHeAzsXuo=" crossorigin="anonymous"></script>
  <script>
   var _rollbarConfig = {
     accessToken: 'a22956bf457a40e5a9ae6fd842d97392',
     captureUncaught: true,
     captureUnhandledRejections: true,
     payload: { environment: "production" }
   };
   // Rollbar Snippet
   !function(r){function e(n){if(o[n])return o[n].exports;var t=o[n]={exports:{},id:n,loaded:!1};return r[n].call(t.exports,t,t.exports,e),t.loaded=!0,t.exports}var o={};return e.m=r,e.c=o,e.p="",e(0)}([function(r,e,o){"use strict";var n=o(1),t=o(4);_rollbarConfig=_rollbarConfig||{},_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||"https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.4.6/rollbar.min.js",_rollbarConfig.async=void 0===_rollbarConfig.async||_rollbarConfig.async;var a=n.setupShim(window,_rollbarConfig),l=t(_rollbarConfig);window.rollbar=n.Rollbar,a.loadFull(window,document,!_rollbarConfig.async,_rollbarConfig,l)},function(r,e,o){"use strict";function n(r){return function(){try{return r.apply(this,arguments)}catch(r){try{console.error("[Rollbar]: Internal error",r)}catch(r){}}}}function t(r,e){this.options=r,this._rollbarOldOnError=null;var o=s++;this.shimId=function(){return o},"undefined"!=typeof window&&window._rollbarShims&&(window._rollbarShims[o]={handler:e,messages:[]})}function a(r,e){if(r){var o=e.globalAlias||"Rollbar";if("object"==typeof r[o])return r[o];r._rollbarShims={},r._rollbarWrappedError=null;var t=new p(e);return n(function(){e.captureUncaught&&(t._rollbarOldOnError=r.onerror,i.captureUncaughtExceptions(r,t,!0),i.wrapGlobals(r,t,!0)),e.captureUnhandledRejections&&i.captureUnhandledRejections(r,t,!0);var n=e.autoInstrument;return e.enabled!==!1&&(void 0===n||n===!0||"object"==typeof n&&n.network)&&r.addEventListener&&(r.addEventListener("load",t.captureLoad.bind(t)),r.addEventListener("DOMContentLoaded",t.captureDomContentLoaded.bind(t))),r[o]=t,t})()}}function l(r){return n(function(){var e=this,o=Array.prototype.slice.call(arguments,0),n={shim:e,method:r,args:o,ts:new Date};window._rollbarShims[this.shimId()].messages.push(n)})}var i=o(2),s=0,d=o(3),c=function(r,e){return new t(r,e)},p=function(r){return new d(c,r)};t.prototype.loadFull=function(r,e,o,t,a){var l=function(){var e;if(void 0===r._rollbarDidLoad){e=new Error("rollbar.js did not load");for(var o,n,t,l,i=0;o=r._rollbarShims[i++];)for(o=o.messages||[];n=o.shift();)for(t=n.args||[],i=0;i<t.length;++i)if(l=t[i],"function"==typeof l){l(e);break}}"function"==typeof a&&a(e)},i=!1,s=e.createElement("script"),d=e.getElementsByTagName("script")[0],c=d.parentNode;s.crossOrigin="",s.src=t.rollbarJsUrl,o||(s.async=!0),s.onload=s.onreadystatechange=n(function(){if(!(i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){s.onload=s.onreadystatechange=null;try{c.removeChild(s)}catch(r){}i=!0,l()}}),c.insertBefore(s,d)},t.prototype.wrap=function(r,e,o){try{var n;if(n="function"==typeof e?e:function(){return e||{}},"function"!=typeof r)return r;if(r._isWrap)return r;if(!r._rollbar_wrapped&&(r._rollbar_wrapped=function(){o&&"function"==typeof o&&o.apply(this,arguments);try{return r.apply(this,arguments)}catch(o){var e=o;throw e&&("string"==typeof e&&(e=new String(e)),e._rollbarContext=n()||{},e._rollbarContext._wrappedSource=r.toString(),window._rollbarWrappedError=e),e}},r._rollbar_wrapped._isWrap=!0,r.hasOwnProperty))for(var t in r)r.hasOwnProperty(t)&&(r._rollbar_wrapped[t]=r[t]);return r._rollbar_wrapped}catch(e){return r}};for(var u="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,captureEvent,captureDomContentLoaded,captureLoad".split(","),f=0;f<u.length;++f)t.prototype[u[f]]=l(u[f]);r.exports={setupShim:a,Rollbar:p}},function(r,e){"use strict";function o(r,e,o){if(r){var t;if("function"==typeof e._rollbarOldOnError)t=e._rollbarOldOnError;else if(r.onerror){for(t=r.onerror;t._rollbarOldOnError;)t=t._rollbarOldOnError;e._rollbarOldOnError=t}var a=function(){var o=Array.prototype.slice.call(arguments,0);n(r,e,t,o)};o&&(a._rollbarOldOnError=t),r.onerror=a}}function n(r,e,o,n){r._rollbarWrappedError&&(n[4]||(n[4]=r._rollbarWrappedError),n[5]||(n[5]=r._rollbarWrappedError._rollbarContext),r._rollbarWrappedError=null),e.handleUncaughtException.apply(e,n),o&&o.apply(r,n)}function t(r,e,o){if(r){"function"==typeof r._rollbarURH&&r._rollbarURH.belongsToShim&&r.removeEventListener("unhandledrejection",r._rollbarURH);var n=function(r){var o,n,t;try{o=r.reason}catch(r){o=void 0}try{n=r.promise}catch(r){n="[unhandledrejection] error getting `promise` from event"}try{t=r.detail,!o&&t&&(o=t.reason,n=t.promise)}catch(r){t="[unhandledrejection] error getting `detail` from event"}o||(o="[unhandledrejection] error getting `reason` from event"),e&&e.handleUnhandledRejection&&e.handleUnhandledRejection(o,n)};n.belongsToShim=o,r._rollbarURH=n,r.addEventListener("unhandledrejection",n)}}function a(r,e,o){if(r){var n,t,a="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(n=0;n<a.length;++n)t=a[n],r[t]&&r[t].prototype&&l(e,r[t].prototype,o)}}function l(r,e,o){if(e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){for(var n=e.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var t=function(e,o,t){n.call(this,e,r.wrap(o),t)};t._rollbarOldAdd=n,t.belongsToShim=o,e.addEventListener=t;for(var a=e.removeEventListener;a._rollbarOldRemove&&a.belongsToShim;)a=a._rollbarOldRemove;var l=function(r,e,o){a.call(this,r,e&&e._rollbar_wrapped||e,o)};l._rollbarOldRemove=a,l.belongsToShim=o,e.removeEventListener=l}}r.exports={captureUncaughtExceptions:o,captureUnhandledRejections:t,wrapGlobals:a}},function(r,e){"use strict";function o(r,e){this.impl=r(e,this),this.options=e,n(o.prototype)}function n(r){for(var e=function(r){return function(){var e=Array.prototype.slice.call(arguments,0);if(this.impl[r])return this.impl[r].apply(this.impl,e)}},o="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureEvent,captureDomContentLoaded,captureLoad".split(","),n=0;n<o.length;n++)r[o[n]]=e(o[n])}o.prototype._swapAndProcessMessages=function(r,e){this.impl=r(this.options);for(var o,n,t;o=e.shift();)n=o.method,t=o.args,this[n]&&"function"==typeof this[n]&&("captureDomContentLoaded"===n||"captureLoad"===n?this[n].apply(this,[t[0],o.ts]):this[n].apply(this,t));return this},r.exports=o},function(r,e){"use strict";r.exports=function(r){return function(e){if(!e&&!window._rollbarInitialized){r=r||{};for(var o,n,t=r.globalAlias||"Rollbar",a=window.rollbar,l=function(r){return new a(r)},i=0;o=window._rollbarShims[i++];)n||(n=o.handler),o.handler._swapAndProcessMessages(l,o.messages);window[t]=n,window._rollbarInitialized=!0}}}}]);
   // End Rollbar Snippet
  </script>
	<script src="../../../assets/app.bundle-39c4c8373f23380ce468959b35450ba78495190930364bdd1fb5cc8266c1c25c.js" type="text/javascript" integrity="sha256-OcTINz8jOAzkaJWbNUULp4SVGQkwNkvdH7XMgmbBwlw=" crossorigin="anonymous"></script>
	<script src="../../../assets/site.min-5dca5826d2887861d12454f756244af66e3929e7662ff356e2104f89ad1df744.js" type="text/javascript" integrity="sha256-XcpYJtKIeGHRJFT3ViRK9m45KedmL/NW4hBPia0d90Q=" crossorigin="anonymous"></script>
	<script src="../../../assets/jquery.cookie.min-3253943aafe4028f7cb10dc6c158ce36221a7cda383b2edd26ab0b0fbf1a3d0c.js" type="text/javascript" integrity="sha256-MlOUOq/kAo98sQ3GwVjONiIafNo4Oy7dJqsLD78aPQw=" crossorigin="anonymous"></script>
	<script src="../../../assets/main-bb96e0cbdf3fdb37536858886e31ada7c5b8fa23791db0263287c65816a3ca53.js" type="text/javascript" integrity="sha256-u5bgy98/2zdTaFiIbjGtp8W4+iN5HbAmMofGWBajylM=" crossorigin="anonymous"></script>
	<script src="../../../assets/nav-3f9f94d0fb345df7fb7e1e6c742cb13febe8ade5de6e915e3ef6a9c1101794f8.js" type="text/javascript" integrity="sha256-P5+U0Ps0Xff7fh5sdCyxP+voreXebpFePvapwRAXlPg=" crossorigin="anonymous"></script>
	<script src="../../../assets/shared/analytics-recursive-tracking-4d73c7a12ba7386ca1f5e9166378dcb9ccfd0733111c1e78c0d7b66874bab7c5.js" type="text/javascript" integrity="sha256-TXPHoSunOGyh9ekWY3jcucz9BzMRHB54wNe2aHS6t8U=" crossorigin="anonymous"></script>
	<script type="text/javascript" src="../../../../../cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
</div><!-- .outter -->
</body>

<!-- Mirrored from circleci.com/docs/ja/2.0/configuration-reference/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Jun 2020 07:52:55 GMT -->
</html>
