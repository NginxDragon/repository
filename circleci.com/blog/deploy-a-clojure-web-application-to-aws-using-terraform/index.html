<!DOCTYPE html>
<html lang="en">
  
<!-- Mirrored from circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Jun 2020 08:09:31 GMT -->
<head>
    
      <title>Deploy with Terraform to AWS - Deploy a Clojure app | CircleCI</title>
    

    <script id="Cookiebot" src="../../../consent.cookiebot.com/uc.js" data-cbid="a28b71f3-4d2e-4eac-93bc-34929948dd7d" type="text/javascript" async></script>
    <script src="../../../cdn.optimizely.com/js/8188917468.js" data-cookieconsent="statistics" type="text/plain"></script>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link href="../feed.xml" type="application/rss+xml" rel="alternate" title="Latest 10 blog posts (atom)">

    <link rel="apple-touch-icon" sizes="180x180" href="../../../d3r49iyjzglexf.cloudfront.net/apple-touch-icon-f1ef1fb6f37fe36fdacd2dfdc11fb2edf1720083a9aa8648eeac81f0a69e8da8.png">
<link rel="icon" type="image/png" sizes="512x512" href="../../../d3r49iyjzglexf.cloudfront.net/android-chrome-512x512-636549fcf54150d3184aa6e8395d79ca9bcdc9278210e947ce093372cc2004a4.png">
<link rel="icon" type="image/png" sizes="192x192" href="../../../d3r49iyjzglexf.cloudfront.net/android-chrome-192x192-daa316a62fc466bc7bbff9118d8bd8a358c4b1d934629eedc0e5b87c9bf6a6f0.png">
<link rel="icon" type="image/png" sizes="150x150" href="../../../d3r49iyjzglexf.cloudfront.net/android-chrome-192x192-daa316a62fc466bc7bbff9118d8bd8a358c4b1d934629eedc0e5b87c9bf6a6f0.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../d3r49iyjzglexf.cloudfront.net/favicon-32x32-86c07d561af62a6d412c5465d401ebf50a8f304d97c165e30feb71868b891c7c.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../d3r49iyjzglexf.cloudfront.net/favicon-16x16-2f395f301d4ee767c0016c98f97561dc2ec4ddbae39cc895c9840a22467df08a.png">
<link rel="manifest" href="https://d3r49iyjzglexf.cloudfront.net/site-90f0e3ca8a56223e86328049af75ddd9e6e4a6fdac600d0773f54f95e531f0cd.webmanifest">
<link rel="mask-icon" href="https://d3r49iyjzglexf.cloudfront.net/safari-pinned-tab-251836a3ead2fbbebdd673dd680e8b01f1d8e5889cb3641a16893ad344f17d4a.svg" color="#04aa51">
<link rel="shortcut icon" href="https://d3r49iyjzglexf.cloudfront.net/favicon-7821a60418a7ee3a7570d938fb95e809903dbfca7514b9245f1beef5d00da2d8.ico">
<meta name="apple-mobile-web-app-title" content="CircleCI">
<meta name="application-name" content="CircleCI">
<meta name="msapplication-TileColor" content="#161616">
<meta name="msapplication-square150x150logo" content="https://d3r49iyjzglexf.cloudfront.net/mstile-150x150-e0e68b19614d1b594800947225d05483564336ec629d74afb53cf3fe9d634d2a.png" />
<meta name="theme-color" content="#ffffff">
    


    










  
  
  <link rel="alternate" hreflang="en" href="index.html">



    <!-- adding canonical links, if they are specified in front matter /-->
    

    <link type="text/css" rel="stylesheet" href="../../../d3r49iyjzglexf.cloudfront.net/vendor-9130b6026c6317f2286994e037f189b0850a60286866eeb5039e622081496148.css">
    <link type="text/css" rel="stylesheet" href="../../../d3r49iyjzglexf.cloudfront.net/vendors/lity-b8b6faa63fb76d33ead3adfe0a9148e43ea51ca7c3a5faa008b88ab2ffe321ef.css">
    <link type="text/css" rel="stylesheet" href="../../../d3r49iyjzglexf.cloudfront.net/site-ef68796b9d5ee51b18504a38de8cbadc65de3a7bb274ac980510d0ce2018f9d1.css">
    
    
    
    

<script type="text/javascript">
  (function () {
    var categoryOverride = null || null;
    var nameOverride     = null;

    var pageUrlParts = "/blog/deploy-a-clojure-web-application-to-aws-using-terraform/".split('../../index.html').slice(1, -1);

    // store as globals to read off of it later in analytics.js
    window.analyticsPageProperties = {
      categoryOverride: categoryOverride,
      nameOverride: nameOverride,
      pageUrlParts: pageUrlParts,
    };
  })();

  window.thirdPartyIds = {
    
  };

  window.circleJsConfig = {
    algolia: {
      appId:     "U0RXNGRK45",
      apiKey:    "dd49f5b81d238d474b49645a4daed322",
      indexName: "blog"
    },
    page: {
      lang: "en"
    },
    env: "production"
  };
</script>

    
      <script>
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";}}();
</script>
<script data-cookieconsent="statistics" type="text/plain">
  analytics.load("AbgkrgN4cbRhAVEwlzMkHbwvrXnxHh35");
</script>

      <!-- Start of Async Drift Code -->
<script>
  "use strict";
  !function() {
    var t = window.driftt = window.drift = window.driftt || [];
    if (!t.init) {
      if (t.invoked) return void (window.console && console.error && console.error("Drift snippet included twice."));
      t.invoked = !0, t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ],
      t.factory = function(e) {
        return function() {
          var n = Array.prototype.slice.call(arguments);
          return n.unshift(e), t.push(n), t;
        };
      }, t.methods.forEach(function(e) {
        t[e] = t.factory(e);
      }), t.load = function(t) {
        var e = 3e5, n = Math.ceil(new Date() / e) * e, o = document.createElement("script");
        o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + n + "/" + t + ".js";
        var i = document.getElementsByTagName("script")[0];
        i.parentNode.insertBefore(o, i);
      };
    }
  }();
  drift.SNIPPET_VERSION = '0.3.1';
  drift.load('4hpgak4w2mc8');
  var events = [
    {
    driftEvent: 'sidebarOpen',
    eventName: 'opened_chat'
    },
    {
    driftEvent: 'sidebarClose',
    eventName: 'closed_chat'
    },
    {
    driftEvent: 'message:sent',
    eventName: 'message_sent_visitor'
    },
    {
    driftEvent: 'message',
    eventName: 'message_sent_team'
    },
    {
    driftEvent: 'emailCapture',
    eventName: 'captured_email'
    },
    {
    driftEvent: 'scheduling:requestMeeting',
    eventName: 'scheduled_meeting'
    },
    {
    driftEvent: 'scheduling:meetingBooked',
    eventName: 'meeting_invite_sent'
    },
    {
    driftEvent: 'conversation:playbookDismissed',
    eventName: 'closed_greeting'
    },
    {
    driftEvent: 'conversation:playbookClicked',
    eventName: 'clicked_chatbot'
    },
    {
    driftEvent: 'conversation:buttonClicked',
    eventName: 'clicked_button'
    },
    {
    driftEvent: 'conversation:firstInteraction',
    eventName: 'first_interaction'
    },
  ];
  events.map(event => {
    drift.on(event.driftEvent, function(data) {
      var driftAnalyticsProps = {
        name: event.eventName,
        category: 'drift'
      }
      var eventProps = Object.assign({}, analyticsTrackProps(), driftAnalyticsProps);
      trackEvent('drift-interaction', eventProps);
    });
  });
</script>
<!-- End of Async Drift Code -->

    
    


































  <title>Deploy a Clojure web application to AWS using Terraform - CircleCI</title>



  <meta property="og:title" content="Deploy a Clojure web application to AWS using Terraform" />



  <meta name="description" content="In this post, we will be focusing on how to use HashiCorp Terraform to stand up a fairly complex infrastructure to host our web application Docker containers with a PostgreSQL container and then use CircleCI to deploy to our infrastructure with zero downtime." />
  <meta property="og:description" content="In this post, we will be focusing on how to use HashiCorp Terraform to stand up a fairly complex infrastructure to host our web application Docker containers with a PostgreSQL container and then use CircleCI to deploy to our infrastructure with zero downtime." />



  <link rel="canonical" href="index.html" />
  <meta property="og:url" content="https://circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/" />



  <meta property="og:site_name" content="CircleCI" />



<meta property="og:image" content="https://circleci.com/blog/media/Tutorial-Advanced-A.jpg" />
  
  





  <meta property="og:type" content="article" />
  <meta property="article:published_time" content="2019-06-27T06:01:00-07:00" />






  
    <meta name="twitter:card" content="summary_large_image" />
  

  <meta name="twitter:site" content="@circleci" />

  
    <meta name="twitter:creator" content="@chris-howe-jones" />
  






<script type="application/ld+json">
  {
    "@context": "http://schema.org",


    "@type": "BlogPosting",





    "headline": "Deploy a Clojure web application to AWS using Terraform",



    "image": "https://circleci.com/blog/media/Tutorial-Advanced-A.jpg",



    "datePublished": "2019-06-27T06:01:00-07:00",



    "description": "In this post, we will be focusing on how to use HashiCorp Terraform to stand up a fairly complex infrastructure to host our web application Docker containers with a PostgreSQL container and then use CircleCI to deploy to our infrastructure with zero downtime.",



    "logo": "https://d3r49iyjzglexf.cloudfront.net/circleci-logo-stacked-fb-657e221fda1646a7e652c09c9fbfb2b0feb5d710089bb4d8e8c759d37a832694.png",




    "url": "https://circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/"
  }
</script>

<!-- End Jekyll SEO tag -->

  </head>
  <body class="page-blog post ">
    <noscript><iframe src="http://www.googletagmanager.com/ns.html?id=GTM-W9HDVK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script data-cookieconsent="marketing" type="text/plain">
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '../../../www.googletagmanager.com/gtm5445.html?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-W9HDVK');
</script>

    <script id="modal-objects">
var modals = {
  'generic': {
    header: "Thank You",
    content: "We will process your request as soon as possible."
  },
  'error': {
    header: "There's been an error.",
    content: "It looks like there was a problem in processing your request. This may be due to a script blocker add-on, or other setting that blocks JavaScript from functioning. If you have a script blocker or something similar, please turn it off to ensure an optimal experience.<br><br>"
  },
  'selfProvision': {
    header: "Thank You",
    content: "We are processing your trial request and will email you your trial key. In the meantime, check out our <a href='https://circleci.com/docs/enterprise/single-box/'>installation documentation</a>.",
    execute: function () {
      trackEvent("enterprise-install-submitted", analyticsTrackProps());
    }
  },
  'unsubscribe': {
    header: "Thank You",
    content: "You have successfully unsubscribed from our list, and will no longer receive OS X image and feature updates."
  },
  // /contact-us
  'enterpriseContactThankYou': {
    header: "Thank you!",
    content: "We'll be in touch within one business day."
  },
  // /enterprise-trial-install (SPT form "other questions" option)
  'enterpriseSPTOtherQuestionsThankYou': {
    header: "Thank you!",
    content: "We'll be in touch within one business day."
  },
  'enterpriseSPTTrial': {
    header: "Thank you for signing up for a trial!",
    content: "A member of our solutions team will get back to you shortly to get your trial kicked off.<br><br>"
  },
  'subscribe': {
    header: "Thank you",
    content: "The latest news in software development and engineering productivity coming your way."
  },
  'partnershipConfirm': {
    header: "Thank you for your interest",
    content: "A member of our partnerships team will be in touch with you shortly."
  },
  'governmentConfirm': {
    header: "Thank you for your interest",
    content: "A member of our Government team will be in touch with you shortly."
  },
  'reportEmail': {
    header: "Thank You",
    content: "The report has been sent to the email address provided."
  },
  'usageEarlyAccess': {
    header: "Thank You",
    content: "We'll be in touch."
  },
   'NewPlanAvailability': {
    header: "Thank you for your interest",
    content: "We will be in touch when the new plan is available."
  }
};

// This is a no-op change to bump the file hash; see CIRCLE-14243. You may remove 
// this if you are making other changes to this file, but DO NOT remove it without
// changing something else that will alter the file hash (comments are not
// enough FYI).
var __dummy = '12345';

</script>

    
      







<nav class="blog-nav navbar navbar-fixed-top navbar-default" data-analytics="clicked-blog-top-nav" data-analytics-parent>
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#blog-subnav" aria-expanded="false" aria-controls="blog-subnav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>

      <div class="navbar-brand">
        
        
          <div class="blog-nav-title">
  <a href="../index.html"
    data-analytics-child='{ "menu": "blog-nav", "cta_text": "circleci_logo" }'>
    <img src="https://d3r49iyjzglexf.cloudfront.net/logo-wordmark-black-7fec8eb34f3f7d8a2d75b22e789bca438ae7f6174a7949784054e726c5acdccb.svg" class="logo" alt="CircleCI" />
  </a>
  Blog
</div>
        
      </div>
    </div>

    <div class="nav-extra-links hidden-xs">
      
  <a href="../../docs/index.html" data-analytics-child='{ "menu": "blog-nav", "cta_text": "documentation" }'>
    Documentation&nbsp;&nbsp;







<i class="fa fa-external-link " aria-hidden="true" title="External Link" >
  <span class="sr-only">External Link</span>
</i>

  </a>

      
  <a href="../../index.html" data-analytics-child='{ "menu": "blog-nav", "cta_text": "circleci.com" }'>
    circleci.com&nbsp;&nbsp;







<i class="fa fa-external-link " aria-hidden="true" title="External Link" >
  <span class="sr-only">External Link</span>
</i>

  </a>

    </div>

    <div class="collapse navbar-collapse blog-subnav" id="blog-subnav">
      <div class="flex">
        <ul class="tag-bar nav navbar-nav">
          <li class="search-button-wrapper">
            <a role="button" href="#search-form" aria-expanded="false" aria-controls="search-form">
              







<i class="fa fa-search " aria-hidden="true" title="Search" >
  <span class="sr-only">Search</span>
</i>

              <span class="hint-text">
                Search CircleCI blog
              </span>
            </a>
          </li>
          
          
            
            <li >
              <a href="../tag/tutorials/index.html"
                data-analytics-child='{ "menu": "blog-category", "cta_text": "tutorials" }'>
                Tutorials
              </a>
            </li>
          
            
            <li >
              <a href="../tag/testing/index.html"
                data-analytics-child='{ "menu": "blog-category", "cta_text": "testing" }'>
                Testing
              </a>
            </li>
          
            
            <li >
              <a href="../tag/integrations/index.html"
                data-analytics-child='{ "menu": "blog-category", "cta_text": "integrations" }'>
                Integrations
              </a>
            </li>
          
            
            <li >
              <a href="../tag/operations/index.html"
                data-analytics-child='{ "menu": "blog-category", "cta_text": "operations" }'>
                Operations
              </a>
            </li>
          
            
            <li >
              <a href="../tag/open-source/index.html"
                data-analytics-child='{ "menu": "blog-category", "cta_text": "open-source" }'>
                Open Source
              </a>
            </li>
          
            
            <li >
              <a href="../tag/people/index.html"
                data-analytics-child='{ "menu": "blog-category", "cta_text": "people" }'>
                People
              </a>
            </li>
          
        </ul>
        <div class="hidden-xs button-wrapper">
          
  <a
    href="../../signup/index.html"
    class="button-solid nav-size initial"
    data-analytics-child='{ "menu": "blog-nav", "cta_text": "signup_button" }'
  >
    Start Building for Free
  </a>

        </div>
      </div>
      <div class="visible-xs">
        <ul class="nav-extra-links nav navbar-nav">
          <li>
  <a href="../../docs/index.html" data-analytics-child='{ "menu": "blog-nav", "cta_text": "documentation" }'>
    Documentation&nbsp;&nbsp;







<i class="fa fa-external-link " aria-hidden="true" title="External Link" >
  <span class="sr-only">External Link</span>
</i>

  </a>
</li>
          <li>
  <a href="../../index.html" data-analytics-child='{ "menu": "blog-nav", "cta_text": "circleci.com" }'>
    circleci.com&nbsp;&nbsp;







<i class="fa fa-external-link " aria-hidden="true" title="External Link" >
  <span class="sr-only">External Link</span>
</i>

  </a>
</li>
        </ul>
        <div class="nav-footer">
          
  <a
    href="../../signup/index.html"
    class="button-solid nav-size initial"
    data-analytics-child='{ "menu": "blog-nav", "cta_text": "signup_button" }'
  >
    Start Building for Free
  </a>

        </div>
      </div>
      <form action="https://circleci.com/blog/" method="get" class="search-form collapse" id="search-form">
        <label for="search-query" class="sr-only">
          







<i class="fa fa-search " aria-hidden="true" title="Search" >
  <span class="sr-only">Search</span>
</i>

        </label>
        <input type="text" name="query" class="search-query" placeholder="Search blog post titles, headings, and content...">
        <input type="submit" class="sr-only" value="Search">
        <a href="#" role="button" class="search-cancel-btn">
          







<i class="fa fa-times " aria-hidden="true" title="Cancel" >
  <span class="sr-only">Cancel</span>
</i>

        </a>
      </form>
    </div>
  </div>
</nav>

    

    <main id="main">
      
      <div id="search-results-container" class="container" style="display: none;">
  <div class="search-results-metadata">
    <span class="search-results-for">
      Showing
      <span class="search-results-count"></span>
      results for:
    </span>
    <input type="text" class="search-query" tabindex="-1"></input>
  </div>

  <div class="search-results"></div>

  <div id="search-result-template" style="display: none;">
    <div class="search-result">
      <a href="#" class="post-link">
        <h2 class="post-title"></h2>
      </a>

      <p class="post-author-info">
        By
        <span class="post-author-byline"></span>
      </p>

      <p>
        <span class="post-date"></span>
        &mdash;
        <span class="post-summary"></span>
      </p>

      <ul class="post-tags">
      </ul>
    </div>
  </div>

  <ul id="search-result-tag-template" style="display: none;">
    <li>
      <a class="tag" href="#" data-link-prefix="/blog/tag/"></a>
    </li>
  </ul>
</div>

<article class="blog-post">
  <header>
    <div class="container">
      <div class="row">
        <div class="readable-width">
          

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jun 27, 2019</span>
    
    
      <span class="post-read-time">18 min read</span>
    
  </span>
</p>

          <h1>Deploy a Clojure web application to AWS using Terraform</h1>
          









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/chris-howe-jones-af0c7805c168ff0a4d1a4efcf4fde86f2df84a8fff2c516f09ad543897cc193c.jpg" alt="Chris Howe-Jones" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Chris Howe-Jones


      </span>
      <br>
      <span class="post-author-role">
        Software Architect
      </span>
    </p>
  </div>
</div>

          <div class="post-hero">
            





<img src="../media/Tutorial-Advanced-A.jpg" alt="" />

          </div>
        </div>
      </div>
    </div>
  </header>
  <div class="container">
    <div class="row">
      <div class="post-share-buttons">
        





<div class="social-btns share-buttons">
  <a href="https://twitter.com/intent/tweet?text=Deploy%20a%20Clojure%20web%20application%20to%20AWS%20using%20Terraform&amp;url=https://circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/&amp;via=circleci&amp;related=circleci"
    class="popout"
    rel="nofollow"
    target="_blank" rel="noreferrer noopener"
    title="Share on Twitter">
    <i class="fa fa-twitter" aria-hidden="true"></i><span class="sr-only">Share on Twitter</span>
  </a>
  <a href="https://facebook.com/sharer.php?u=https://circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/"
    class="popout"
    rel="nofollow"
    target="_blank" rel="noreferrer noopener"
    title="Share on Facebook">
    <i class="fa fa-facebook-official" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span>
  </a>
  <a href="http://www.reddit.com/submit?title=Deploy%20a%20Clojure%20web%20application%20to%20AWS%20using%20Terraform&amp;url=https://circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/"
    rel="nofollow"
    target="_blank" rel="noreferrer noopener"
    title="Share on Reddit">
    <i class="fa fa-reddit" aria-hidden="true"></i><span class="sr-only">Share on Reddit</span>
  </a>
  <a href="http://news.ycombinator.com/submitlink?t=Deploy%20a%20Clojure%20web%20application%20to%20AWS%20using%20Terraform&amp;u=https://circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/"
    rel="nofollow"
    target="_blank" rel="noreferrer noopener"
    title="Share on Hacker News">
    <i class="fa fa-hacker-news" aria-hidden="true"></i><span class="sr-only">Share on Hacker News</span>
  </a>
</div>

      </div>
      <div class="post-content">
        <p><i>This is the third blog post in a three-part series about building, testing, and deploying a Clojure web application. You can find the first post <a href="../build-a-clojure-web-app-using-duct/index.html" target="_blank" rel="noreferrer noopener">here</a> and the second <a href="../package-a-clojure-web-application-using-docker/index.html" target="_blank" rel="noreferrer noopener">here</a>.</i></p>

<p>In this post, we will be focusing on how to use <a href="https://www.terraform.io/" target="_blank" rel="noreferrer noopener">HashiCorp Terraform</a> to stand up a fairly complex infrastructure to host our web application Docker containers with a PostgreSQL container and then use CircleCI to deploy to our infrastructure with zero downtime. If you don’t want to go through the laborious task of creating the web application described in the first two posts from scratch, you can get the source by forking <a href="https://github.com/chrishowejones/blog-film-handler" target="_blank" rel="noreferrer noopener">this</a> repository and checking out the <code class="highlighter-rouge">part-2</code> branch.</p>

<p>Although we are building a Clojure application, only limited Clojure knowledge is required to follow along with this part of the series.</p>

<h2>Prerequisites</h2>

<p>In order to build this web application, you need to install the following:</p>

<ol>
  <li><a href="https://openjdk.java.net/install/" target="_blank" rel="noreferrer noopener">Java JDK 8 or greater</a> - Clojure runs on the Java Virtual Machine and is in fact just a Java library (JAR). I built this using version 8, but a greater version should work fine, too.</li>
  <li><a href="https://leiningen.org/" target="_blank" rel="noreferrer noopener">Leiningen</a> - Leiningen, usually referred to as lein (pronounced ‘line’) is the most commonly used Clojure build tool.</li>
  <li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noreferrer noopener">Git</a> - The ubiquitous distributed version control tool.</li>
  <li><a href="https://docs.docker.com/install/" target="_blank" rel="noreferrer noopener">Docker</a> - A tool designed to make it easier to create, deploy, and run applications by using containers.</li>
  <li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noreferrer noopener">Docker Compose</a> - A tool for defining and running multi-container Docker applications.</li>
  <li><a href="https://www.terraform.io/downloads.html" target="_blank" rel="noreferrer noopener">HashiCorp Terraform</a> - A tool to create and change infrastructure in a predictable and reproducible way. This blog was tested using version V0.12.2.</li>
  <li>SSH installed as a command line utility. You may need to use a search engine for instructions on how to install SSH if you don’t already have it as it’s dependent on your operating system.</li>
</ol>

<p>You will also need to sign up for:</p>

<ol>
  <li><a href="../../index.html" target="_blank" rel="noreferrer noopener">CircleCI account</a> - CircleCI is a continuous integration and delivery platform.</li>
  <li><a href="https://github.com/" target="_blank" rel="noreferrer noopener">GitHub account</a> - GitHub is a web-based hosting service for version control using Git.</li>
  <li><a href="https://hub.docker.com/" target="_blank" rel="noreferrer noopener">Docker Hub account</a> - Docker Hub is a cloud-based repository in which Docker users and partners create, test, store and distribute container images.</li>
  <li><a href="https://aws.amazon.com/" target="_blank" rel="noreferrer noopener">AWS account</a> - Amazon Web Services provides on-demand computing platforms.</li>
</ol>

<p><strong>Note:</strong> <i>The infrastructure we are going to build will involve a small cost in standing up the AWS services we require. If you leave services up for approximately one hour to complete this tutorial, the charge would be between $0.50 to $1.00.</i></p>

<p>You will also need to have set up your CircleCI, Docker Hub, and Web Application Github accounts as described in <a href="../build-a-clojure-web-app-using-duct/index.html" target="_blank" rel="noreferrer noopener">part 1</a> and <a href="../package-a-clojure-web-application-using-docker/index.html" target="_blank" rel="noreferrer noopener">part 2</a> of the series.</p>

<h2>Create an AWS account &amp; credentials</h2>

<p>First, we need to sign up for an <a href="https://portal.aws.amazon.com/billing/signup?nc2=h_ct&amp;src=header_signup&amp;redirect_url=https%3A%2F%2Faws.amazon.com%2Fregistration-confirmation#/start" target="_blank" rel="noreferrer noopener">AWS account</a>. Although you can pick the “Free” account, because of the resources we will be using there will still be a charge. You will want to tear down the infrastructure once you’ve finished and I’ll show you how to do that in this blog.</p>

<p>Once you have your AWS account, sign in as your root user. The email that you used to sign up is your username, but make sure you click <strong>login as root account</strong>. Once signed in, select <strong>IAM</strong> (Identity Access and Management) from the <strong>Services</strong> menu.</p>

<p>Select <strong>Users</strong> from the nav bar on the left side of the screen and click <strong>Add User</strong>. Create a user and make sure you give it both programmatic and console access.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550417464440_filmapp_user.png" alt="" /></p>

<p>Give the user <code class="highlighter-rouge">Administrator Access</code> either by creating a new role or by attaching the existing policy directly.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550417668465_flimapp_permissions.png" alt="" /></p>

<p>You can keep the defaults and accept everything else in the setup wizard, but make sure you take careful note of the <code class="highlighter-rouge">AWS_ACCESS_KEY_ID</code> and <code class="highlighter-rouge">AWS_SECRET_ACCESS_KEY</code> before you leave the Add user Success screen.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550417986868_filmapp_user_created.png" alt="" /></p>

<p>Once you’ve created your IAM user making a note of your account id (<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/console_account-alias.html#FindingYourAWSId">how to find your AWS account id</a>), sign out of the root user by selecting the down arrow next to the account name or number and picking ‘Sign Out’ from the drop-down.</p>
<div style="text-align: center"><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550428610811_aws_signout.png" width="250" alt="" /></div>

<p>Now sign in to your account as the newly created IAM user. If you are presented with <strong>Root user sign in</strong>, make sure to pick <strong>Sign in to a different account</strong>. Use the AWS account id that you took note of earlier, the user name you set up (filmappuser, in my example), and the password you set for management console access.</p>

<p>Once logged in, select <strong>EC2</strong> from the <strong>Services</strong> drop down and click <strong>Key Pairs</strong> in the <strong>Resources</strong> on the EC2 dashboard.</p>

<div style="text-align: center"><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550429642832_keypairs.png" width="350" alt="" /></div>

<p>Click <strong>Create Key Pair</strong> and enter a key pair name. I’ve used <code class="highlighter-rouge">film_ratings_key_pair</code> in the Terraform so if you don’t want to edit the Terraform, use that as the name. Copy the automatically downloaded <code class="highlighter-rouge">.pem</code> file to your <code class="highlighter-rouge">.ssh/</code> directory and set the permission on that file like so:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod </span>400 ~/.ssh/film_ratings_key_pair.pem
</code></pre></div></div>

<h2>Getting the application to wait for the database</h2>

<p>This step is not absolutely necessary, but it speeds up the set up of the Elastic Container Service (ECS) resources, so it’s worth doing. When the web application starts in its ECS task container, it will have to connect to the database task container via a load balancer. We will see more on this in the section below. However, it can take a few minutes for the load balancer to register the database container and if we let the web application try and connect immediately, it will fail and then ECS will have to destroy the app container and spin up a new one which takes more time.</p>

<p>To try and minimize this, we will add a <a href="https://github.com/vishnubob/wait-for-it" target="_blank" rel="noreferrer noopener">borrowed script</a> to wait for the database connection. Create a <code class="highlighter-rouge">wait-for-it.sh</code> file in the root directory of the web application project and cut-and-paste the contents of <a href="https://github.com/vishnubob/wait-for-it/blob/master/wait-for-it.sh" target="_blank" rel="noreferrer noopener">this file</a> into your newly created file.</p>

<p>Then change the <code class="highlighter-rouge">Dockerfile</code> in the film ratings web application project to read like so:</p>

<pre><code class="language-dockefile">FROM openjdk:8u181-alpine3.8

WORKDIR /

RUN apk update &amp;&amp; apk add bash

COPY wait-for-it.sh wait-for-it.sh

COPY target/film-ratings.jar film-ratings.jar
EXPOSE 3000

RUN chmod +x wait-for-it.sh

CMD ["sh", "-c", "./wait-for-it.sh --timeout=90 $DB_HOST:5432 -- java -jar film-ratings.jar"]

</code></pre>
<p>This ensures that the <code class="highlighter-rouge">wait-for-it.sh</code> script runs and repeatedly tries to connect to the <code class="highlighter-rouge">DB_HOST</code> on port 5432. If it connects within 90 seconds, it then runs <code class="highlighter-rouge">java -jar film-ratings.jar</code>.</p>

<p>Also, update the version in your <code class="highlighter-rouge">project.clj</code> file to <code class="highlighter-rouge">0.1.1</code>:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nf">defproject</span><span class="w"> </span><span class="n">film-ratings</span><span class="w"> </span><span class="s">"0.1.1"</span><span class="w">
</span><span class="n">...</span><span class="w">
</span></code></pre></div></div>

<p>Once you’ve made these changes, add and commit them to Git and push them to your GitHub repository for the film ratings project:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git add <span class="nb">.</span> <span class="nt">--all</span>
<span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Add wait for it script"</span>
<span class="o">[</span>master 45967e8] Add <span class="nb">wait </span><span class="k">for </span>it script
2 files changed, 185 insertions<span class="o">(</span>+<span class="o">)</span>, 1 deletion<span class="o">(</span>-<span class="o">)</span>
create mode 100644 wait-for-it.sh
<span class="nv">$ </span>git push
</code></pre></div></div>

<p>You can check that the CircleCI build runs OK in your CircleCI <a href="https://circleci.com/dashboard" target="_blank" rel="noreferrer noopener">dashboard</a>.</p>

<p>Now tag your change as <code class="highlighter-rouge">0.1.1</code> and <code class="highlighter-rouge">push</code> that tag so that CircleCI publishes this as the latest version:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git tag <span class="nt">-a</span> 0.1.1 <span class="nt">-m</span> <span class="s2">"v0.1.1"</span>
<span class="nv">$ </span>git push origin 0.1.1
...
 <span class="k">*</span> <span class="o">[</span>new tag]         0.1.1 -&gt; 0.1.1
</code></pre></div></div>

<p>Check on CircleCI that the <code class="highlighter-rouge">build_and_deploy</code> workflow publishes the Docker image to Docker Hub.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550478335792_build_and_deploy.png" alt="" /></p>

<h2>AWS infrastructure using Terraform</h2>

<p>We are going to use Terraform to build a production-like infrastructure in AWS. This is quite a lot of Terraform config so I am not going to walk through every resource that I’ve defined. Feel free to review the code at your leisure.</p>

<p>First, fork my <a href="https://github.com/chrishowejones/film-ratings-terraform">film-ratings-terraform</a> repo in GitHub using the Fork button to the right of the repository title and clone your forked version to your local machine.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550408728665_fork_terraform.png" alt="" /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone &lt;the github URL <span class="k">for </span>your forked version of chrishowejones/film-ratings-terraform&gt;
</code></pre></div></div>

<p>Now that you’ve forked and cloned the Terraform repository, let’s take a look at some of the important bits of it. What does the Terraform do overall?</p>

<p>The diagram below is an extremely simplified version of a few of the more important parts of the infrastructure.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550421676819_ECS%2b-%2bcropped.png" alt="Simplified AWS Infrastructure" /></p>
<div style="text-align: center"> Simplified AWS Infrastructure </div>
<p><br /></p>

<p>This shows that we are going to set up two ECS tasks called <code class="highlighter-rouge">film_ratings_app</code> and <code class="highlighter-rouge">film_ratings_db</code> that are going to run in ECS containers with two instances of the app and one of the database. The app and db tasks will run inside their own services similarly called <code class="highlighter-rouge">film_ratings_app_service</code> and <code class="highlighter-rouge">film_ratings_db_service</code>, respectively (not shown in the diagram).</p>

<p>Here are the app service and app task definitions:</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">resource</span> <span class="s2">"aws_ecs_service"</span> <span class="s2">"film_ratings_app_service"</span> <span class="p">{</span>
  <span class="nx">name</span>            <span class="p">=</span> <span class="s2">"film_ratings_app_service"</span>
  <span class="nx">iam_role</span>        <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_iam_role</span><span class="p">.</span><span class="nx">ecs-service-role</span><span class="p">.</span><span class="nx">name</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">cluster</span>         <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_ecs_cluster</span><span class="p">.</span><span class="nx">film_ratings_ecs_cluster</span><span class="p">.</span><span class="nx">id</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">task_definition</span> <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_ecs_task_definition</span><span class="p">.</span><span class="nx">film_ratings_app</span><span class="p">.</span><span class="nx">family</span><span class="k">}</span><span class="s2">:</span><span class="k">${</span><span class="nx">max</span><span class="p">(</span><span class="s2">"</span><span class="k">${</span><span class="nx">aws_ecs_task_definition</span><span class="p">.</span><span class="nx">film_ratings_app</span><span class="p">.</span><span class="nx">revision</span><span class="k">}</span><span class="s2">"</span><span class="p">,</span> <span class="s2">"</span><span class="k">${data</span><span class="p">.</span><span class="nx">aws_ecs_task_definition</span><span class="p">.</span><span class="nx">film_ratings_app</span><span class="p">.</span><span class="nx">revision</span><span class="k">}</span><span class="s2">"</span><span class="p">)</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">depends_on</span>      <span class="p">=</span> <span class="p">[</span> <span class="s2">"aws_ecs_service.film_ratings_db_service"</span><span class="p">]</span>
  <span class="nx">desired_count</span>   <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="kd">var</span><span class="p">.</span><span class="nx">desired_capacity</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">deployment_minimum_healthy_percent</span> <span class="p">=</span> <span class="s2">"50"</span>
  <span class="nx">deployment_maximum_percent</span> <span class="p">=</span> <span class="s2">"100"</span>
  <span class="nx">lifecycle</span> <span class="p">{</span>
    <span class="nx">ignore_changes</span> <span class="p">=</span> <span class="p">[</span><span class="s2">"task_definition"</span><span class="p">]</span>
  <span class="p">}</span>

  <span class="nx">load_balancer</span> <span class="p">{</span>
    <span class="nx">target_group_arn</span>  <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_alb_target_group</span><span class="p">.</span><span class="nx">film_ratings_app_target_group</span><span class="p">.</span><span class="nx">arn</span><span class="k">}</span><span class="s2">"</span>
    <span class="nx">container_port</span>    <span class="p">=</span> <span class="mi">3000</span>
    <span class="nx">container_name</span>    <span class="p">=</span> <span class="s2">"film_ratings_app"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> film-ratings-app-service.tf </div>
<p><br /></p>

<p><strong>Note:</strong> <i>The minimum healthy percentage is 50%. This allows the service to stop a container task (leaving only one running) in order to use the resource freed up to start a new version of the container task when we do rolling deployment.</i></p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">data</span> <span class="s2">"aws_ecs_task_definition"</span> <span class="s2">"film_ratings_app"</span> <span class="p">{</span>
  <span class="nx">task_definition</span> <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_ecs_task_definition</span><span class="p">.</span><span class="nx">film_ratings_app</span><span class="p">.</span><span class="nx">family</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">depends_on</span> <span class="p">=</span> <span class="p">[</span><span class="s2">"aws_ecs_task_definition.film_ratings_app"</span><span class="p">]</span>
<span class="p">}</span>

<span class="k">resource</span> <span class="s2">"aws_ecs_task_definition"</span> <span class="s2">"film_ratings_app"</span> <span class="p">{</span>
  <span class="nx">family</span>                <span class="p">=</span> <span class="s2">"film_ratings_app"</span>
  <span class="nx">container_definitions</span> <span class="p">=</span> <span class="o">&lt;&lt;</span><span class="no">DEFINITION</span><span class="sh">
[
  {
    "name": "film_ratings_app",
    "image": "${var.film_ratings_app_image}",
    "essential": true,
    "portMappings": [
      {
        "containerPort": 3000,
        "hostPort": 3000
      }
    ],
    "environment": [
      {
        "name": "DB_HOST",
        "value": "${aws_lb.film_ratings_nw_load_balancer.dns_name}"
      },
      {
        "name": "DB_PASSWORD",
        "value": "${var.db_password}"
      }
    ],
    "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "film_ratings_app",
          "awslogs-region": "${var.region}",
          "awslogs-stream-prefix": "ecs"
        }
    },
    "memory": 1024,
    "cpu": 256
  }
]
</span><span class="no">DEFINITION
</span><span class="p">}</span>
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> film-ratings-app-task-definition.tf </div>
<p><br /></p>

<p>The app instances need to communicate with the db instance via port 5432. In order to do this, they need to route their requests via a network load balancer (<code class="highlighter-rouge">film-ratings-nw-load-balancer</code>) so when we set up the <code class="highlighter-rouge">film_ratings_app</code> task, we need to pass the containers the network load balancer’s DNS name so that the application within the container can use it as the <code class="highlighter-rouge">DB_HOST</code> to talk to the database.</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">...</span>
<span class="k">resource</span> <span class="s2">"aws_lb_target_group"</span> <span class="s2">"film_ratings_db_target_group"</span> <span class="p">{</span>
  <span class="nx">name</span>                <span class="p">=</span> <span class="s2">"film-ratings-db-target-group"</span>
  <span class="nx">port</span>                <span class="p">=</span> <span class="s2">"5432"</span>
  <span class="nx">protocol</span>            <span class="p">=</span> <span class="s2">"TCP"</span>
  <span class="nx">vpc_id</span>              <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_vpc</span><span class="p">.</span><span class="nx">film_ratings_vpc</span><span class="p">.</span><span class="nx">id</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">target_type</span>         <span class="p">=</span> <span class="s2">"ip"</span>

  <span class="nx">health_check</span> <span class="p">{</span>
    <span class="nx">healthy_threshold</span>   <span class="p">=</span> <span class="s2">"3"</span>
    <span class="nx">unhealthy_threshold</span> <span class="p">=</span> <span class="s2">"3"</span>
    <span class="nx">interval</span>            <span class="p">=</span> <span class="s2">"10"</span>
    <span class="nx">port</span>                <span class="p">=</span> <span class="s2">"traffic-port"</span>
    <span class="nx">protocol</span>            <span class="p">=</span> <span class="s2">"TCP"</span>
  <span class="p">}</span>

  <span class="nx">tags</span> <span class="p">{</span>
    <span class="nx">Name</span> <span class="p">=</span> <span class="s2">"film-ratings-db-target-group"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">resource</span> <span class="s2">"aws_lb_listener"</span> <span class="s2">"film_ratings_nw_listener"</span> <span class="p">{</span>
  <span class="nx">load_balancer_arn</span> <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_lb</span><span class="p">.</span><span class="nx">film_ratings_nw_load_balancer</span><span class="p">.</span><span class="nx">arn</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">port</span>              <span class="p">=</span> <span class="s2">"5432"</span>
  <span class="nx">protocol</span>          <span class="p">=</span> <span class="s2">"TCP"</span>

  <span class="nx">default_action</span> <span class="p">{</span>
    <span class="nx">target_group_arn</span> <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_lb_target_group</span><span class="p">.</span><span class="nx">film_ratings_db_target_group</span><span class="p">.</span><span class="nx">arn</span><span class="k">}</span><span class="s2">"</span>
    <span class="nx">type</span>             <span class="p">=</span> <span class="s2">"forward"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> network-load-balancer.tf </div>
<p><br /></p>

<p>The application load balancer (<code class="highlighter-rouge">film-ratings-alb-load-balancer</code>) is what we will use to point our browser to. It will be responsible for routing HTTP requests to one of the two instances of the <code class="highlighter-rouge">film_ratings_app</code> containers, mapping the default port 80 to port 3000 for us.</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">...</span>
<span class="k">resource</span> <span class="s2">"aws_alb_target_group"</span> <span class="s2">"film_ratings_app_target_group"</span> <span class="p">{</span>
  <span class="nx">name</span>                <span class="p">=</span> <span class="s2">"film-ratings-app-target-group"</span>
  <span class="nx">port</span>                <span class="p">=</span> <span class="mi">3000</span>
  <span class="nx">protocol</span>            <span class="p">=</span> <span class="s2">"HTTP"</span>
  <span class="nx">vpc_id</span>              <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_vpc</span><span class="p">.</span><span class="nx">film_ratings_vpc</span><span class="p">.</span><span class="nx">id</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">deregistration_delay</span> <span class="p">=</span> <span class="s2">"10"</span>

  <span class="nx">health_check</span> <span class="p">{</span>
    <span class="nx">healthy_threshold</span>   <span class="p">=</span> <span class="s2">"2"</span>
    <span class="nx">unhealthy_threshold</span> <span class="p">=</span> <span class="s2">"6"</span>
    <span class="nx">interval</span>            <span class="p">=</span> <span class="s2">"30"</span>
    <span class="nx">matcher</span>             <span class="p">=</span> <span class="s2">"200,301,302"</span>
    <span class="nx">path</span>                <span class="p">=</span> <span class="s2">"/"</span>
    <span class="nx">protocol</span>            <span class="p">=</span> <span class="s2">"HTTP"</span>
    <span class="nx">timeout</span>             <span class="p">=</span> <span class="s2">"5"</span>
  <span class="p">}</span>

  <span class="nx">stickiness</span> <span class="p">{</span>
    <span class="nx">type</span>  <span class="p">=</span> <span class="s2">"lb_cookie"</span>
  <span class="p">}</span>

  <span class="nx">tags</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">Name</span> <span class="p">=</span> <span class="s2">"film-ratings-app-target-group"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">resource</span> <span class="s2">"aws_alb_listener"</span> <span class="s2">"alb-listener"</span> <span class="p">{</span>
  <span class="nx">load_balancer_arn</span> <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_alb</span><span class="p">.</span><span class="nx">film_ratings_alb_load_balancer</span><span class="p">.</span><span class="nx">arn</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">port</span>              <span class="p">=</span> <span class="s2">"80"</span>
  <span class="nx">protocol</span>          <span class="p">=</span> <span class="s2">"HTTP"</span>

  <span class="nx">default_action</span> <span class="p">{</span>
    <span class="nx">target_group_arn</span> <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_alb_target_group</span><span class="p">.</span><span class="nx">film_ratings_app_target_group</span><span class="p">.</span><span class="nx">arn</span><span class="k">}</span><span class="s2">"</span>
    <span class="nx">type</span>             <span class="p">=</span> <span class="s2">"forward"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">resource</span> <span class="s2">"aws_autoscaling_attachment"</span> <span class="s2">"asg_attachment_film_rating_app"</span> <span class="p">{</span>
  <span class="nx">autoscaling_group_name</span> <span class="p">=</span> <span class="s2">"film-ratings-autoscaling-group"</span>
  <span class="nx">alb_target_group_arn</span>   <span class="p">=</span> <span class="s2">"</span><span class="k">${</span><span class="nx">aws_alb_target_group</span><span class="p">.</span><span class="nx">film_ratings_app_target_group</span><span class="p">.</span><span class="nx">arn</span><span class="k">}</span><span class="s2">"</span>
  <span class="nx">depends_on</span> <span class="p">=</span> <span class="p">[</span> <span class="s2">"aws_autoscaling_group.film-ratings-autoscaling-group"</span> <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> application-load-balancer.tf </div>
<p><br /></p>

<p>Another important part of the infrastructure shown is that the <code class="highlighter-rouge">film_ratings_db</code> container has a volume mounted that is mapped to an Elastic File System volume to persist the data outside the EC2 instances that are running the containers. We do this so that if we have to scale the instances up or down (or if instances die), we don’t lose the data in the database.</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">resource</span> <span class="s2">"aws_ecs_task_definition"</span> <span class="s2">"film_ratings_db"</span> <span class="p">{</span>
  <span class="nx">family</span>                <span class="p">=</span> <span class="s2">"film_ratings_db"</span>
  <span class="nx">volume</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="p">=</span> <span class="s2">"filmdbvolume"</span>
    <span class="nx">host_path</span> <span class="p">=</span> <span class="s2">"/mnt/efs/postgres"</span>
  <span class="p">}</span>
  <span class="nx">network_mode</span> <span class="p">=</span> <span class="s2">"awsvpc"</span>
  <span class="nx">container_definitions</span> <span class="p">=</span> <span class="o">&lt;&lt;</span><span class="no">DEFINITION</span><span class="sh">
[
  {
    "name": "film_ratings_db",
    "image": "postgres:alpine",
    "essential": true,
    "portMappings": [
      {
        "containerPort": 5432
      }
    ],
    "environment": [
      {
        "name": "POSTGRES_DB",
        "value": "filmdb"
      },
      {
        "name": "POSTGRES_USER",
        "value": "filmuser"
      },
      {
        "name": "POSTGRES_PASSWORD",
        "value": "${var.db_password}"
      }
    ],
    "mountPoints": [
        {
          "readOnly": null,
          "containerPath": "/var/lib/postgresql/data",
          "sourceVolume": "filmdbvolume"
        }
    ],
    "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "film_ratings_db",
          "awslogs-region": "${var.region}",
          "awslogs-stream-prefix": "ecs"
        }
    },
    "memory": 512,
    "cpu": 256
  }
]
</span><span class="no">DEFINITION
</span><span class="p">}</span>
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> film-ratings-db-task-definition.tf </div>
<p><br /></p>

<p>The launch configuration makes sure that when an EC2 instance is started the EFS volume is mounted via the <code class="highlighter-rouge">user_data</code> entry.</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">...</span>
  <span class="nx">user_data</span>                   <span class="err">=</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
                                  #!/bin/bash
                                  echo ECS_CLUSTER=${var.ecs_cluster} &gt;&gt; /etc/ecs/ecs.config
                                  mkdir -p /mnt/efs/postgres
                                  cd /mnt
                                  sudo yum install -y amazon-efs-utils
                                  sudo mount -t efs ${aws_efs_mount_target.filmdbefs-mnt.0.dns_name}:/ efs
</span><span class="no">                                  EOF
</span></code></pre></div></div>

<div style="text-align: center;font-style: italic"> launch-configuration.tf </div>
<p><br /></p>

<h2>Creating the AWS infrastructure</h2>

<p>We are almost ready to run our Terraform, but before we do so we need to make sure we have all the correct values for the various variables. Let’s look at the <code class="highlighter-rouge">terraform.tfvars</code> file.</p>

<div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># You may need to edit these variables to match your config</span>
<span class="nx">db_password</span><span class="err">=</span> <span class="s2">"password"</span>
<span class="nx">ecs_cluster</span><span class="err">=</span><span class="s2">"film_ratings_cluster"</span>
<span class="nx">ecs_key_pair_name</span><span class="err">=</span><span class="s2">"film_ratings_key_pair"</span>
<span class="nx">region</span><span class="err">=</span> <span class="s2">"eu-west-1"</span>
<span class="nx">film_ratings_app_image</span><span class="err">=</span> <span class="s2">"chrishowejones/film-ratings-app:latest"</span>

<span class="c1"># no need to change these unless you want to</span>
<span class="nx">film_ratings_vpc</span> <span class="err">=</span> <span class="s2">"film_ratings_vpc"</span>
<span class="nx">film_ratings_network_cidr</span> <span class="err">=</span> <span class="s2">"210.0.0.0/16"</span>
<span class="nx">film_ratings_public_01_cidr</span> <span class="err">=</span> <span class="s2">"210.0.0.0/24"</span>
<span class="nx">film_ratings_public_02_cidr</span> <span class="err">=</span> <span class="s2">"210.0.10.0/24"</span>
<span class="nx">max_instance_size</span> <span class="err">=</span> <span class="mi">3</span>
<span class="nx">min_instance_size</span> <span class="err">=</span> <span class="mi">1</span>
<span class="nx">desired_capacity</span> <span class="err">=</span> <span class="mi">2</span> 
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> terraform.tfvars </div>
<p><br /></p>

<p>You can edit the password if required, but for this demo it’s not really necessary. You could also override the password by setting an environment variable <code class="highlighter-rouge">TF_VAR_db_password</code>. The <code class="highlighter-rouge">ecs_key_pair_name</code> value must match the name you gave the key pair you created for the AWS user in your <code class="highlighter-rouge">.ssh/</code> directory earlier. You must also change the <code class="highlighter-rouge">film_ratings_app_image</code> to be the Docker Hub repository image name for your image and not mine (make sure you have published a Docker Hub repository image of the correct name - you should have if you’ve already completed <a href="../package-a-clojure-web-application-using-docker/index.html">part 2</a> of this blog series).</p>

<p>If you want to use a different AWS region from the one I am using, you will need to change the <code class="highlighter-rouge">region</code> value. The <code class="highlighter-rouge">data.tf</code> file ensures that the <code class="highlighter-rouge">${data.aws_ami.latest_ecs.id}</code> variable is set to the appropriate <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-optimized_AMI.html" target="_blank" rel="noreferrer noopener">ECS optimized AMI image</a> for your region.</p>

<p>There shouldn’t be a reason to change anything else.</p>

<h2>Running the Terraform</h2>

<p>Once you have the <code class="highlighter-rouge">terraform.tfvars</code> values set correctly, you need to initialize Terraform in your cloned <code class="highlighter-rouge">film-ratings-terraform</code> directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>terraform init

Initializing provider plugins...
- Checking <span class="k">for </span>available provider plugins on https://releases.hashicorp.com...
...
Terraform has been successfully initialized!

You may now begin working with Terraform. Try running <span class="s2">"terraform plan"</span> to see
any changes that are required <span class="k">for </span>your infrastructure. All Terraform commands
should now work.

If you ever <span class="nb">set </span>or change modules or backend configuration <span class="k">for </span>Terraform,
rerun this <span class="nb">command </span>to reinitialize your working directory. If you forget, other
commands will detect it and remind you to <span class="k">do </span>so <span class="k">if </span>necessary.
</code></pre></div></div>

<p>Then you can run a Terraform plan to check what resources will be created when it’s applied. You will be prompted for your AWS access key id and AWS secret access key. If you tire of typing these in, you can set environment variables  <code class="highlighter-rouge">TF_VAR_aws_access_key_id</code> and <code class="highlighter-rouge">TF_VAR_aws_secret_access_key</code> in your terminal session.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>terraform plan
var.aws_access_key_id
  AWS access key

  Enter a value: ...
...
Refreshing Terraform state <span class="k">in</span><span class="nt">-memory</span> prior to plan...
...
Plan: 32 to add, 0 to change, 0 to destroy.

<span class="nt">------------------------------------------------------------------------</span>

Note: You didn<span class="s1">'t specify an "-out" parameter to save this plan, so Terraform
can'</span>t guarantee that exactly these actions will be performed <span class="k">if</span>
<span class="s2">"terraform apply"</span> is subsequently run.

 
To actually build the AWS resources listed <span class="k">in </span>the plan, use the following <span class="nb">command</span> <span class="o">(</span>enter <span class="sb">`</span><span class="nb">yes</span><span class="sb">`</span> when prompted with <span class="sb">`</span>Do you want to perform these actions?<span class="sb">`</span><span class="o">)</span>:


<span class="nv">$ </span>terraform apply
data.aws_iam_policy_document.ecs-instance-policy: Refreshing state...
data.aws_availability_zones.available: Refreshing state...
data.aws_iam_policy_document.ecs-service-policy: Refreshing state...
...
Plan: 32 to add, 0 to change, 0 to destroy.

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only <span class="s1">'yes'</span> will be accepted to approve.

  Enter a value: <span class="nb">yes</span>
...
aws_autoscaling_group.film-ratings-autoscaling-group: Creation <span class="nb">complete </span>after 1m10s <span class="o">(</span>ID: film-ratings-autoscaling-group<span class="o">)</span>

Apply <span class="nb">complete</span><span class="o">!</span> Resources: 32 added, 0 changed, 0 destroyed.

Outputs:

app-alb-load-balancer-dns-name <span class="o">=</span> film-ratings-alb-load-balancer-895483441.eu-west-1.elb.amazonaws.com
app-alb-load-balancer-name <span class="o">=</span> film-ratings-alb-load-balancer
ecs-instance-role-name <span class="o">=</span> ecs-instance-role
ecs-service-role-arn <span class="o">=</span> arn:aws:iam::731430262381:role/ecs-service-role
film-ratings-app-target-group-arn <span class="o">=</span> arn:aws:elasticloadbalancing:eu-west-1:731430262381:targetgroup/film-ratings-app-target-group/8a35ef20a2bab372
film-ratings-db-target-group-arn <span class="o">=</span> arn:aws:elasticloadbalancing:eu-west-1:731430262381:targetgroup/film-ratings-db-target-group/5de91812c3fb7c63
film_ratings_public_sg_id <span class="o">=</span> sg-08af1f2ab0bb6ca95
film_ratings_public_sn_01_id <span class="o">=</span> subnet-00b42a3598abf988f
film_ratings_public_sn_02_id <span class="o">=</span> subnet-0bb02c32db76d7b05
film_ratings_vpc_id <span class="o">=</span> vpc-06d431b5e5ad36195
mount-target-dns <span class="o">=</span> fs-151074dd.efs.eu-west-1.amazonaws.com
nw-lb-load-balancer-dns-name <span class="o">=</span> film-ratings-nw-load-balancer-4c3a6e6a0dab3cfb.elb.eu-west-1.amazonaws.com
nw-lb-load-balancer-name <span class="o">=</span> film-ratings-nw-load-balancer
region <span class="o">=</span> eu-west-1
</code></pre></div></div>

<p>The Terraform can take up to five minutes to run and it can take another five minutes for the load balancers and the ECS services to properly recognize each other. You can check the progress by logging into the AWS console and selecting <strong>ECS</strong> from the <strong>Services</strong> drop-down, selecting your cluster (named <code class="highlighter-rouge">film_ratings_cluster</code>, by default), and examining the logs attached to each service. The <code class="highlighter-rouge">film_ratings_app_service</code> can take a little while to connect and occasionally, even with the <code class="highlighter-rouge">wait-for-it.sh</code> script, the first task to start can fail to connect to the database and you have to wait for autoscaling to start another task instance.</p>

<p>Once the ECS services and tasks have started, you can try and connect to the application through your browser using the <code class="highlighter-rouge">app-alb-load-balancer-dns-name</code> value as the URL (shown in my output above as <code class="highlighter-rouge">film-ratings-alb-load-balancer-895483441.eu-west-1.elb.amazonaws.com</code> in this case, but your value will differ).</p>

<p>Don’t worry if you see an HTTP status 502 or 503 initially as even after the ECS services are up, it can take a few minutes for the application load balancer to detect that everything is healthy. Eventually, if you enter the URL for the alb load balancer DNS name in your browser, <code class="highlighter-rouge">film-ratings-alb-load-balancer-895483441.eu-west-1.elb.amazonaws.com</code> in my example, you should see this.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550479279960_index.png" alt="" /></p>

<p>At this point, it’s worth noting that to tear down all these resources you can issue the <code class="highlighter-rouge">terraform destroy</code> command (entering ‘yes’ when prompted if you really want to destroy all the resources).</p>

<h2>Getting CircleCI to deploy to an ECS cluster</h2>

<p>Next, we want to use our continuous integration service, CircleCI, to publish our Docker instances for us.</p>

<p>So far in our CircleCI configuration, we are building and testing our application whenever we push a change to GitHub, and we are building, testing, packaging as a Docker container, and publishing the Docker container to Docker Hub whenever we tag our project in GitHub.</p>

<p>In this section of the post, we will add the config to also push our packaged Docker container to our ECS cluster when we tag our project, but we will add a manual approval step that allows us to control the moment we start the deployment to ECS. Since we have set up our ECS services to use rolling deployment, this process will deploy our changed, tagged application with zero downtime.</p>

<p>Right now our <code class="highlighter-rouge">.circleci/config.yml</code> has three jobs, <code class="highlighter-rouge">build</code>, <code class="highlighter-rouge">build-docker</code>, and <code class="highlighter-rouge">publish-docker</code>. Let’s add another job below <code class="highlighter-rouge">publish-docker</code> called <code class="highlighter-rouge">deploy</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="s">...</span>
  <span class="s">deploy</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">circleci/python:3.6.1</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">AWS_DEFAULT_OUTPUT</span><span class="pi">:</span> <span class="s">json</span>
      <span class="na">IMAGE_NAME</span><span class="pi">:</span> <span class="s">chrishowejones/film-ratings-app</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">checkout</span>
      <span class="pi">-</span> <span class="na">restore_cache</span><span class="pi">:</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">v1-{{ checksum "requirements.txt" }}</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Install the AWS CLI</span>
          <span class="na">command</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="no">python3 -m venv venv</span>
            <span class="no">. venv/bin/activate</span>
            <span class="no">pip install -r requirements.txt</span>
      <span class="pi">-</span> <span class="na">save_cache</span><span class="pi">:</span>
          <span class="na">key</span><span class="pi">:</span> <span class="s">v1-{{ checksum "requirements.txt" }}</span>
          <span class="na">paths</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">venv"</span>
      <span class="pi">-</span> <span class="na">run</span><span class="pi">:</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy</span>
          <span class="na">command</span><span class="pi">:</span> <span class="pi">|</span>
            <span class="no">. venv/bin/activate</span>
            <span class="no">./deploy.sh</span>
<span class="s">...</span>
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> .circleci/config.yml </div>
<p><br /></p>

<p>This job will install the AWS CLI tool using <code class="highlighter-rouge">pip</code> (a Python package manager) by reading the <code class="highlighter-rouge">requirements.txt</code> file for the CLI package requirement. Then the run step <code class="highlighter-rouge">Deploy</code> runs a <code class="highlighter-rouge">deploy.sh</code> script which we haven’t created yet. <i>Remember to change the</i> <code class="highlighter-rouge">IMAGE_NAME</code> <i>to the Docker Hub repository image name for your image and not mine.</i> Let’s add the extra jobs we need to the end of the <code class="highlighter-rouge">build_and_deploy</code> workflow before we move on.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">...</span>
      <span class="pi">-</span> <span class="na">hold</span><span class="pi">:</span>
          <span class="na">requires</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">publish-docker</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">approval</span>
          <span class="na">filters</span><span class="pi">:</span>
            <span class="na">branches</span><span class="pi">:</span>
              <span class="na">ignore</span><span class="pi">:</span> <span class="s">/.*/</span>
            <span class="na">tags</span><span class="pi">:</span>
              <span class="na">only</span><span class="pi">:</span> <span class="s">/^\d+\.\d+\.\d+$/</span>
      <span class="pi">-</span> <span class="na">deploy</span><span class="pi">:</span>
          <span class="na">requires</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">hold</span>
          <span class="na">filters</span><span class="pi">:</span>
            <span class="na">branches</span><span class="pi">:</span>
              <span class="na">ignore</span><span class="pi">:</span> <span class="s">/.*/</span>
            <span class="na">tags</span><span class="pi">:</span>
              <span class="na">only</span><span class="pi">:</span> <span class="s">/^\d+\.\d+\.\d+$/</span>
</code></pre></div></div>
<div style="text-align: center;font-style: italic"> .circleci/config.yml </div>
<p><br /></p>

<p>We have added two new jobs to the <code class="highlighter-rouge">build_and_deploy</code> workflow. The first, <code class="highlighter-rouge">hold</code>, requires the previous <code class="highlighter-rouge">publish-docker</code> step to complete before it executes and is of type ‘approval’. The ‘approval’ type is a built-in CircleCI type that will stop the workflow and require a user to click <strong>Approve</strong> for it to continue to any subsequent steps.</p>

<p>The <code class="highlighter-rouge">deploy</code> job relies on <code class="highlighter-rouge">hold</code> being approved.</p>

<p><strong>Note:</strong> <i>Like every other step in the <code class="highlighter-rouge">build_and_deploy</code> workflow, these steps are only triggered when a semantic version style tag is pushed (e.g., 0.1.1 ).</i></p>

<p>Let’s add the <code class="highlighter-rouge">requirements.txt</code> file in the project root directory to make sure the AWS CLI tool is installed by CircleCI. The contents of this file should be:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>awscli&gt;=1.16.0

</code></pre></div></div>
<div style="text-align: center;font-style: italic"> requirements.txt </div>
<p><br /></p>

<p>Let’s also add the <code class="highlighter-rouge">deploy.sh</code> script referenced in the <code class="highlighter-rouge">deploy</code> job by creating this new file in the root directory of our project.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

<span class="c"># more bash-friendly output for jq</span>
<span class="nv">JQ</span><span class="o">=</span><span class="s2">"jq --raw-output --exit-status"</span>

configure_aws_cli<span class="o">(){</span>
        aws <span class="nt">--version</span>
        aws configure <span class="nb">set </span>default.region eu-west-1 <span class="c"># change this if your AWS region differs</span>
        aws configure <span class="nb">set </span>default.output json
<span class="o">}</span>

deploy_cluster<span class="o">()</span> <span class="o">{</span>

    <span class="nv">family</span><span class="o">=</span><span class="s2">"film_ratings_app"</span>

    make_task_def
    register_definition
    <span class="k">if</span> <span class="o">[[</span> <span class="k">$(</span>aws ecs update-service <span class="nt">--cluster</span> film_ratings_cluster  <span class="nt">--service</span> film_ratings_app_service <span class="nt">--task-definition</span> <span class="nv">$revision</span> | <span class="se">\</span>
                   <span class="nv">$JQ</span> <span class="s1">'.service.taskDefinition'</span><span class="k">)</span> <span class="o">!=</span> <span class="nv">$revision</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"Error updating service."</span>
        <span class="k">return </span>1
    <span class="k">fi</span>

    <span class="c"># wait for older revisions to disappear</span>
    <span class="c"># not really necessary, but nice for demos</span>
    <span class="k">for </span>attempt <span class="k">in</span> <span class="o">{</span>1..15<span class="o">}</span><span class="p">;</span> <span class="k">do
        if </span><span class="nv">stale</span><span class="o">=</span><span class="k">$(</span>aws ecs describe-services <span class="nt">--cluster</span> film_ratings_cluster <span class="nt">--services</span> film_ratings_app_service | <span class="se">\</span>
                       <span class="nv">$JQ</span> <span class="s2">".services[0].deployments | .[] | select(.taskDefinition != </span><span class="se">\"</span><span class="nv">$revision</span><span class="se">\"</span><span class="s2">) | .taskDefinition"</span><span class="k">)</span><span class="p">;</span> <span class="k">then
            </span><span class="nb">echo</span> <span class="s2">"Waiting for stale deployments:"</span>
            <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$stale</span><span class="s2">"</span>
            <span class="nb">sleep </span>45
        <span class="k">else
            </span><span class="nb">echo</span> <span class="s2">"Deployed!"</span>
            <span class="k">return </span>0
        <span class="k">fi
    done
    </span><span class="nb">echo</span> <span class="s2">"Service update took too long."</span>
    <span class="k">return </span>1
<span class="o">}</span>

make_task_def<span class="o">(){</span>
        <span class="nv">task_template</span><span class="o">=</span><span class="s1">'[
                {
                    "name": "film_ratings_app",
                    "image": "%s:%s",
                    "essential": true,
                    "portMappings": [
                      {
                          "containerPort": 3000,
                          "hostPort": 3000
                      }
                    ],
                    "environment": [
                      {
                        "name": "DB_HOST",
                        "value": "%s"
                      },
                      {
                        "name": "DB_PASSWORD",
                        "value": "%s"
                      }
                    ],
                    "logConfiguration": {
                      "logDriver": "awslogs",
                      "options": {
                        "awslogs-group": "film_ratings_app",
                        "awslogs-region": "eu-west-1",
                        "awslogs-stream-prefix": "ecs"
                      }
                    },
                    "memory": 1024,
                    "cpu": 256
                }
        ]'</span>

        <span class="nv">task_def</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span> <span class="s2">"</span><span class="nv">$task_template</span><span class="s2">"</span> <span class="nv">$IMAGE_NAME</span> <span class="nv">$CIRCLE_TAG</span> <span class="nv">$DB_HOST</span> <span class="nv">$DB_PASSWORD</span><span class="k">)</span>
<span class="o">}</span>

register_definition<span class="o">()</span> <span class="o">{</span>

    <span class="k">if </span><span class="nv">revision</span><span class="o">=</span><span class="k">$(</span>aws ecs register-task-definition <span class="nt">--container-definitions</span> <span class="s2">"</span><span class="nv">$task_def</span><span class="s2">"</span> <span class="nt">--family</span> <span class="nv">$family</span> | <span class="nv">$JQ</span> <span class="s1">'.taskDefinition.taskDefinitionArn'</span><span class="k">)</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="s2">"Revision: </span><span class="nv">$revision</span><span class="s2">"</span>
    <span class="k">else
        </span><span class="nb">echo</span> <span class="s2">"Failed to register task definition"</span>
        <span class="k">return </span>1
    <span class="k">fi</span>

<span class="o">}</span>

configure_aws_cli
deploy_cluster
</code></pre></div></div>

<div style="text-align: center;font-style: italic"> deploy.sh </div>
<p><br /></p>

<p>This script will make a new task definition for our <code class="highlighter-rouge">film_ratings_app</code> task. If you look at the config, it mirrors that in the Terraform definition in <code class="highlighter-rouge">film-ratings-app-task-definition.tf</code>. It then deploys this new task to the cluster.</p>

<p>Notice that the <code class="highlighter-rouge">task_def</code> set up in the <code class="highlighter-rouge">make_task_def</code> function substitutes in values from variables called <code class="highlighter-rouge">$IMAGE_NAME</code>, <code class="highlighter-rouge">$CIRCLE_TAG</code>, <code class="highlighter-rouge">$DB_HOST</code>, and <code class="highlighter-rouge">$DB_PASSWORD</code>. We will set these variables in the CircleCI project environment variables later.</p>

<p><strong>Note:</strong> <i>If you are using a different AWS region than <code class="highlighter-rouge">eu-west-1</code> you will need to change the entries on lines 8 &amp; 67.</i></p>

<p>Before moving on, let’s make this new script file executable.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">chmod</span> +x deploy.sh
</code></pre></div></div>
<p>Now, let’s add those variables and the AWS variables we require to our CircleCI config.</p>

<p>Go to your CircleCI <a href="https://circleci.com/dashboard" target="_blank" rel="noreferrer noopener">dashboard</a> and select the settings for your film ratings project, select <strong>Environment Variables</strong>, under <strong>Build Settings</strong>, and enter the following variables:</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550651638104_circleci_ecs_env_variables.png" alt="" /></p>

<p><strong>Note:</strong> <i>You should already have <code class="highlighter-rouge">DOCKERHUB_PASS</code> and <code class="highlighter-rouge">DOCKERHUB_USERNAME</code> set up here.</i></p>

<p>Use your AWS access key id and AWS secret access key you got when you created your user (the same values you set when running the Terraform). Remember you can find your AWS account id <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/console_account-alias.html#FindingYourAWSId" target="_blank" rel="noreferrer noopener">here</a>. Set your <code class="highlighter-rouge">DB_PASSWORD</code> to whatever value you used in the <code class="highlighter-rouge">terraform.tfvars</code> file.</p>

<p>The <code class="highlighter-rouge">DB_HOST</code> value needs to be the DNS name of the network load balancer that routes TCP requests to the <code class="highlighter-rouge">film_ratings_db</code> task instance. You can find this in the output from the <code class="highlighter-rouge">terraform apply</code> command or by logging on to your AWS management console and navigating from <strong>Services</strong> to <strong>EC2</strong> and from there to <strong>Load Balancers</strong>, if you select the <code class="highlighter-rouge">film-ratings-nw-load-balancer</code> entry, you should see the DNS name (in the <strong>Basic Configuration</strong> section).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nw-lb-load-balancer-dns-name <span class="o">=</span> film-ratings-nw-load-balancer-4c3a6e6a0dab3cfb.elb.eu-west-1.amazonaws.com
nw-lb-load-balancer-name <span class="o">=</span> film-ratings-nw-load-balancer
region <span class="o">=</span> eu-west-1
</code></pre></div></div>
<div style="text-align: center;font-style: italic"> Output from the terraform apply command </div>
<p><br /></p>

<p>In the example here, the <code class="highlighter-rouge">DB_HOST</code> variable in CircleCI should be set to <code class="highlighter-rouge">film-ratings-nw-load-balancer-4c3a6e6a0dab3cfb.elb.eu-west-1.amazonaws.com</code>.</p>

<p><strong>Note:</strong> <i>If you’ve destroyed your AWS resources you will need to set them up again using the <code class="highlighter-rouge">terraform apply</code> command in the <code class="highlighter-rouge">film-ratings-terraform</code> directory to get the AWS resources set up to get the network load balancer DNS.</i></p>

<p>Once you have set up the environment variables, you can commit the changes to the CircleCI config and the new deploy script file and push these to GitHub.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git add <span class="nb">.</span> <span class="nt">--all</span>
<span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Added config to deploy to ECS"</span>
<span class="nv">$ </span>git push origin master
</code></pre></div></div>

<h2>Change the application and deploy</h2>

<p>Now we are going to prove this CircleCI config is working by adding some functionality to our application and then tagging it and deploying the changes to the ECS cluster.</p>

<p>Let’s add a search feature to our application.</p>

<p>First, add the mappings for the routes and handler keys to the <code class="highlighter-rouge">resources/film_ratings/config.edn</code> file to show the search form and handle the post of the search form:</p>

<pre><code class="language-edn">... 
:duct.module/ataraxy
 {\[:get "/"\] [:index]
  "/add-film"
  {:get [:film/show-create]
   \[:post {film-form :form-params}\] [:film/create film-form]}
  \[:get "/list-films"\] [:film/list]
  "/find-by-name"
  {:get [:film/show-search]
   \[:post {search-form :form-params}\] [:film/find-by-name search-form]}}

 :film-ratings.handler/index {}
 :film-ratings.handler.film/show-create {}
 :film-ratings.handler.film/create {:db #ig/ref :duct.database/sql}
 :film-ratings.handler.film/list {:db #ig/ref :duct.database/sql}
 :film-ratings.handler.film/show-search {}
 :film-ratings.handler.film/find-by-name {:db #ig/ref :duct.database/sql}
...
</code></pre>

<div style="text-align: center;font-style: italic"> resources/film_ratings/config.edn </div>
<p><br /></p>

<p>Next, let’s add the handlers for the <code class="highlighter-rouge">show-search</code> and <code class="highlighter-rouge">find-by-name</code> keys to the bottom of the <code class="highlighter-rouge">src/film_ratings/handler/film.clj</code> file:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">...</span><span class="w">

</span><span class="p">(</span><span class="k">defmethod</span><span class="w"> </span><span class="n">ig/init-key</span><span class="w"> </span><span class="no">:film-ratings.handler.film/show-search</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="w"> </span><span class="n">_</span><span class="p">]</span><span class="w">
  </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="w">
    </span><span class="p">[</span><span class="no">::response/ok</span><span class="w"> </span><span class="p">(</span><span class="nf">views.film/search-film-by-name-view</span><span class="p">)]))</span><span class="w">

</span><span class="p">(</span><span class="k">defmethod</span><span class="w"> </span><span class="n">ig/init-key</span><span class="w"> </span><span class="no">:film-ratings.handler.film/find-by-name</span><span class="w"> </span><span class="p">[</span><span class="n">_</span><span class="w"> </span><span class="p">{</span><span class="no">:keys</span><span class="w"> </span><span class="p">[</span><span class="n">db</span><span class="p">]}]</span><span class="w">
  </span><span class="p">(</span><span class="k">fn</span><span class="w"> </span><span class="p">[{[</span><span class="n">_</span><span class="w"> </span><span class="n">search-form</span><span class="p">]</span><span class="w"> </span><span class="no">:ataraxy/result</span><span class="w"> </span><span class="no">:as</span><span class="w"> </span><span class="n">request</span><span class="p">}]</span><span class="w">
    </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="nb">name</span><span class="w"> </span><span class="p">(</span><span class="nb">get</span><span class="w"> </span><span class="n">search-form</span><span class="w"> </span><span class="s">"name"</span><span class="p">)</span><span class="w">
          </span><span class="n">films-list</span><span class="w"> </span><span class="p">(</span><span class="nf">boundary.film/fetch-films-by-name</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="nb">name</span><span class="p">)]</span><span class="w">
      </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">seq</span><span class="w"> </span><span class="n">films-list</span><span class="p">)</span><span class="w">
        </span><span class="p">[</span><span class="no">::response/ok</span><span class="w"> </span><span class="p">(</span><span class="nf">views.film/list-films-view</span><span class="w"> </span><span class="n">films-list</span><span class="w"> </span><span class="p">{})]</span><span class="w">
        </span><span class="p">[</span><span class="no">::response/ok</span><span class="w"> </span><span class="p">(</span><span class="nf">views.film/list-films-view</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="p">{</span><span class="no">:messages</span><span class="w"> </span><span class="p">[(</span><span class="nf">format</span><span class="w"> </span><span class="s">"No films found for %s."</span><span class="w"> </span><span class="nb">name</span><span class="p">)]})]))))</span><span class="w">
</span></code></pre></div></div>

<div style="text-align: center;font-style: italic"> src/film_ratings/handler/film.clj </div>
<p><br /></p>

<p>Let’s add a new button to the index view in the <code class="highlighter-rouge">src/film_ratings/views/index.clj</code> file:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">list-options</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">(</span><span class="nf">page</span><span class="w">
    </span><span class="p">[</span><span class="no">:div.container.jumbotron.bg-white.text-center</span><span class="w">
     </span><span class="p">[</span><span class="no">:row</span><span class="w">
      </span><span class="p">[</span><span class="no">:p</span><span class="w">
       </span><span class="p">[</span><span class="no">:a.btn.btn-primary</span><span class="w"> </span><span class="p">{</span><span class="no">:href</span><span class="w"> </span><span class="s">"/add-film"</span><span class="p">}</span><span class="w"> </span><span class="s">"Add a Film"</span><span class="p">]]]</span><span class="w">
     </span><span class="p">[</span><span class="no">:row</span><span class="w">
      </span><span class="p">[</span><span class="no">:p</span><span class="w">
       </span><span class="p">[</span><span class="no">:a.btn.btn-primary</span><span class="w"> </span><span class="p">{</span><span class="no">:href</span><span class="w"> </span><span class="s">"/list-films"</span><span class="p">}</span><span class="w"> </span><span class="s">"List Films"</span><span class="p">]]]</span><span class="w">
     </span><span class="p">[</span><span class="no">:row</span><span class="w">
      </span><span class="p">[</span><span class="no">:p</span><span class="w">
       </span><span class="p">[</span><span class="no">:a.btn.btn-primary</span><span class="w"> </span><span class="p">{</span><span class="no">:href</span><span class="w"> </span><span class="s">"/find-by-name"</span><span class="p">}</span><span class="w"> </span><span class="s">"Search Films"</span><span class="p">]]]]))</span><span class="w">
</span></code></pre></div></div>

<div style="text-align: center;font-style: italic"> src/film_ratings/handler/index.clj </div>
<p><br /></p>

<p>Now we need a view for the <code class="highlighter-rouge">search-films-by-name-view</code> at the bottom of the <code class="highlighter-rouge">src/film_ratings/views/film.clj</code> file:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">...</span><span class="w">

</span><span class="p">(</span><span class="k">defn</span><span class="w"> </span><span class="n">search-film-by-name-view</span><span class="w">
  </span><span class="p">[]</span><span class="w">
  </span><span class="p">(</span><span class="nf">page</span><span class="w">
   </span><span class="p">[</span><span class="no">:div.container.jumbotron.bg-light</span><span class="w">
    </span><span class="p">[</span><span class="no">:div.row</span><span class="w">
     </span><span class="p">[</span><span class="no">:h2</span><span class="w"> </span><span class="s">"Search for film by name"</span><span class="p">]]</span><span class="w">
    </span><span class="p">[</span><span class="no">:div</span><span class="w">
     </span><span class="p">(</span><span class="nf">form-to</span><span class="w"> </span><span class="p">[</span><span class="no">:post</span><span class="w"> </span><span class="s">"/find-by-name"</span><span class="p">]</span><span class="w">
              </span><span class="p">(</span><span class="nf">anti-forgery-field</span><span class="p">)</span><span class="w">
              </span><span class="p">[</span><span class="no">:div.form-group.col-12</span><span class="w">
               </span><span class="p">(</span><span class="nf">label</span><span class="w"> </span><span class="no">:name</span><span class="w"> </span><span class="s">"Name:"</span><span class="p">)</span><span class="w">
               </span><span class="p">(</span><span class="nf">text-field</span><span class="w"> </span><span class="p">{</span><span class="no">:class</span><span class="w"> </span><span class="s">"mb-3 form-control"</span><span class="w"> </span><span class="no">:placeholder</span><span class="w"> </span><span class="s">"Enter film name"</span><span class="p">}</span><span class="w"> </span><span class="no">:name</span><span class="p">)]</span><span class="w">
              </span><span class="p">[</span><span class="no">:div.form-group.col-12.text-center</span><span class="w">
               </span><span class="p">(</span><span class="nf">submit-button</span><span class="w"> </span><span class="p">{</span><span class="no">:class</span><span class="w"> </span><span class="s">"btn btn-primary text-center"</span><span class="p">}</span><span class="w"> </span><span class="s">"Search"</span><span class="p">)])]]))</span><span class="w">
</span></code></pre></div></div>

<div style="text-align: center;font-style: italic"> src/film_ratings/views/film.clj </div>
<p><br /></p>

<p>The database boundary protocol and associated implementation need the <code class="highlighter-rouge">fetch-films-by-name</code> function referenced in the <code class="highlighter-rouge">find-by-name</code> handler. Add the appropriate function to the protocol and the extension to the protocol in the <code class="highlighter-rouge">src/film_ratings/boundary/film.clj</code> file like so:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">...</span><span class="w">
</span><span class="p">(</span><span class="nf">defprotocol</span><span class="w"> </span><span class="n">FilmDatabase</span><span class="w">
  </span><span class="p">(</span><span class="nf">list-films</span><span class="w"> </span><span class="p">[</span><span class="n">db</span><span class="p">])</span><span class="w">
  </span><span class="p">(</span><span class="nf">fetch-films-by-name</span><span class="w"> </span><span class="p">[</span><span class="n">db</span><span class="w"> </span><span class="nb">name</span><span class="p">])</span><span class="w">
  </span><span class="p">(</span><span class="nf">create-film</span><span class="w"> </span><span class="p">[</span><span class="n">db</span><span class="w"> </span><span class="n">film</span><span class="p">]))</span><span class="w">

</span><span class="p">(</span><span class="nf">extend-protocol</span><span class="w"> </span><span class="n">FilmDatabase</span><span class="w">
  </span><span class="n">duct.database.sql.Boundary</span><span class="w">
  </span><span class="p">(</span><span class="nf">list-films</span><span class="w"> </span><span class="p">[{</span><span class="n">db</span><span class="w"> </span><span class="no">:spec</span><span class="p">}]</span><span class="w">
    </span><span class="p">(</span><span class="nf">jdbc/query</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="p">[</span><span class="s">"SELECT * FROM film"</span><span class="p">]))</span><span class="w">
  </span><span class="p">(</span><span class="nf">fetch-films-by-name</span><span class="w"> </span><span class="p">[{</span><span class="n">db</span><span class="w"> </span><span class="no">:spec</span><span class="p">}</span><span class="w"> </span><span class="nb">name</span><span class="p">]</span><span class="w">
    </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">search-term</span><span class="w"> </span><span class="p">(</span><span class="nb">str</span><span class="w"> </span><span class="s">"%"</span><span class="w"> </span><span class="nb">name</span><span class="w"> </span><span class="s">"%"</span><span class="p">)]</span><span class="w">
     </span><span class="p">(</span><span class="nf">jdbc/query</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="p">[</span><span class="s">"SELECT * FROM film WHERE LOWER(name) like LOWER(?)"</span><span class="w"> </span><span class="n">search-term</span><span class="p">])))</span><span class="w">
  </span><span class="p">(</span><span class="nf">create-film</span><span class="w"> </span><span class="p">[{</span><span class="n">db</span><span class="w"> </span><span class="no">:spec</span><span class="p">}</span><span class="w"> </span><span class="n">film</span><span class="p">]</span><span class="w">
    </span><span class="p">(</span><span class="nf">try</span><span class="w">
     </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">result</span><span class="w"> </span><span class="p">(</span><span class="nf">jdbc/insert!</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="no">:film</span><span class="w"> </span><span class="n">film</span><span class="p">)]</span><span class="w">
       </span><span class="p">(</span><span class="nb">if-let</span><span class="w"> </span><span class="p">[</span><span class="n">id</span><span class="w"> </span><span class="p">(</span><span class="nb">val</span><span class="w"> </span><span class="p">(</span><span class="nb">ffirst</span><span class="w"> </span><span class="n">result</span><span class="p">))]</span><span class="w">
         </span><span class="p">{</span><span class="no">:id</span><span class="w"> </span><span class="n">id</span><span class="p">}</span><span class="w">
         </span><span class="p">{</span><span class="no">:errors</span><span class="w"> </span><span class="p">[</span><span class="s">"Failed to add film."</span><span class="p">]}))</span><span class="w">
     </span><span class="p">(</span><span class="nf">catch</span><span class="w"> </span><span class="n">SQLException</span><span class="w"> </span><span class="n">ex</span><span class="w">
       </span><span class="p">(</span><span class="nf">log/errorf</span><span class="w"> </span><span class="s">"Failed to insert film. %s\n"</span><span class="w"> </span><span class="p">(</span><span class="nf">.getMessage</span><span class="w"> </span><span class="n">ex</span><span class="p">))</span><span class="w">
       </span><span class="p">{</span><span class="no">:errors</span><span class="w"> </span><span class="p">[(</span><span class="nf">format</span><span class="w"> </span><span class="s">"Film not added due to %s"</span><span class="w"> </span><span class="p">(</span><span class="nf">.getMessage</span><span class="w"> </span><span class="n">ex</span><span class="p">))]}))))</span><span class="w">
</span></code></pre></div></div>

<div style="text-align: center;font-style: italic"> src/film_ratings/boundary/film.clj </div>
<p><br /></p>

<p>Also, change the version number of the build in the project file to <code class="highlighter-rouge">0.2.0</code>.</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nf">defproject</span><span class="w"> </span><span class="n">film-ratings</span><span class="w"> </span><span class="s">"0.2.0"</span><span class="w">
</span><span class="n">...</span><span class="w">
</span></code></pre></div></div>

<p>You should now be able to test this by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>lein repl
nREPL server started on port 43477 on host 127.0.0.1 - nrepl://127.0.0.1:43477
REPL-y 0.3.7, nREPL 0.2.12
Clojure 1.9.0
Java HotSpot<span class="o">(</span>TM<span class="o">)</span> 64-Bit Server VM 1.8.0_191-b12
    Docs: <span class="o">(</span>doc <span class="k">function</span><span class="nt">-name-here</span><span class="o">)</span>
          <span class="o">(</span>find-doc <span class="s2">"part-of-name-here"</span><span class="o">)</span>
  Source: <span class="o">(</span><span class="nb">source </span><span class="k">function</span><span class="nt">-name-here</span><span class="o">)</span>
 Javadoc: <span class="o">(</span>javadoc java-object-or-class-here<span class="o">)</span>
    Exit: Control+D or <span class="o">(</span><span class="nb">exit</span><span class="o">)</span> or <span class="o">(</span>quit<span class="o">)</span>
 Results: Stored <span class="k">in </span>vars <span class="k">*</span>1, <span class="k">*</span>2, <span class="k">*</span>3, an exception <span class="k">in</span> <span class="k">*</span>e

<span class="nv">user</span><span class="o">=&gt;</span> <span class="o">(</span>dev<span class="o">)</span>
:loaded
<span class="nv">dev</span><span class="o">=&gt;</span> <span class="o">(</span>go<span class="o">)</span>
:duct.server.http.jetty/starting-server <span class="o">{</span>:port 3000<span class="o">}</span>
:initiated
<span class="nv">dev</span><span class="o">=&gt;</span> 
</code></pre></div></div>

<p>You should see <strong>Search Films</strong> on the index if you open a browser to <a href="http://localhost:3000/" target="_blank" rel="noreferrer noopener">http://localhost:3000/</a></p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550684527690_index_search.png" alt="" /></p>

<p>Now add some films to your test (SQLite) database and use <strong>Search Films</strong> to take you to the search form. Fill in part of the name of one or more of your films.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550684585123_search.png" alt="" /></p>

<p>See if you get the results you expect from the search by pressing <strong>Search</strong>.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550684689390_search_results.png" alt="" /></p>

<p>You can also try a non-matching search.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550684759683_search_no_match.png" alt="" /></p>

<p>Time to commit your changes to GitHub.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git add <span class="nb">.</span> <span class="nt">--all</span>
<span class="nv">$ </span>git commit <span class="nt">-m</span> <span class="s2">"Added search for films"</span>
<span class="nv">$ </span>git push origin master
</code></pre></div></div>

<p>You can check that the CircleCI build runs OK in your CircleCI <a href="https://circleci.com/dashboard" target="_blank" rel="noreferrer noopener">dashboard</a>.</p>

<p>Next, we are going to tag our build with the new version <code class="highlighter-rouge">0.2.0</code>.</p>

<pre><code class="language-bsh">$ git tag -a 0.2.0 -m "v0.2.0"
$ git push origin 0.2.0         
...
 * [new tag]         0.2.0 -&gt; 0.2.0
</code></pre>
<p>This should trigger the <code class="highlighter-rouge">build_and_deploy</code> workflow in CircleCI</p>

<p>After a couple of minutes or so you should see the workflow finish publishing to Docker Hub and then go on hold.</p>

<p><img src="../../../d2mxuefqeaa7sj.cloudfront.net/s_372E008EE71D690218130590BDD1F98430319AE9249FFE4FDA2403F2F570ADDC_1550685919009_build_and_deploy_on_hold.png" alt="" /></p>

<p>If you click the hold job and then <strong>Approve</strong> it, the workflow will continue and deploy to ECS. The deploy step can take several minutes and AWS Elastic Container Service can take up to five minutes to rolling deploy both instances. You can check the progress of the ECS deployment in the ECS console. If you try entering the application load balancer DNS name in a browser after about 5 minutes or so, you should see the new search button and you can add films and search for them.</p>

<p><strong>Don’t forget to destroy the AWS resources when you’ve finished with them by running the</strong> <code class="highlighter-rouge">terraform destroy</code> <strong>command in the</strong> <code class="highlighter-rouge">film-ratings-terraform</code> <strong>directory.</strong></p>

<h2>Summary</h2>

<p>Congratulations! If you’ve followed the entire blog series, you’ve created a Clojure web application with a PostgreSQL database, tested it, built it, packaged it in a Docker container, published the container, stood up an AWS Elastic Container Service and deployed to the cluster with Terraform🎉!</p>

<p>This is a reasonably realistic, if slightly simple, set up that could be used in a live web application. You would want to add a web domain pointing to your application load balancer, secure the communication with a TLS certificate, and add more monitoring, but you’ve already built the majority of what you need.</p>

<hr />

<p><a href="https://twitter.com/agile_geek" target="_blank" rel="noreferrer noopener">Chris Howe-Jones</a> is a consultant CTO, Software Architect, Lean/Agile Coach, Developer, and Technical Navigator for <a href="http://devcycle.co.uk/" target="_blank" rel="noreferrer noopener">DevCycle</a>. He works mainly in Clojure/ClojureScript, Java, and Scala with clients from multi-national organizations down to small startups.</p>

      </div>
    </div>
  </div>
  <footer>
    <div class="container">
      <div class="row">
        <div class="readable-width">
          

<ul class="post-tags">
  
    
    
    <li>
      <a class="tag" href="../tag/tutorials/index.html">
        Tutorials
      </a>
    </li>
  
    
    
    <li>
      <a class="tag" href="../tag/operations/index.html">
        Operations
      </a>
    </li>
  
    
    
    <li>
      <a class="tag" href="../tag/engineering/index.html">
        Engineering
      </a>
    </li>
  
</ul>

        </div>
      </div>
    </div>
  </footer>
</article>



<div class="recommended-posts">
  <div class="recommended-posts-header container">
    
      <div class="row">
        <div class="readable-width">
          <h2 class="title">Similar posts you may enjoy</h2>
        </div>
      </div>
      <div class="card-deck">
  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../cd-for-pwa/index.html">
      





<img src="../media/Tutorial-Intermediate-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jun 8, 2020</span>
    
    
      <span class="post-read-time">14 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../cd-for-pwa/index.html">
        Continuous deployment for progressive web applications
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../automatic-testing-for-graphql-apis/index.html">
      





<img src="../media/Tutorial-Beginner-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jun 5, 2020</span>
    
    
      <span class="post-read-time">15 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../automatic-testing-for-graphql-apis/index.html">
        Automatic testing for GraphQL APIs
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../introduction-to-graphql/index.html">
      





<img src="../media/Tutorial-Beginner-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">May 19, 2020</span>
    
    
      <span class="post-read-time">18 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../introduction-to-graphql/index.html">
        Introduction to GraphQL 
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../creating-a-custom-docker-image-to-run-your-ci-builds/index.html">
      





<img src="../media/Tutorial-Advanced-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">May 19, 2020</span>
    
    
      <span class="post-read-time">7 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../creating-a-custom-docker-image-to-run-your-ci-builds/index.html">
        Creating a custom Docker image to run your CI builds
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/ricardo-4af2ccb75bf2770b690e6226e5936ef633c22b968f9a81f6617889fecc542721.jpg" alt="Ricardo N Feliciano" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/ricardo/index.html">
    Ricardo N Feliciano
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Community & Partner Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continous-integration-for-ionic-apps/index.html">
      





<img src="../media/Tutorial-Beginner-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">May 18, 2020</span>
    
    
      <span class="post-read-time">11 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continous-integration-for-ionic-apps/index.html">
        Continuous integration for Ionic applications
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../how-do-i-iac/index.html">
      





<img src="../media/Tutorial-Intermediate-RP.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">May 14, 2020</span>
    
    
      <span class="post-read-time">13 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../how-do-i-iac/index.html">
        How do I use Infrastructure as Code?
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuous-deployment-of-gatsby-apps-to-heroku/index.html">
      





<img src="../media/Tutorial-Intermediate-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">May 11, 2020</span>
    
    
      <span class="post-read-time">8 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuous-deployment-of-gatsby-apps-to-heroku/index.html">
        Continuous deployment of Gatsby apps to Heroku
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuous-deployment-of-an-express-graphql-server-to-heroku/index.html">
      





<img src="../media/Tutorial-Intermediate-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Apr 28, 2020</span>
    
    
      <span class="post-read-time">13 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuous-deployment-of-an-express-graphql-server-to-heroku/index.html">
        Continuous deployment of an Express GraphQL server to Heroku
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../docker-and-cicd-tutorial-a-deep-dive-into-containers/index.html">
      





<img src="../media/Tutorial-Beginner-RP.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Apr 24, 2020</span>
    
    
      <span class="post-read-time">13 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../docker-and-cicd-tutorial-a-deep-dive-into-containers/index.html">
        Docker and CI/CD tutorial: a deep dive into containers
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../automatic-testing-for-laravel-projects/index.html">
      





<img src="../media/Tutorial-Beginner-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Apr 23, 2020</span>
    
    
      <span class="post-read-time">13 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../automatic-testing-for-laravel-projects/index.html">
        Automatic testing for Laravel projects
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../how-to-set-up-a-continuous-integration-pipeline-for-a-rails-dual-boot/index.html">
      





<img src="../media/Tutorial-Advanced-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Apr 13, 2020</span>
    
    
      <span class="post-read-time">6 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../how-to-set-up-a-continuous-integration-pipeline-for-a-rails-dual-boot/index.html">
        How to set up a continuous integration pipeline for a Rails dual boot
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/kayla-reopelle-1fb82bf7011ce22b0b8b629af427b3dbc7cff7f2001e3260c9d46198cf297362.jpg" alt="Kayla Reopelle" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Kayla Reopelle


      </span>
      <br>
      <span class="post-author-role">
        Developer at Planet Argon
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuous-integration-and-deployment-for-android-apps-with-fastlane/index.html">
      





<img src="../media/Tutorial-Intermediate-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Apr 2, 2020</span>
    
    
      <span class="post-read-time">18 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuous-integration-and-deployment-for-android-apps-with-fastlane/index.html">
        Continuous integration and deployment for Android apps with fastlane
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/idorenyin-obong-d3a5331fe5032ce2209ff83b2dff84026d0ed3172f01c3d58674d93991afba33.jpg" alt="Idorenyin Obong" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Idorenyin Obong


      </span>
      <br>
      <span class="post-author-role">
        Software Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuous-deployment-to-heroku/index.html">
      





<img src="../media/Tutorial-Intermediate-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Mar 20, 2020</span>
    
    
      <span class="post-read-time">9 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuous-deployment-to-heroku/index.html">
        Continuous deployment of Node apps to Heroku
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../capture-screenshots-of-flaky-end-to-end-tests/index.html">
      





<img src="../media/Tutorial-Beginner-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Mar 10, 2020</span>
    
    
      <span class="post-read-time">9 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../capture-screenshots-of-flaky-end-to-end-tests/index.html">
        Capture screenshots of flaky end-to-end tests
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/goncalo-morais-93644d7d917b9e91ed54a2f2e1e01f59a0ba15ce9d085651e0ae41b9ed15cb98.jpg" alt="Gonçalo Morais" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Gonçalo Morais


      </span>
      <br>
      <span class="post-author-role">
        Software Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../automatically-deploy-private-docker-images-to-aws-ecr/index.html">
      





<img src="../media/Tutorial-Intermediate-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Mar 6, 2020</span>
    
    
      <span class="post-read-time">7 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../automatically-deploy-private-docker-images-to-aws-ecr/index.html">
        Automatically deploy private Docker images to Amazon ECR
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/dominic-motuka-3d4b989fb8e9f84740969d2f3a89b20d55edadf64c4b4d06c4f62cafc1cc9497.jpg" alt="Dominic Motuka" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Dominic Motuka


      </span>
      <br>
      <span class="post-author-role">
        DevOps Engineer at Andela
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuous-integration-with-code-climates-automated-code-review/index.html">
      





<img src="../media/Tutorial-Beginner-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Feb 25, 2020</span>
    
    
      <span class="post-read-time">17 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuous-integration-with-code-climates-automated-code-review/index.html">
        Continuous integration with Code Climate&#39;s automated code review
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/mabishi-wakio-5aed1f760a96cd23452e6ecebba213817c099d1ebc8195aca18fe12713e33850.jpg" alt="Mabishi Wakio" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Mabishi Wakio


      </span>
      <br>
      <span class="post-author-role">
        Software Engineer and Product Manager
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../smoke-tests-in-cicd-pipelines/index.html">
      





<img src="../media/Tutorial-Advanced-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Feb 14, 2020</span>
    
    
      <span class="post-read-time">11 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../smoke-tests-in-cicd-pipelines/index.html">
        Smoke tests in CI/CD pipelines
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../build-a-ci-powered-restful-api-with-laravel/index.html">
      





<img src="../media/Tutorial-Beginner-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jan 28, 2020</span>
    
    
      <span class="post-read-time">16 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../build-a-ci-powered-restful-api-with-laravel/index.html">
        Build a CI powered RESTful API with Laravel
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../automate-your-nuxt-js-app-deployment/index.html">
      





<img src="../media/Tutorial-Intermediate-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jan 14, 2020</span>
    
    
      <span class="post-read-time">16 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../automate-your-nuxt-js-app-deployment/index.html">
        Automate your Nuxt.js app deployment
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fikayo-adepoju-bbc741912f663373522dfa5531d564729605e548c18a0a0a083ad12f4e510ed9.jpg" alt="Fikayo Adepoju" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fikayo Adepoju


      </span>
      <br>
      <span class="post-author-role">
        Fullstack Developer and Tech Author
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuous-integration-for-salesforce-applications/index.html">
      





<img src="../media/Tutorial-Beginner-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Dec 17, 2019</span>
    
    
      <span class="post-read-time">10 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuous-integration-for-salesforce-applications/index.html">
        Continuous integration for Salesforce applications
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/kyle-tryon-b103d4cdba74ece2343dc97779055a6ed8a4919834985292326b606ec21d91c0.jpg" alt="Kyle Tryon" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Kyle Tryon


      </span>
      <br>
      <span class="post-author-role">
        Community & Partner Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../optimizing-open-source-projects-on-circleci/index.html">
      





<img src="../media/2019-12-11-OSSConfig-Gray.png" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Dec 11, 2019</span>
    
    
      <span class="post-read-time">12 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../optimizing-open-source-projects-on-circleci/index.html">
        Optimizing open source project builds on CircleCI
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/vinny-thanh-0f9ada587e751b0189cfc1e657adf8961ecb247dba0391469ad5a6fe74f8e59b.jpg" alt="Vinny Thanh" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Vinny Thanh


      </span>
      <br>
      <span class="post-author-role">
        Solutions Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../optimizing-react-native-camera/index.html">
      





<img src="../media/2019-12-02-OSSConfig-Blue.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Dec 3, 2019</span>
    
    
      <span class="post-read-time">5 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../optimizing-react-native-camera/index.html">
        Optimizing React Native Camera&#39;s build
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/vinny-thanh-0f9ada587e751b0189cfc1e657adf8961ecb247dba0391469ad5a6fe74f8e59b.jpg" alt="Vinny Thanh" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Vinny Thanh


      </span>
      <br>
      <span class="post-author-role">
        Solutions Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../gcp-cloudrun-orb/index.html">
      





<img src="../media/Tutorial-Intermediate-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Nov 27, 2019</span>
    
    
      <span class="post-read-time">10 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../gcp-cloudrun-orb/index.html">
        Continuous integration with the Google Cloud Run orb
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../building-and-testing-an-asp-net-core-application/index.html">
      





<img src="../media/Tutorial-Beginner-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Nov 15, 2019</span>
    
    
      <span class="post-read-time">7 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../building-and-testing-an-asp-net-core-application/index.html">
        Building and testing an ASP.NET Core application
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/dominic-motuka-3d4b989fb8e9f84740969d2f3a89b20d55edadf64c4b4d06c4f62cafc1cc9497.jpg" alt="Dominic Motuka" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Dominic Motuka


      </span>
      <br>
      <span class="post-author-role">
        DevOps Engineer at Andela
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../adding-application-and-image-scanning-to-your-cicd-pipeline/index.html">
      





<img src="../media/Tutorial-Intermediate-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Oct 25, 2019</span>
    
    
      <span class="post-read-time">13 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../adding-application-and-image-scanning-to-your-cicd-pipeline/index.html">
        Adding application and image scans to your CI/CD pipeline
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../state-management-for-flutter-apps-with-mobx/index.html">
      





<img src="../media/Tutorial-Beginner-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Sep 18, 2019</span>
    
    
      <span class="post-read-time">22 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../state-management-for-flutter-apps-with-mobx/index.html">
        State management for Flutter apps with MobX
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/fabusuyi-ayodeji-c5a62d0073f05e02309fa09d970c0f7d6d88ce14308b6944f4a3fdf1b7df6eaa.jpg" alt="Fabusuyi Ayodeji" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Fabusuyi Ayodeji


      </span>
      <br>
      <span class="post-author-role">
        Software Engineering Intern at Busha
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../use-circleci-orbs-to-build-test-and-deploy-a-simple-go-application-to-aws-ecs/index.html">
      





<img src="../media/Tutorial-Intermediate-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Sep 11, 2019</span>
    
    
      <span class="post-read-time">13 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../use-circleci-orbs-to-build-test-and-deploy-a-simple-go-application-to-aws-ecs/index.html">
        Build, test, and deploy a Go application to AWS ECS
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/dominic-motuka-3d4b989fb8e9f84740969d2f3a89b20d55edadf64c4b4d06c4f62cafc1cc9497.jpg" alt="Dominic Motuka" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Dominic Motuka


      </span>
      <br>
      <span class="post-author-role">
        DevOps Engineer at Andela
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../automate-releases-from-pipelines-using-infrastructure-as-code/index.html">
      





<img src="../media/Tutorial-Advanced-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jul 24, 2019</span>
    
    
      <span class="post-read-time">12 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../automate-releases-from-pipelines-using-infrastructure-as-code/index.html">
        Automate releases from your pipelines using Infrastructure as Code
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuous-integration-for-django-projects/index.html">
      





<img src="../media/Tutorial-Beginner-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jul 22, 2019</span>
    
    
      <span class="post-read-time">12 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuous-integration-for-django-projects/index.html">
        Continuous integration for Django projects
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/stanley-ndagi2-c400e98dad1b98a06b9e95a5db985662ac04c88ae77da9c02f2b89d84214603f.jpg" alt="Stanley Ndagi" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Stanley Ndagi


      </span>
      <br>
      <span class="post-author-role">
        Platform and ML Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../simplifying-your-ci-cd-build-pipeline-to-gke-with-circleci-orbs/index.html">
      





<img src="../media/Tutorial-Intermediate-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jul 11, 2019</span>
    
    
      <span class="post-read-time">11 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../simplifying-your-ci-cd-build-pipeline-to-gke-with-circleci-orbs/index.html">
        Simplifying your CI/CD build pipeline to GKE with CircleCI orbs
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/dominic-motuka-3d4b989fb8e9f84740969d2f3a89b20d55edadf64c4b4d06c4f62cafc1cc9497.jpg" alt="Dominic Motuka" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Dominic Motuka


      </span>
      <br>
      <span class="post-author-role">
        DevOps Engineer at Andela
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../how-to-integrate-restful-apis-into-ci-cd-pipelines/index.html">
      





<img src="../media/Tutorial-Beginner-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jul 3, 2019</span>
    
    
      <span class="post-read-time">9 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../how-to-integrate-restful-apis-into-ci-cd-pipelines/index.html">
        How to integrate RESTful APIs into CI/CD pipelines
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/ron-powell-adefb5d5f7ee7582721f0720c499d478f90a8e26f33e382b3d721c75462bd524.jpg" alt="Ron Powell" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/ron-powell/index.html">
    Ron Powell
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Technical Content Marketing Manager
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../automatically-deploy-a-gatsby-site-to-firebase-hosting/index.html">
      





<img src="../media/Tutorial-Intermediate-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jun 18, 2019</span>
    
    
      <span class="post-read-time">10 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../automatically-deploy-a-gatsby-site-to-firebase-hosting/index.html">
        Automatically deploy a Gatsby site to Firebase Hosting
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/kevin-ndungu-a5284daf4537ec5305389aa520a208fb7245f2f7510f4a87f7dd318efbae0c2b.jpg" alt="Kevin Ndung'u" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Kevin Ndung'u


      </span>
      <br>
      <span class="post-author-role">
        
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../triggering-trusted-ci-jobs-on-untrusted-forks/index.html">
      





<img src="../media/Tutorial-Intermediate-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">May 21, 2019</span>
    
    
      <span class="post-read-time">10 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../triggering-trusted-ci-jobs-on-untrusted-forks/index.html">
        Triggering trusted CI jobs on untrusted forks
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/jeff-klukas-833759e416f8e90fdef8c826d52bc5252ab83f7b408abb0081c47c628f661360.jpg" alt="Jeff Klukas" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Jeff Klukas


      </span>
      <br>
      <span class="post-author-role">
        
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../debugging-ci-cd-pipelines-with-ssh-access/index.html">
      





<img src="../media/Tutorial-Beginner-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Apr 11, 2019</span>
    
    
      <span class="post-read-time">7 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../debugging-ci-cd-pipelines-with-ssh-access/index.html">
        Debugging CI/CD pipelines with SSH access
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../piecing-together-build-and-test-results-with-artifacts/index.html">
      





<img src="../media/Tutorial-Beginner-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Apr 9, 2019</span>
    
    
      <span class="post-read-time">5 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../piecing-together-build-and-test-results-with-artifacts/index.html">
        Piecing together build and test results with artifacts
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/jayson-smith-7fe251aa95b38add32afbf387744dc012579b1d3b5eafe66d7ce3e6a07708491.jpg" alt="Jayson Smith" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Jayson Smith


      </span>
      <br>
      <span class="post-author-role">
        Software Engineer at Freshly
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../ci-cd-for-node-js-projects-using-circleci-kubernetes-and-docker-with-deployment-to-the-google-cloud-platform/index.html">
      





<img src="../media/Tutorial-Intermediate-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Mar 26, 2019</span>
    
    
      <span class="post-read-time">10 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../ci-cd-for-node-js-projects-using-circleci-kubernetes-and-docker-with-deployment-to-the-google-cloud-platform/index.html">
        CI/CD for Node.js projects: using CircleCI, Kubernetes, and Docker with deployment to the Google Cloud Platform
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/collins-wekesa-fb64a626c8007a7f1f07cea61077956dec99dd437a202a482a9852b678328c15.jpg" alt="Collins Wekesa" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Collins Wekesa


      </span>
      <br>
      <span class="post-author-role">
        DevOps Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../package-a-clojure-web-application-using-docker/index.html">
      





<img src="../media/Tutorial-Intermediate-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Mar 19, 2019</span>
    
    
      <span class="post-read-time">21 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../package-a-clojure-web-application-using-docker/index.html">
        Package a Clojure web application using Docker
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/chris-howe-jones-af0c7805c168ff0a4d1a4efcf4fde86f2df84a8fff2c516f09ad543897cc193c.jpg" alt="Chris Howe-Jones" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Chris Howe-Jones


      </span>
      <br>
      <span class="post-author-role">
        Software Architect
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../how-to-output-junit-tests-through-circleci-2-0-for-expanded-insights/index.html">
      





<img src="../media/Tutorial-Beginner-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Feb 14, 2019</span>
    
    
      <span class="post-read-time">7 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../how-to-output-junit-tests-through-circleci-2-0-for-expanded-insights/index.html">
        How to output JUnit tests through CircleCI 2.0 for expanded Insights
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/jayson-smith-7fe251aa95b38add32afbf387744dc012579b1d3b5eafe66d7ce3e6a07708491.jpg" alt="Jayson Smith" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Jayson Smith


      </span>
      <br>
      <span class="post-author-role">
        Software Engineer at Freshly
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../build-a-clojure-web-app-using-duct/index.html">
      





<img src="../media/Tutorial-Intermediate-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Feb 12, 2019</span>
    
    
      <span class="post-read-time">16 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../build-a-clojure-web-app-using-duct/index.html">
        Build a Clojure web app using Duct
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/chris-howe-jones-af0c7805c168ff0a4d1a4efcf4fde86f2df84a8fff2c516f09ad543897cc193c.jpg" alt="Chris Howe-Jones" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Chris Howe-Jones


      </span>
      <br>
      <span class="post-author-role">
        Software Architect
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../continuously-testing-react-applications-with-jest-and-enzyme/index.html">
      





<img src="../media/Tutorial-Intermediate-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Feb 5, 2019</span>
    
    
      <span class="post-read-time">19 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../continuously-testing-react-applications-with-jest-and-enzyme/index.html">
        Continuously testing React applications with Jest and Enzyme
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/kevin-ndungu-a5284daf4537ec5305389aa520a208fb7245f2f7510f4a87f7dd318efbae0c2b.jpg" alt="Kevin Ndung'u" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Kevin Ndung'u


      </span>
      <br>
      <span class="post-author-role">
        
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../deploying-documentation-to-github-pages-with-continuous-integration/index.html">
      





<img src="../media/Tutorial-Intermediate-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Jan 3, 2019</span>
    
    
      <span class="post-read-time">13 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../deploying-documentation-to-github-pages-with-continuous-integration/index.html">
        Deploying documentation to GitHub Pages with continuous integration
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/jeff-klukas-833759e416f8e90fdef8c826d52bc5252ab83f7b408abb0081c47c628f661360.jpg" alt="Jeff Klukas" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Jeff Klukas


      </span>
      <br>
      <span class="post-author-role">
        
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../orbs-aws-ecr/index.html">
      





<img src="../media/Tutorial-Beginner-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Dec 20, 2018</span>
    
    
      <span class="post-read-time">5 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../orbs-aws-ecr/index.html">
        Building CI/CD pipelines using the CircleCI AWS ECR Orb
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../using-circleci-workflows-to-replicate-docker-hub-automated-builds/index.html">
      





<img src="../media/Tutorial-Beginner-A.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Dec 18, 2018</span>
    
    
      <span class="post-read-time">8 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../using-circleci-workflows-to-replicate-docker-hub-automated-builds/index.html">
        Using CircleCI workflows to replicate Docker Hub automated builds
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/jonathan-cardoso-2c7c37249c5f76068b27bd8819fd71306c7290eda51b61eea01501ea631a82d3.jpg" alt="Jonathan Cardoso" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Jonathan Cardoso


      </span>
      <br>
      <span class="post-author-role">
        
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../deploying-using-terraform-gcp/index.html">
      





<img src="../media/Tutorial-Advanced-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Dec 13, 2018</span>
    
    
      <span class="post-read-time">5 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../deploying-using-terraform-gcp/index.html">
        Deploy applications using CircleCI, Docker, HashiCorp Terraform, and Google Cloud
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/angel-rivera-871295d1a93a85fdd2bdda32af743d00e2ef734346dca4af1f9df34e9e22d40e.jpg" alt="Angel Rivera" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  <a href="../author/angel-rivera/index.html">
    Angel Rivera
  </a>


      </span>
      <br>
      <span class="post-author-role">
        Developer Advocate
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../how-to-boost-build-time-with-test-parallelism/index.html">
      





<img src="../media/Tutorial-Beginner-B.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Nov 15, 2018</span>
    
    
      <span class="post-read-time">5 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../how-to-boost-build-time-with-test-parallelism/index.html">
        How to boost build time with test parallelism
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/karel-rochel-8e92034e4692f70941b9e382269707d2594e6c4c953bac62fe8207394bd0ffe2.jpg" alt="Karel Rochelt" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Karel Rochelt


      </span>
      <br>
      <span class="post-author-role">
        
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../decrease-your-build-times-by-running-jobs-in-parallel-with-workflows/index.html">
      





<img src="../media/Tutorial-Beginner-C.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Nov 9, 2018</span>
    
    
      <span class="post-read-time">9 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../decrease-your-build-times-by-running-jobs-in-parallel-with-workflows/index.html">
        Decrease your build times by running jobs in parallel with workflows
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/jayson-smith-7fe251aa95b38add32afbf387744dc012579b1d3b5eafe66d7ce3e6a07708491.jpg" alt="Jayson Smith" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Jayson Smith


      </span>
      <br>
      <span class="post-author-role">
        Software Engineer at Freshly
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../managing-secrets-when-you-have-pull-requests-from-outside-contributors/index.html">
      





<img src="../media/Tutorial-Intermediate-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Oct 30, 2018</span>
    
    
      <span class="post-read-time">7 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../managing-secrets-when-you-have-pull-requests-from-outside-contributors/index.html">
        Managing secrets when you have pull requests from outside contributors
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/jeff-klukas-833759e416f8e90fdef8c826d52bc5252ab83f7b408abb0081c47c628f661360.jpg" alt="Jeff Klukas" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Jeff Klukas


      </span>
      <br>
      <span class="post-author-role">
        
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
    <div class="card blog-post-tile">
  <div class="card-img-top">
    <a href="../setting-up-continuous-integration-with-github/index.html">
      





<img src="../media/Tutorial-Beginner-D.jpg" alt="" />

    </a>
  </div>

  <div class="card-body">
    

<p class="post-metadata">
  
    
    
      <span class="post-primary-tag">Tutorials</span>
    
  
  <span class="post-not-tag">
    
      <span class="post-date">Sep 17, 2018</span>
    
    
      <span class="post-read-time">7 min read</span>
    
  </span>
</p>

    <h2 class="post-link">
      <a href="../setting-up-continuous-integration-with-github/index.html">
        Setting up continuous integration with GitHub
      </a>
    </h2>
  </div>

  <div class="card-footer">
    









<div class="post-author-info">
  <div class="media">
    <div class="media-left">
      

  
  
    
  

  
  
    
    

<img class="cci-avatar" src="../../../d3r49iyjzglexf.cloudfront.net/people/stanley-ndagi2-c400e98dad1b98a06b9e95a5db985662ac04c88ae77da9c02f2b89d84214603f.jpg" alt="Stanley Ndagi" />

    </div>
    <p class="media-body media-middle">
      <span class="post-author-name">
        


  Stanley Ndagi


      </span>
      <br>
      <span class="post-author-role">
        Platform and ML Engineer
      </span>
    </p>
  </div>
</div>

  </div>
</div>

  
</div>

    
  </div>
</div>

<div class="interstitial-signup signup-en container" style="display: none;">
  <div class="row">
    <div class="readable-width">
      <div class="card">
        <div class="card-body">
          <div class="blog-post-signup-form">
  <h2>Subscribe to our blog</h2>
  <p>Get the latest posts in your inbox</p>
  <form action="https://cb4a24d2-9149-40cc-b03f-7704f01a36f8.trayapp.io/"
    class="html5-form box"
    data-modal="subscribe"
    data-submit-event="subscribe-blog-newsletter"
    data-analytics-cta-text="Subscribe Now"
    data-analytics-location="Blog newsletter subscription"
  >
    <input class="white mailcheck" type="email" placeholder="Email Address" name="email" required>
    <div class="molecule country-dropdown">
  <select required class="form-control" name="country" >
    <option disabled selected value="">Country</option>
    <option value="United States">United States</option>
    <option value="Canada">Canada</option>
    <option disabled>----</option>
    
    
        <option value="Afghanistan">Afghanistan</option>
    
        <option value="Aland Islands">Aland Islands</option>
    
        <option value="Albania">Albania</option>
    
        <option value="Algeria">Algeria</option>
    
        <option value="Andorra">Andorra</option>
    
        <option value="Angola">Angola</option>
    
        <option value="Anguilla">Anguilla</option>
    
        <option value="Antarctica">Antarctica</option>
    
        <option value="Antigua and Barbuda">Antigua and Barbuda</option>
    
        <option value="Argentina">Argentina</option>
    
        <option value="Armenia">Armenia</option>
    
        <option value="Aruba">Aruba</option>
    
        <option value="Australia">Australia</option>
    
        <option value="Austria">Austria</option>
    
        <option value="Azerbaijan">Azerbaijan</option>
    
        <option value="Bahamas">Bahamas</option>
    
        <option value="Bahrain">Bahrain</option>
    
        <option value="Bangladesh">Bangladesh</option>
    
        <option value="Barbados">Barbados</option>
    
        <option value="Belarus">Belarus</option>
    
        <option value="Belgium">Belgium</option>
    
        <option value="Belize">Belize</option>
    
        <option value="Benin">Benin</option>
    
        <option value="Bermuda">Bermuda</option>
    
        <option value="Bhutan">Bhutan</option>
    
        <option value="Bolivia, Plurinational State of">Bolivia, Plurinational State of</option>
    
        <option value="Bonaire, Sint Eustatius and Saba">Bonaire, Sint Eustatius and Saba</option>
    
        <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
    
        <option value="Botswana">Botswana</option>
    
        <option value="Bouvet Island">Bouvet Island</option>
    
        <option value="Brazil">Brazil</option>
    
        <option value="British Indian Ocean Territory">British Indian Ocean Territory</option>
    
        <option value="Brunei Darussalam">Brunei Darussalam</option>
    
        <option value="Bulgaria">Bulgaria</option>
    
        <option value="Burkina Faso">Burkina Faso</option>
    
        <option value="Burundi">Burundi</option>
    
        <option value="Cambodia">Cambodia</option>
    
        <option value="Cameroon">Cameroon</option>
    
        <option value="Cape Verde">Cape Verde</option>
    
        <option value="Cayman Islands">Cayman Islands</option>
    
        <option value="Central African Republic">Central African Republic</option>
    
        <option value="Chad">Chad</option>
    
        <option value="Chile">Chile</option>
    
        <option value="China">China</option>
    
        <option value="Christmas Island">Christmas Island</option>
    
        <option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option>
    
        <option value="Colombia">Colombia</option>
    
        <option value="Comoros">Comoros</option>
    
        <option value="Congo">Congo</option>
    
        <option value="Congo, the Democratic Republic of the">Congo, the Democratic Republic of the</option>
    
        <option value="Cook Islands">Cook Islands</option>
    
        <option value="Costa Rica">Costa Rica</option>
    
        <option value="Cote d’Ivoire">Cote d’Ivoire</option>
    
        <option value="Croatia">Croatia</option>
    
        <option value="Cuba">Cuba</option>
    
        <option value="Curaçao">Curaçao</option>
    
        <option value="Cyprus">Cyprus</option>
    
        <option value="Czech Republic">Czech Republic</option>
    
        <option value="Denmark">Denmark</option>
    
        <option value="Djibouti">Djibouti</option>
    
        <option value="Dominica">Dominica</option>
    
        <option value="Dominican Republic">Dominican Republic</option>
    
        <option value="Ecuador">Ecuador</option>
    
        <option value="Egypt">Egypt</option>
    
        <option value="El Salvador">El Salvador</option>
    
        <option value="Equatorial Guinea">Equatorial Guinea</option>
    
        <option value="Eritrea">Eritrea</option>
    
        <option value="Estonia">Estonia</option>
    
        <option value="Ethiopia">Ethiopia</option>
    
        <option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option>
    
        <option value="Faroe Islands">Faroe Islands</option>
    
        <option value="Fiji">Fiji</option>
    
        <option value="Finland">Finland</option>
    
        <option value="France">France</option>
    
        <option value="French Guiana">French Guiana</option>
    
        <option value="French Polynesia">French Polynesia</option>
    
        <option value="French Southern Territories">French Southern Territories</option>
    
        <option value="Gabon">Gabon</option>
    
        <option value="Gambia">Gambia</option>
    
        <option value="Georgia">Georgia</option>
    
        <option value="Germany">Germany</option>
    
        <option value="Ghana">Ghana</option>
    
        <option value="Gibraltar">Gibraltar</option>
    
        <option value="Greece">Greece</option>
    
        <option value="Greenland">Greenland</option>
    
        <option value="Grenada">Grenada</option>
    
        <option value="Guadeloupe">Guadeloupe</option>
    
        <option value="Guatemala">Guatemala</option>
    
        <option value="Guernsey">Guernsey</option>
    
        <option value="Guinea">Guinea</option>
    
        <option value="Guinea-Bissau">Guinea-Bissau</option>
    
        <option value="Guyana">Guyana</option>
    
        <option value="Haiti">Haiti</option>
    
        <option value="Heard Island and McDonald Islands">Heard Island and McDonald Islands</option>
    
        <option value="Holy See (Vatican City State)">Holy See (Vatican City State)</option>
    
        <option value="Honduras">Honduras</option>
    
        <option value="Hungary">Hungary</option>
    
        <option value="Iceland">Iceland</option>
    
        <option value="India">India</option>
    
        <option value="Indonesia">Indonesia</option>
    
        <option value="Iran, Islamic Republic of">Iran, Islamic Republic of</option>
    
        <option value="Iraq">Iraq</option>
    
        <option value="Ireland">Ireland</option>
    
        <option value="Isle of Man">Isle of Man</option>
    
        <option value="Israel">Israel</option>
    
        <option value="Italy">Italy</option>
    
        <option value="Jamaica">Jamaica</option>
    
        <option value="Japan">Japan</option>
    
        <option value="Jersey">Jersey</option>
    
        <option value="Jordan">Jordan</option>
    
        <option value="Kazakhstan">Kazakhstan</option>
    
        <option value="Kenya">Kenya</option>
    
        <option value="Kiribati">Kiribati</option>
    
        <option value="Korea, Democratic People’s Republic of">Korea, Democratic People’s Republic of</option>
    
        <option value="Korea, Republic of">Korea, Republic of</option>
    
        <option value="Kuwait">Kuwait</option>
    
        <option value="Kyrgyzstan">Kyrgyzstan</option>
    
        <option value="Lao People’s Democratic Republic">Lao People’s Democratic Republic</option>
    
        <option value="Latvia">Latvia</option>
    
        <option value="Lebanon">Lebanon</option>
    
        <option value="Lesotho">Lesotho</option>
    
        <option value="Liberia">Liberia</option>
    
        <option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option>
    
        <option value="Liechtenstein">Liechtenstein</option>
    
        <option value="Lithuania">Lithuania</option>
    
        <option value="Luxembourg">Luxembourg</option>
    
        <option value="Macao">Macao</option>
    
        <option value="Macedonia, the former Yugoslav Republic of">Macedonia, the former Yugoslav Republic of</option>
    
        <option value="Madagascar">Madagascar</option>
    
        <option value="Malawi">Malawi</option>
    
        <option value="Malaysia">Malaysia</option>
    
        <option value="Maldives">Maldives</option>
    
        <option value="Mali">Mali</option>
    
        <option value="Malta">Malta</option>
    
        <option value="Martinique">Martinique</option>
    
        <option value="Mauritania">Mauritania</option>
    
        <option value="Mauritius">Mauritius</option>
    
        <option value="Mayotte">Mayotte</option>
    
        <option value="Mexico">Mexico</option>
    
        <option value="Moldova, Republic of">Moldova, Republic of</option>
    
        <option value="Monaco">Monaco</option>
    
        <option value="Mongolia">Mongolia</option>
    
        <option value="Montenegro">Montenegro</option>
    
        <option value="Montserrat">Montserrat</option>
    
        <option value="Morocco">Morocco</option>
    
        <option value="Mozambique">Mozambique</option>
    
        <option value="Myanmar">Myanmar</option>
    
        <option value="Namibia">Namibia</option>
    
        <option value="Nauru">Nauru</option>
    
        <option value="Nepal">Nepal</option>
    
        <option value="Netherlands">Netherlands</option>
    
        <option value="New Caledonia">New Caledonia</option>
    
        <option value="New Zealand">New Zealand</option>
    
        <option value="Nicaragua">Nicaragua</option>
    
        <option value="Niger">Niger</option>
    
        <option value="Nigeria">Nigeria</option>
    
        <option value="Niue">Niue</option>
    
        <option value="Norfolk Island">Norfolk Island</option>
    
        <option value="Norway">Norway</option>
    
        <option value="Oman">Oman</option>
    
        <option value="Pakistan">Pakistan</option>
    
        <option value="Palestine">Palestine</option>
    
        <option value="Panama">Panama</option>
    
        <option value="Papua New Guinea">Papua New Guinea</option>
    
        <option value="Paraguay">Paraguay</option>
    
        <option value="Peru">Peru</option>
    
        <option value="Philippines">Philippines</option>
    
        <option value="Pitcairn">Pitcairn</option>
    
        <option value="Poland">Poland</option>
    
        <option value="Portugal">Portugal</option>
    
        <option value="Qatar">Qatar</option>
    
        <option value="Reunion">Reunion</option>
    
        <option value="Romania">Romania</option>
    
        <option value="Russian Federation">Russian Federation</option>
    
        <option value="Rwanda">Rwanda</option>
    
        <option value="Saint Barthélemy">Saint Barthélemy</option>
    
        <option value="Saint Helena, Ascension and Tristan da Cunha">Saint Helena, Ascension and Tristan da Cunha</option>
    
        <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
    
        <option value="Saint Lucia">Saint Lucia</option>
    
        <option value="Saint Martin (French part)">Saint Martin (French part)</option>
    
        <option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option>
    
        <option value="Saint Vincent and the Grenadines">Saint Vincent and the Grenadines</option>
    
        <option value="Samoa">Samoa</option>
    
        <option value="San Marino">San Marino</option>
    
        <option value="Sao Tome and Principe">Sao Tome and Principe</option>
    
        <option value="Saudi Arabia">Saudi Arabia</option>
    
        <option value="Senegal">Senegal</option>
    
        <option value="Serbia">Serbia</option>
    
        <option value="Seychelles">Seychelles</option>
    
        <option value="Sierra Leone">Sierra Leone</option>
    
        <option value="Singapore">Singapore</option>
    
        <option value="Sint Maarten (Dutch part)">Sint Maarten (Dutch part)</option>
    
        <option value="Slovakia">Slovakia</option>
    
        <option value="Slovenia">Slovenia</option>
    
        <option value="Solomon Islands">Solomon Islands</option>
    
        <option value="Somalia">Somalia</option>
    
        <option value="South Africa">South Africa</option>
    
        <option value="South Georgia and the South Sandwich Islands">South Georgia and the South Sandwich Islands</option>
    
        <option value="South Sudan">South Sudan</option>
    
        <option value="Spain">Spain</option>
    
        <option value="Sri Lanka">Sri Lanka</option>
    
        <option value="Sudan">Sudan</option>
    
        <option value="Suriname">Suriname</option>
    
        <option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option>
    
        <option value="Swaziland">Swaziland</option>
    
        <option value="Sweden">Sweden</option>
    
        <option value="Switzerland">Switzerland</option>
    
        <option value="Syrian Arab Republic">Syrian Arab Republic</option>
    
        <option value="Taiwan">Taiwan</option>
    
        <option value="Tajikistan">Tajikistan</option>
    
        <option value="Tanzania, United Republic of">Tanzania, United Republic of</option>
    
        <option value="Thailand">Thailand</option>
    
        <option value="Timor-Leste">Timor-Leste</option>
    
        <option value="Togo">Togo</option>
    
        <option value="Tokelau">Tokelau</option>
    
        <option value="Tonga">Tonga</option>
    
        <option value="Trinidad and Tobago">Trinidad and Tobago</option>
    
        <option value="Tunisia">Tunisia</option>
    
        <option value="Turkey">Turkey</option>
    
        <option value="Turkmenistan">Turkmenistan</option>
    
        <option value="Turks and Caicos Islands">Turks and Caicos Islands</option>
    
        <option value="Tuvalu">Tuvalu</option>
    
        <option value="Uganda">Uganda</option>
    
        <option value="Ukraine">Ukraine</option>
    
        <option value="United Arab Emirates">United Arab Emirates</option>
    
        <option value="United Kingdom">United Kingdom</option>
    
        <option value="Uruguay">Uruguay</option>
    
        <option value="Uzbekistan">Uzbekistan</option>
    
        <option value="Vanuatu">Vanuatu</option>
    
        <option value="Venezuela, Bolivarian Republic of">Venezuela, Bolivarian Republic of</option>
    
        <option value="Vietnam">Vietnam</option>
    
        <option value="Virgin Islands, British">Virgin Islands, British</option>
    
        <option value="Wallis and Futuna">Wallis and Futuna</option>
    
        <option value="Western Sahara">Western Sahara</option>
    
        <option value="Yemen">Yemen</option>
    
        <option value="Zambia">Zambia</option>
    
        <option value="Zimbabwe">Zimbabwe</option>
    
  </select>
</div>
    <button type="submit" class="button-solid full-width">Subscribe Now</button>
    <div class="form-group">
      <p class="small">
        By submitting this form, you are agreeing to our
<a href="../../legal/enterprise-license-agreement/index.html">Terms of Service</a> and
<a href="../../privacy/index.html">Privacy Policy</a>.
      </p>
    </div>
  </form>
</div>

        </div>
      </div>
    </div>
  </div>
</div>



<script src="../../../cdnjs.cloudflare.com/ajax/libs/instantsearch.js/2.10.2/instantsearch.min.js"></script>

      <footer class="footer" data-analytics="clicked-footer" data-analytics-parent>
  <div class="container">
    <div class="row">
      <nav>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Product</h6>
          <ul class="list-unstyled">
            <li><a href="../../product/index.html" data-analytics-child='{ "menu": "product" }'>Overview</a></li>
            <li><a href="../../pricing/index.html" data-analytics-child='{ "menu": "pricing" }'>Pricing</a></li>
            <li><a href="../../integrations/index.html" data-analytics-child='{ "menu": "integrations" }'>Integrations</a></li>
            <li><a href="../../open-source/index.html" data-analytics-child='{ "menu": "open-source" }'>Open Source</a></li>
            <li><a href="../../enterprise/index.html" data-analytics-child='{ "menu": "enterprise" }'>Enterprise</a></li>
            <li><a href="../../changelog/index.html" data-analytics-child='{ "menu": "changelog" }'>Changelog</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Support</h6>
          <ul class="list-unstyled">
            <li><a href="../../docs/index.html" data-analytics-child='{ "menu": "documentation" }'>Documentation</a></li>
            <li><a href="https://academy.circleci.com/?access_code=public-2020" data-analytics-child='{ "menu": "training" }' target="_blank" rel="noreferrer noopener">Training</a></li>
            <li><a href="https://support.circleci.com/hc/en-us" data-analytics-child='{ "menu": "get-support" }' target="_blank" rel="noreferrer noopener">Get Support</a></li>
            <li><a href="https://discuss.circleci.com/" data-analytics-child='{ "menu": "community-forum" }' target="_blank" rel="noreferrer noopener">Community Forum</a></li>
            <li><a href="https://status.circleci.com/" data-analytics-child='{ "menu": "system-status" }' target="_blank" rel="noreferrer noopener">System Status</a></li>
            <li><a href="https://ideas.circleci.com/" data-analytics-child='{ "menu": "feature-requests" }' target="_blank" rel="noreferrer noopener">Feature Requests</a></li>
            <li><a href="../../support/premium-support/index.html" data-analytics-child='{ "menu": "premium-support" }'>Premium Support</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Resources</h6>
          <ul class="list-unstyled">
            <li><a href="../index.html" data-analytics-child='{ "menu": "blog" }'>Blog</a></li>
            <li><a href="../../resources/index.html#ebooks" data-analytics-child='{ "menu": "ebooks" }'>Ebooks</a></li>
            <li><a href="../../customers/index.html" data-analytics-child='{ "menu": "case-studies" }'>Case Studies</a></li>
            <li><a href="../../resources/index.html#reports" data-analytics-child='{ "menu": "reports" }'>Reports</a></li>
            <li><a href="../../resources/index.html#videos" data-analytics-child='{ "menu": "videos" }'>Videos</a></li>
            <li><a href="../../resources/index.html#webinars" data-analytics-child='{ "menu": "webinars" }'>Webinars</a></li>
            <li><a href="../../resources/events/index.html" data-analytics-child='{ "menu": "events" }'>Events</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Company</h6>
          <ul class="list-unstyled">
            <li><a href="../../about/index.html" data-analytics-child='{ "menu": "about-us" }'>About Us</a></li>
            <li><a href="../../careers/index.html" data-analytics-child='{ "menu": "careers" }'>Careers <span class="text-blue">(We’re Hiring!)</span></a></li>
            <li><a href="../../about/team/index.html" data-analytics-child='{ "menu": "team" }'>Team</a></li>
            <li><a href="../../contact/index.html" data-analytics-child='{ "menu": "contact-us" }'>Contact Us</a></li>
            <li><a href="../../partners/index.html" data-analytics-child='{ "menu": "partner-with-us" }'>Partner With Us</a></li>
            <li><a href="../../newsroom/index.html" data-analytics-child='{ "menu": "newsroom" }'>Newsroom</a></li>
          </ul>
        </div>
        <div class="col-md-2 col-sm-3 col-xs-6">
          <h6>Getting Started</h6>
          <ul>
            <li><a href="../../continuous-integration/index.html" data-analytics-child='{ "menu": "what-is-ci" }'>What is CI?</a></li>
            <li><a href="../../docs/2.0/index.html" data-analytics-child='{ "menu": "how-to-get-started" }'>How to Get Started on CircleCI</a></li>
            <li><a href="../../migrate-jenkins-to-circleci/index.html" data-analytics-child='{ "menu": "migrate-jenkins-to-circleci" }'>Migrate from Jenkins to CircleCI</a></li>
          </ul>
        </div>
      </nav>
    </div>
    <div class="row margin-top-medium">
      <div class="col-md-2 col-xs-4">
        <a href="../../index.html">
          <img src="https://d3r49iyjzglexf.cloudfront.net/logo-wordmark-26f8eaea9b0f6e13b90d3f4a8fd8fda31490f5af41daab98bbede45037682576.svg" class="logo-small margin-top-small" alt="CircleCI" />
        </a>
      </div>
      <div class="col-md-4 col-md-offset-6 col-xs-offset-0 col-xs-8">
        <div class="float-right">
          <div class="social-container row">
  <div class="social-btns col-xs-12">
    <a href="../feed.xml" data-analytics="property menu=blog-feed" class="social-btn-rss" title="RSS">
      <i class="fa fa-rss" aria-hidden="true"></i><span class="sr-only">RSS</span>
    </a>
    <a href="https://www.facebook.com/circleci" data-analytics="property menu=facebook" target="_blank" rel="noreferrer noopener" class="social-btn-facebook" title="Facebook">
      <i class="fa fa-facebook-official" aria-hidden="true"></i><span class="sr-only">Facebook</span>
    </a>
    <a href="https://twitter.com/circleci" data-analytics="property menu=twitter" target="_blank" rel="noreferrer noopener" class="social-btn-twitter" title="Twitter">
      <i class="fa fa-twitter" aria-hidden="true"></i><span class="sr-only">Twitter</span>
    </a>
    <a href="https://github.com/circleci" data-analytics="property menu=github" target="_blank" rel="noreferrer noopener" class="social-btn-github" title="GitHub">
      <i class="fa fa-github" aria-hidden="true"></i><span class="sr-only">GitHub</span>
    </a>
    <a href="https://www.linkedin.com/company/circleci" data-analytics="property menu=linkedin" target="_blank" rel="noreferrer noopener" class="social-btn-linkedin" title="LinkedIn">
      <i class="fa fa-linkedin" aria-hidden="true"></i><span class="sr-only">LinkedIn</span>
    </a>
  </div>
</div>

        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <hr class="dark no-margin">
        <div class="margin-top-small text-center-small-float-left">
          <nav>
            <ul class="horizontal blue">
              <li><a href="../../terms-of-service/index.html" data-analytics-child='{ "menu": "terms-of-service" }'>Terms of Service</a></li>
              <li><a href="../../privacy/index.html" data-analytics-child='{ "menu": "privacy-policy" }'>Privacy Policy</a></li>
              <li><a href="../../legal/cookie-policy/index.html" data-analytics-child='{ "menu": "cookie-policy" }'>Cookie Policy</a></li>
              <li><a href="../../security/index.html" data-analytics-child='{ "menu": "security" }'>Security</a></li>
              





<li class="language-select">
  <div class="dropup show">
    <a class="dropdown-toggle-button" role="button" id="languageSelectDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" tabindex="0">
      <img src="https://d3r49iyjzglexf.cloudfront.net/icons/ic-globe-9b9d0a726c1f0701f8219b4fc07a0d78aa9c31a79a8fa3d96e4fe4a84bc6cdbc.svg" alt="Globe Icon" width="20" />
      English (US)
      <i class="fa fa-angle-up"></i>
    </a>

    <div class="dropdown-menu"  aria-labelledby="languageSelectDropdown">
      
        
        

        
        

        
          <a href="#" class="dropdown-item active">
            English (US)
          </a>
        
      
        
        

        
        

        
          <a href="../../ja/blog/deploy-a-clojure-web-application-to-aws-using-terraform/index.html"
            class="dropdown-item"
            hreflang="ja"
            data-analytics-child='{ "menu": "japan" }'>
            日本語
          </a>
        
      
    </div>
  </div>
</li>

            </ul>
          </nav>
        </div>
        <div class="margin-top-small text-center-small-float-right">
          <span>© 2020 Circle Internet Services, Inc., All Rights Reserved.</span>
        </div>
      </div>
    </div>
  </div>
</footer>

    </main>
    <div id="enterprise-form-thanks-modal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <h2><strong>Thank You</strong> for Submitting Your Info</h2>
        <p>You should receive an automated response notifying you that we received your info.
          Someone from our Enterprise team will be reaching out to you shortly.</p>
        <!--
        <p>
          For more information on the CircleCI Enterprise implementation, please visit our
          documentation:
          <a href="#">Getting started with CircleCI Enterpirse implementation</a>
        </p>
        -->
        <img src="https://d3r49iyjzglexf.cloudfront.net/logo-circleci-success-6aedc613f69c215145f9bda7170fc957a228af7e9eeecc05ed5973b2ce9be157.svg" alt="CircleCI Success Logo" />
      </div><!-- /.modal-body -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

    <div id="modal-bg"></div>
<div id="general-modal">
  <div class="close"><img src="https://d3r49iyjzglexf.cloudfront.net/icons/ic-closemodal-e5465eb844ab16c421cfedfc19b69bbebfc2990b205a5a8e325d38f7a7cd78d2.svg" alt="close" /></div>
  <h2><strong>Thank You</strong> for Submitting Your Info</h2>
  <br>
  <p>You should receive an automated response notifying you that we received your info. Someone from our Enterprise team will be reaching out to you shortly.</p><br>
  <img src="https://d3r49iyjzglexf.cloudfront.net/logo-circleci-success-6aedc613f69c215145f9bda7170fc957a228af7e9eeecc05ed5973b2ce9be157.svg" alt="CircleCI Success Logo" />
</div>

    <script data-cookieconsent="statistics" type="text/plain">
  var _rollbarConfig = {
    accessToken: '8a5b4f362a9944b09353878fbbf882f5',
    captureUncaught: true,
    captureUnhandledRejections: true,
     payload: { environment: "production" }
  };
 
  // Rollbar Snippet
  !function(r){function e(n){if(o[n])return o[n].exports;var t=o[n]={exports:{},id:n,loaded:!1};return r[n].call(t.exports,t,t.exports,e),t.loaded=!0,t.exports}var o={};return e.m=r,e.c=o,e.p="",e(0)}([function(r,e,o){"use strict";var n=o(1),t=o(4);_rollbarConfig=_rollbarConfig||{},_rollbarConfig.rollbarJsUrl=_rollbarConfig.rollbarJsUrl||"https://cdnjs.cloudflare.com/ajax/libs/rollbar.js/2.4.6/rollbar.min.js",_rollbarConfig.async=void 0===_rollbarConfig.async||_rollbarConfig.async;var a=n.setupShim(window,_rollbarConfig),l=t(_rollbarConfig);window.rollbar=n.Rollbar,a.loadFull(window,document,!_rollbarConfig.async,_rollbarConfig,l)},function(r,e,o){"use strict";function n(r){return function(){try{return r.apply(this,arguments)}catch(r){try{console.error("[Rollbar]: Internal error",r)}catch(r){}}}}function t(r,e){this.options=r,this._rollbarOldOnError=null;var o=s++;this.shimId=function(){return o},"undefined"!=typeof window&&window._rollbarShims&&(window._rollbarShims[o]={handler:e,messages:[]})}function a(r,e){if(r){var o=e.globalAlias||"Rollbar";if("object"==typeof r[o])return r[o];r._rollbarShims={},r._rollbarWrappedError=null;var t=new p(e);return n(function(){e.captureUncaught&&(t._rollbarOldOnError=r.onerror,i.captureUncaughtExceptions(r,t,!0),i.wrapGlobals(r,t,!0)),e.captureUnhandledRejections&&i.captureUnhandledRejections(r,t,!0);var n=e.autoInstrument;return e.enabled!==!1&&(void 0===n||n===!0||"object"==typeof n&&n.network)&&r.addEventListener&&(r.addEventListener("load",t.captureLoad.bind(t)),r.addEventListener("DOMContentLoaded",t.captureDomContentLoaded.bind(t))),r[o]=t,t})()}}function l(r){return n(function(){var e=this,o=Array.prototype.slice.call(arguments,0),n={shim:e,method:r,args:o,ts:new Date};window._rollbarShims[this.shimId()].messages.push(n)})}var i=o(2),s=0,d=o(3),c=function(r,e){return new t(r,e)},p=function(r){return new d(c,r)};t.prototype.loadFull=function(r,e,o,t,a){var l=function(){var e;if(void 0===r._rollbarDidLoad){e=new Error("rollbar.js did not load");for(var o,n,t,l,i=0;o=r._rollbarShims[i++];)for(o=o.messages||[];n=o.shift();)for(t=n.args||[],i=0;i<t.length;++i)if(l=t[i],"function"==typeof l){l(e);break}}"function"==typeof a&&a(e)},i=!1,s=e.createElement("script"),d=e.getElementsByTagName("script")[0],c=d.parentNode;s.crossOrigin="",s.src=t.rollbarJsUrl,o||(s.async=!0),s.onload=s.onreadystatechange=n(function(){if(!(i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){s.onload=s.onreadystatechange=null;try{c.removeChild(s)}catch(r){}i=!0,l()}}),c.insertBefore(s,d)},t.prototype.wrap=function(r,e,o){try{var n;if(n="function"==typeof e?e:function(){return e||{}},"function"!=typeof r)return r;if(r._isWrap)return r;if(!r._rollbar_wrapped&&(r._rollbar_wrapped=function(){o&&"function"==typeof o&&o.apply(this,arguments);try{return r.apply(this,arguments)}catch(o){var e=o;throw e&&("string"==typeof e&&(e=new String(e)),e._rollbarContext=n()||{},e._rollbarContext._wrappedSource=r.toString(),window._rollbarWrappedError=e),e}},r._rollbar_wrapped._isWrap=!0,r.hasOwnProperty))for(var t in r)r.hasOwnProperty(t)&&(r._rollbar_wrapped[t]=r[t]);return r._rollbar_wrapped}catch(e){return r}};for(var u="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,captureEvent,captureDomContentLoaded,captureLoad".split(","),f=0;f<u.length;++f)t.prototype[u[f]]=l(u[f]);r.exports={setupShim:a,Rollbar:p}},function(r,e){"use strict";function o(r,e,o){if(r){var t;if("function"==typeof e._rollbarOldOnError)t=e._rollbarOldOnError;else if(r.onerror){for(t=r.onerror;t._rollbarOldOnError;)t=t._rollbarOldOnError;e._rollbarOldOnError=t}var a=function(){var o=Array.prototype.slice.call(arguments,0);n(r,e,t,o)};o&&(a._rollbarOldOnError=t),r.onerror=a}}function n(r,e,o,n){r._rollbarWrappedError&&(n[4]||(n[4]=r._rollbarWrappedError),n[5]||(n[5]=r._rollbarWrappedError._rollbarContext),r._rollbarWrappedError=null),e.handleUncaughtException.apply(e,n),o&&o.apply(r,n)}function t(r,e,o){if(r){"function"==typeof r._rollbarURH&&r._rollbarURH.belongsToShim&&r.removeEventListener("unhandledrejection",r._rollbarURH);var n=function(r){var o,n,t;try{o=r.reason}catch(r){o=void 0}try{n=r.promise}catch(r){n="[unhandledrejection] error getting `promise` from event"}try{t=r.detail,!o&&t&&(o=t.reason,n=t.promise)}catch(r){t="[unhandledrejection] error getting `detail` from event"}o||(o="[unhandledrejection] error getting `reason` from event"),e&&e.handleUnhandledRejection&&e.handleUnhandledRejection(o,n)};n.belongsToShim=o,r._rollbarURH=n,r.addEventListener("unhandledrejection",n)}}function a(r,e,o){if(r){var n,t,a="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(n=0;n<a.length;++n)t=a[n],r[t]&&r[t].prototype&&l(e,r[t].prototype,o)}}function l(r,e,o){if(e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){for(var n=e.addEventListener;n._rollbarOldAdd&&n.belongsToShim;)n=n._rollbarOldAdd;var t=function(e,o,t){n.call(this,e,r.wrap(o),t)};t._rollbarOldAdd=n,t.belongsToShim=o,e.addEventListener=t;for(var a=e.removeEventListener;a._rollbarOldRemove&&a.belongsToShim;)a=a._rollbarOldRemove;var l=function(r,e,o){a.call(this,r,e&&e._rollbar_wrapped||e,o)};l._rollbarOldRemove=a,l.belongsToShim=o,e.removeEventListener=l}}r.exports={captureUncaughtExceptions:o,captureUnhandledRejections:t,wrapGlobals:a}},function(r,e){"use strict";function o(r,e){this.impl=r(e,this),this.options=e,n(o.prototype)}function n(r){for(var e=function(r){return function(){var e=Array.prototype.slice.call(arguments,0);if(this.impl[r])return this.impl[r].apply(this.impl,e)}},o="log,debug,info,warn,warning,error,critical,global,configure,handleUncaughtException,handleUnhandledRejection,_createItem,wrap,loadFull,shimId,captureEvent,captureDomContentLoaded,captureLoad".split(","),n=0;n<o.length;n++)r[o[n]]=e(o[n])}o.prototype._swapAndProcessMessages=function(r,e){this.impl=r(this.options);for(var o,n,t;o=e.shift();)n=o.method,t=o.args,this[n]&&"function"==typeof this[n]&&("captureDomContentLoaded"===n||"captureLoad"===n?this[n].apply(this,[t[0],o.ts]):this[n].apply(this,t));return this},r.exports=o},function(r,e){"use strict";r.exports=function(r){return function(e){if(!e&&!window._rollbarInitialized){r=r||{};for(var o,n,t=r.globalAlias||"Rollbar",a=window.rollbar,l=function(r){return new a(r)},i=0;o=window._rollbarShims[i++];)n||(n=o.handler),o.handler._swapAndProcessMessages(l,o.messages);window[t]=n,window._rollbarInitialized=!0}}}}]);
  // End Rollbar Snippet
</script>

    <script type="text/javascript" src="../../../d3r49iyjzglexf.cloudfront.net/vendor-a49dd70d950d55b6911baf7935064f4796e1638c4a3b6b348e6386167af435e1.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../../../d3r49iyjzglexf.cloudfront.net/site-dca4c9937ce1eead459ba348f0282b29d812388970e9826d83e8321231c2b508.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../../../d3r49iyjzglexf.cloudfront.net/utils-f707b22267f4077c535e92f9ff89b6f592d17c8328cb78b34be05fe2b0f9306c.js" crossorigin="anonymous"></script>

    
    
      <script type="text/javascript" src="../../../d3r49iyjzglexf.cloudfront.net/blog-8d1795cf3979e34e301e632dcc78cde908caa4e9e6f5dc0e7c3bca597f093b31.js" crossorigin="anonymous"></script>
    
    
    <script src="../../../d3r49iyjzglexf.cloudfront.net/components/analytics-fa42612618fd7886484c95384d65c979f009952deb1ceda01cb0ac97d235897e.js" crossorigin="anonymous" data-cookieconsent="marketing" type="text/plain"></script>
    <script type="text/javascript" src="../../../d3r49iyjzglexf.cloudfront.net/components/nav-d2238d7c5bbc619e382ae1b2ed585b8a9ae2e1a52d6887a6c3b410541adc39f3.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../../../d3r49iyjzglexf.cloudfront.net/components/customFormFields-996f687ca7bbdb0097b9b408cf479355b17162b1c817dda84b36f9149e91fb47.js" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../../../d3r49iyjzglexf.cloudfront.net/ab-testing-2e8aef55d96bc43fed9de1bb15e029660c9dfd25df20eaa423698c77afd3e97e.js" crossorigin="anonymous"></script>
  </body>

<!-- Mirrored from circleci.com/blog/deploy-a-clojure-web-application-to-aws-using-terraform/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 12 Jun 2020 08:09:49 GMT -->
</html>
